# 事件 Event

## 使用

1. 创建事件

通过 `php console make:event Test` 创建 TestEvent，补充对应的参数

2. 分发（注册）事件

在需要的地方注册分发事件：`event(new TestEvent($param));`

3. 创建监听

通过 `php console make:listener Test` 创建 TestListener，完善 handle 方法内容

4. 注册监听

修改 `config/_events.php`，在 listen 中添加 `TestEvent::class => [TestListener::class]`

5. 创建订阅器

通过 `php console make:subscriber Test` 创建 TestEventSubscriber，完善 subscribe 方法内容

6. 注册订阅器

修改 `config/_events.php`，在 subscribe 中添加 `TestEventSubscriber::class`

## 使用说明

1. 第2点分发的事件可以是 laravel 已有的事件，比如 `Illuminate\Database\Events\QueryExecuted`

2. 第3-4点和第5-6点都是创建监听，不同点在于 listener 是对应一个事件的处理，subscriber 是可以注册多个事件

## 参考

[Laravel Event](https://learnku.com/docs/laravel/5.8/events/3917#manually-registering-events)

注意：目前不支持[事件监听队列](https://learnku.com/docs/laravel/5.8/events/3917#manually-registering-events)，因为队列的功能
尚未实现