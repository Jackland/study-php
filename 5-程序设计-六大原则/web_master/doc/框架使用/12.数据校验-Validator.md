# 数据校验-Validator

## 使用

进行数据校验，针对传参是否符合要求，不做业务校验

```php
// 校验所有 GET POST 数据
$validator = $this->request->validate([
    'title' => 'required',
]);
// 检验指定数据
$validator = $this->request->validateData($this->request->get(), [
    'title' => 'required',
]);
// 缩写
$validator = validator($this->request->get(), [
    'title' => 'required',
]);

// 判断校验是否正确，与返回处理
if ($validator->fails()) {
    return $this->jsonFailed($validator->errors()->first());
}
```

## 扩展验证规则

参考 `src/Components/Rules/ExtensionRule`

说明：

1. 实现 `Rule` 接口是为了使得形如： `'file' => ['required', new ExtensionRule(['jpg'])]` 的方式可以使用

2. 实现 `ExtendableInterface` 接口是为了使得形如：`'file' => ['required', 'extension:jpg']` 的方式可以使用

3. 以上两接口非必须全部都实现，可以根据实际需求选择个别实现

4. 实现 `ExtendableInterface` 接口的验证规则类，需要在 `App\Components\Rules\RulesScanner` 下添加相关的申明

## 参考

- [illuminate/validation](https://learnku.com/docs/laravel/5.8/validation/3899)
