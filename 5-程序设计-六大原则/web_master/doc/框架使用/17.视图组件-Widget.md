# 视图组件-Widget

用于完成封装一整个完整功能的前端组件，可以囊括 html/css/js

## 使用

1. 使用命令行新建 `php console make:widget widgetName`

```php
<?php

namespace App\Widgets;

use Framework\Widget\Widget;

class WidgetNameWidget extends Widget
{
    /**
     * @inheritDoc
     */
    public function run()
    {
        return 'some content';
    }
}
```

2. 完善代码，补充 public 配置属性，完善逻辑

3. 使用

- twig 中：`{{ widget('WidgetNameWidget') }}`
- php 中：`echo WidgetNameWidget::widget();`

## 扩展使用

### 复杂的 twig 结构

使用命令行 `php console make:widget widgetName --withView` 创建 Widget 时同时创建视图，
会在 `@root/resources/views/widgets/` 目录下自动创建视图文件，同时 Widget 组件中也会使用
`$this->getView()->render('@widgets/new.twig', [])` 渲染该视图，这样可以完成复杂的 twig 逻辑

### js css 资源的加载

使用 `$this.getView()` 获取 view 对象进行相关操作，如：`$this.getView()->js(['xxx.js'])`

### 传参配置

在 Widget 组件中定义属性变量为 public 参数，即可在调用时进行相关配置，如：

```php
<?php

namespace App\Widgets;

use Framework\Widget\Widget;

class NewWidget extends Widget
{
    /**
     * @var string
     */
    public $label;

    /**
     * @inheritDoc
     */
    public function run()
    {
        return ' my label: ' . $this->label;
    }
}
```

调用时：

- twig 中：`{{ widget('WidgetNameWidget', {label: 'ok'}) }}`
- php 中：`echo WidgetNameWidget::widget(['label' => 'ok']);`