# 开发模式-Debug

## 打开调试

1. 修改本地 env 中 `OC_DEBUG` 为 `1` (0 表示关闭)

产生影响：

- 所有 Notice 错误将进行报错提示，比如未定义的变量，数组越界等

- 页面底部出现 debugBar 调试栏

2. 修改本地 env 中 `OC_ENV` 为 `dev` (正式环境或者默认为 prod)

产生影响：

- 报错页面人性化显示

- throw Exception 可以直接显示，而非显示 404 页面

## debugBar 说明与使用

- Messages: 显示消息，通过 logger 写入的日志也会打印在此处

    使用 `$this->debugBar->addMessage('test message');` 写入一条消息

- Request: 展示 request 请求数据

- Timeline: 展示时间相关的

    使用 `$this->debugBar->statrMeasure('name')` 和 `$this->debugBar->stopMeasure('name')` 来定义一条 timeline
    
- Exceptions: 显示 Exceptions

    使用 `$this->debugBar->addException($exception)` 添加一条异常
    
- Database: 显示数据库的调用情况

- Twig: 显示 twig 的层级结构

- TwigDataNotUse: twig 模版中在 controller 中定义了变量但在模版中未使用

## 参考

[DebugBar](https://github.com/maximebf/php-debugbar)

[ErrorHandler](https://github.com/filp/whoops)