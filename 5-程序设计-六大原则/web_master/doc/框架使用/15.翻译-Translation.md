# 翻译-Translation

中英文化，以及后续国际化的扩展

## 使用

PHP 中使用

```php
echo __('abc'); // 需要翻译，默认 category 为 app
echo __('你好，:name', ['name' => 'Jake']); // 替换内容
echo __('你好', [], 'services/buyer'); // 指定 category
echo __choice(':num月前', 1, [], 'controller/test'); // 选择翻译
```

Twig 中使用（顶部指定默认的category）

```twig
{% trans_default_category 'catalog/view/customerpartner/seller_center/index' %}

<div>{{ __('这个是需要翻译的地方') }}</div>
<div>{{ __('替换:text内容', {text: '文本'}) }}</div>
<div>{{ __('指定category', {}, 'catalog/test') }}</div>
<div>{{ __choice(':num月前', 1) }}</div>
```

## 相关命令

`php console translation:export`: 提取所有需要翻译的内容到 `resources/lang` 目录

`php console translation:export --path catalog/controller/customerpartner/seller_center/recommend.php`: 单独提取某个文件或目录下的所有需要翻译的内容到 `resources/lang` 目录

## 关于选择翻译的翻译内容使用

### 英文单复数问题

假如有选择翻译：`__choice(':num月前', 1, [], 'controller/test')`

则 controller/test.php 翻译文件中写的翻译格式如下：

```php
return [
    ':num月前' => implode('|', [
        '{1} :count month ago',
        '[2,*] :count months ago',
    ]),
];
```

### 错误问题根据 code 提示不同内容

假如有选择翻译：`__choice('upload_error_code', 1, [], 'controller/test')`

则 controller/test.php 翻译文件中写的翻译格式如下：

```php
return [
    'upload_error_code' => implode('|', [
        '未知的上传错误', // 放在第一个做为 code 未匹配到时的默认值
        '{1} 文件不存在',
        '{2} 上传文件大小超出',
        '{3} 移动目录失败',
    ]),
];
```
