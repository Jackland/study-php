# 命名与范例

## 规范说明

1. 以下规范仅针对编辑器无法格式化，对于编辑器可以格式化的不做说明（一般为空格、换行等）

2. 针对旧代码，一旦格式化会导致整个文件有变化，针对此情况，不建议全局格式化，
请仅针对自己写的代码块区域进行格式化，否则容易造成代码大面积冲突。对于该问题，
后期可能会直接采用工具将代码进行一次全面格式化

3. 针对旧代码命名或者一些代码不规范的情况，本次需求修改需要涉及到的【非大面积
影响性的变量名等】，建议全部改为规范性写法

3. 编辑器 PHPStorm 格式化说明：

    - PHPStorm 下使用默认 Code Style，不做任何调整(或者设置为PSR1/PSR2)
    
    - 项目根目录下会有 `.editorconfig` 文件控制代码规范，PHPStorm 下请安
    装插件 `EditorConfig` (PHPStorm 新版本已默认自带，若无请自行安装)
    
## 具体说明

### 示例代码与说明

```php
<?php // 固定一行
// 固定空一行
namespace App\Test; // 命名空间使用【大驼峰】
// 固定空一行
use App\HttpClient;
use App\Traits\TestTrait;
// 固定空一行
class TestClass extends BaseClass implements TestInterface // Class Interface 使用【大驼峰】
{
    use TestTrait; // use Trait 必须放在类的最上方
    // 固定空一行
    // 静态变量应该定义在类上方
    const PRODUCT_TYPE_MARGIN = 1; // 静态变量 使用【全大写，下划线】
    // 固定空一行
    public $productTypeMargin; // 成员属性，使用【小驼峰】，必须定义可见性（public、protected、private）
    private $_httpClient; // 私有成员变量允许使用下划线开头
    // 固定空一行
    public function __construct() // 构造方法必须放在所有方法的最上方
    {
        $this->_httpClient = new HttpClient();
    }
    // 固定空一行
    protected function testFunction($actionUrl) // 类方法名、参数命名为【小驼峰】，必须定义可见性（public、protected、private）
    {
        $response = $this->_httpClient->get($actionUrl);
        $responseContent = $response->content; // 变量命名为【小驼峰】
        $data = json_decode($responseContent, true); // 系统函数和自定义函数使用【小写下划线】
        
        return $data;
    }
    // 固定空一行
    public static function testStaticFunction($canUse, $canModify) // 类静态方法名为【小驼峰】，必须定义可见性（public、protected、private）
    {
        $name = '';
        if ($canUse === false) { // php关键字（如 false、true、break等）必须使用小写
            $name = 'no';
        } elseif ($canModify === true) { // 使用 elseif 而不是 else if
            $name = 'modify';
        }

        $list = ['a' => 1, 'b' => 2]; // 数组使用 [] 方式，不应使用 array() 形式
        if (count($list) !== 2) { // 能确保类型的比较，使用 === 和 !==，不等于不应使用 <>
            $name = 'list';
        }
    
        return [$name, $list];
    }
    // 固定空一行
    public static function __callStatic($name, $arguments) // 魔术方法尽量放在类文件的最后
    {
    }
}
// 固定空一行
```

### 额外补充说明

1. 自定义函数（如全局helper等），使用【小写下划线】命名

2. 与数据库字段相对应的变量名，可以使用【小写下划线】名

3. 数组不要按照 = 对齐（不利于后期键值修改）

4. 字符串拼接，在无变量的情况下必须使用单引号，在有变量存在时，变量必须使用大括号包裹

`$var = 'abc' . $str . 'xyz';` 或 `$var = "abc{$str}xyz"`

## 参考

[PSR-1 官方](https://www.php-fig.org/psr/psr-1/)

[PSR-2 官方](https://www.php-fig.org/psr/psr-2/)

[PSR-1 中文参考](http://phpfig.p2hp.com/psr/psr-1/)

[PSR-2 中文参考](http://phpfig.p2hp.com/psr/psr-2/)
