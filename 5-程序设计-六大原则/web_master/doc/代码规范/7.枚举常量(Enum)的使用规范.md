# 枚举常量(Enum)的使用规范

## 什么是枚举

在数学和计算机科学理论中，一个集的枚举是列出某些有穷序列集的所有成员的程序，或者是一种特定类型对象的计数。
这两种类型经常（但不总是）重叠。 是一个被命名的整型常数的集合，枚举在日常生活中很常见，
例如表示星期的SUNDAY、MONDAY、TUESDAY、WEDNESDAY、THURSDAY、FRIDAY、SATURDAY就是一个枚举

简单说枚举就是一组固定的值

PHP 中没有枚举类型，一般使用常量来定义和使用

## 使用方式

> 以下例子拿订单状态作为参考：订单状态：0 表示已下单未支付，1 表示已支付待发货，2 表示已发货，3 表示已收货

### 极其错误的使用方式：直接使用数字或字符串来判断订单状态

```php
if ($status == 0) {
    // Do Something
} elseif ($status == 1) {
    // Do Something
} elseif ($status == 2) {
    // Do Something
}
```

使用此方法会造成难以维护的问题：

- 基本看到这个代码一定会去找这个 status 这个 0 表示啥意思

- 不清楚这个状态，总共或者具体有哪些可用值

- 需要新加一个状态表示已退款时，不知道 status 应该用几了（因为不确定具体有几个值了）

### 基本可用的使用方式：在模型上方定义常量表示状态

```php
class Order extends Model
{
    const STATUS_WAIT_PAY = 0; // 已下单未支付
    const STATUS_PAID = 1; // 已支付待发货
    const STATUS_SEND = 2; // 已发货
    const STATUS_PICKED = 3; // 已收货
}
```

使用时可以从 const 名字上来简单判断是干什么的了，但是任然会出现以下问题：

- 如果这个 Order 类下有很多类似的常量，那么可能会要维护很长很长的常量字段

- 常量的起名比较长，一般起名方式：字段名+描述

- 获取状态描述时任然比较复杂，可能需要 if 判断

- 无法直接获取到全部的常量值

- 相关该字段的一些方法被集中到了模型中，导致模型臃肿

### 推荐的使用方式：枚举全部拆分使用 BaseEnum

详见【框架使用/枚举常量-Enum】

## 最佳实践

- 不要使用 0 作为枚举的一个值，除非是只有 0 和 1 的 bool 类型的枚举

- 可以提取一些公用类型的枚举，如 bool 类型的枚举

- 如果是数值类型的枚举值，建议不要使用连续性的数值表示，比如用 10 表示未发货，30 表示已发货，而不是
1 表示未发货，2 表示已发货，因为如果需要在未发货和已发货之间追加一种状态，则可以用 12 表示未发货前退款，
但是连续的话就只能补在后面，这样在排序后状态就不是连续性的了

- 可以使用字符串作为枚举值，无特殊不利（唯一的可能就是数据库浪费点空间，以及后续查询比对不如 int 快），
但是在查看数据库时比较直观
