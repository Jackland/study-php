# 远程接口调用(RemoteAPI)使用规范

## 起因

为了规范当前系统中有太多地方存在 curl 请求，且分别可能对接到不同系统，因此对这些请求的调用进行封装与规范化处理

## 使用

```php
use App\Components\RemoteApi;

$responseDataDTO = RemoteApi::serviceName()->apiName();
```

## 规范说明

- 所有的远程调用接口全部必须定义到 `src/Components/RemoteApi` 下的对应系统的文件夹中，比如 B2BManager 对应 java 后台，Omd 对应发货系统等

- 按照业务或模块划分对应的 Api，比如 FileApi、SalesOrderApi 等

- 对于接口返回值，必须定义相关的 DTO 类，写上注释，不允许直接使用数组进行操作【重点】

- 对于复杂的传参参数，可以提供 DTO 类用于提示传参，不建议接口通过数组传参

- 远程接口调用失败的所有日志在 `runtime/logs/remoteApi` 中，不需要单独记录

## 后续

- 后续接口可能会迁移到使用 nacos 网关，到时候统一处理