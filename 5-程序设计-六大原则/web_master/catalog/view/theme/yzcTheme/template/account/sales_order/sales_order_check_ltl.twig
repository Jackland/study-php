
<link href="catalog/view/javascript/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen"/>
<link href="catalog/view/theme/yzcTheme/stylesheet/font_demo/iconfont.css" rel="stylesheet" type="text/css">
<link type="text/css" href="/public/fonts/giga/iconfont.css?v={{ app_version }}" rel="stylesheet">{#B2B页面改版 图标字体#}
<script src="catalog/view/javascript/jquery/jquery-2.1.1.min.js" type="text/javascript"></script>
<script src="catalog/view/javascript/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<style>
  *{
    color: #333;
    font-size: 14px;
  }
  /*滚动条样式*/
  .inner-container ::-webkit-scrollbar {
    width: 3px;
  }

  .inner-container ::-webkit-scrollbar-button {
    background: #fff;
    display: none;
  }

  .inner-container ::-webkit-scrollbar-track {
    display: none;
  }

  .inner-container ::-webkit-scrollbar-track-piece {
    background: #fff;
  }

  .inner-container ::-webkit-scrollbar-thumb {
    background: #e0e0df;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
  }

  .inner-container ::-webkit-scrollbar-corner {
    background: #fff;
  }

  /*   IE美化  */
  .my-main-container {
    scrollbar-arrow-color: #fff; /**//*三角箭头的颜色*/
    scrollbar-face-color: #ccc; /**//*立体滚动条的颜色*/
    scrollbar-3dlight-color: #f1f1f1; /**//*立体滚动条亮边的颜色*/
    scrollbar-highlight-color: #fff; /**//*滚动条空白部分的颜色*/
    scrollbar-shadow-color: #fff; /**//*立体滚动条阴影的颜色*/
    scrollbar-darkshadow-color: #fff; /**//*立体滚动条强阴影的颜色*/
    scrollbar-track-color: #fff; /**//* 立体滚动条背景颜色*/
    scrollbar-base-color: #f1f1f1; /**//*滚动条的基本颜色*/
  }
  /*滚动条样式*/

  .notice{
    margin: 1% 2%;
  }

  .note{
    color: #FF414D;
  }

  .mrt15{
    margin-bottom: 15px;
  }

  table tr th,td{
    text-align: center;
    vertical-align: middle !important;
  }


  .btn-con{
    text-align: center;
    box-shadow: 0 -6px 10px #eee;
    position: relative;
  }
  .btn-primary.my-submit{
    font-size: 12px;
    background: #3A75DC;
    border-color: #3A75DC;
  }
  .btn-default.my-cancel{
    font-size: 12px;
    color: #478BFF;
    background-color: #fff;
    border-color: #ececec;
    font-weight: 700;
  }
  .btn-primary.my-submit{
    font-size: 14px;
  }
  .my-check-submit:hover{
    cursor: pointer;
  }
  .break-word{
    word-break: break-word;
  }
</style>
<div class="inner-container">
  <div class="notice" id="boxShow" style="height: auto;padding-top: 10px;padding-bottom: 10px">
    <div class="note" style="width: 100%;">
      <span style="color: #FA6400;">Listed below are LTL (oversized) products in your order</span><br/>
    </div>
    <div class="tip2" style="width: 100%">
      <span style="color: #000000;">LTL products are more likely to experience higher-product return costs and longer shipping times.</span><br/>
      <span style="color: #000000;">Please reconfirm the order information and purchase after confirmation</span>
    </div>
  </div>
  <div class="t-head" style="width: 96%;margin: 0 auto ;padding-right: 4px">
    <table class="table table-bordered" style="margin-bottom: 0;border-bottom: none">
      <thead>
      <tr>
        <th class="active" width="20%" style="border-bottom: none">Sales Order ID</th>
        <th class="active" width="15%" style="border-bottom: none">Item Code</th>
        <th class="active" width="10%" style="border-bottom: none">Qty</th>
        <th class="active" width="55%" style="border-bottom: none">Address</th>
      </tr>
      </thead>
    </table>
  </div>
  <div class="t-body" style="max-height: 220px;overflow: auto;width: 96%;margin: 0 auto;padding-right: 4px">
    <table class="table table-bordered" style="border-top: none;margin-bottom: 0">
      <thead>
      <tr>
        <th width="20%" style="border-bottom: none;padding: 0 8px"></th>
        <th width="15%" style="border-bottom: none;padding: 0 8px"></th>
        <th width="10%" style="border-bottom: none;padding: 0 8px"></th>
        <th width="55%" style="border-bottom: none;padding: 0 8px"></th>
      </tr>
      </thead>
      <tbody>
      {% for k,v in list %}
        {% for ks,vs in v.list %}

          <tr>
            {% if ks == 0 %}
              <td class="break-word"
                  rowspan="{{ v.count }}"
              >{{ vs.order_id }}</td>
            {% endif %}
            <td class="break-word">{{ vs.item_code }}</td>
            <td class="break-word">{{ vs.qty }}</td>
            {% if ks == 0 %}
              <td class="break-word" style="text-align: left"
                  rowspan="{{ v.count }}"
              >{{ vs.detail_address }}</td>
            {% endif %}
          </tr>
        {% endfor %}
      {% endfor %}
      </tbody>
    </table>
    <div style="width: 100%; padding-top: 10px;">
      <span style="color: #999999;">Note: the following numbers: +1 347-448-3190 ext. XXXXX or +1 929-436-4790 ext. XXXXX are fake contact numbers often used. Carriers are unable to get in contact with customers that list either of the two phone numbers above, resulting in low delivery success rates. If you happen to see a customer using one of the phone numbers listed above, please ask them to provide a valid contact number in order to avoid order delay or delivery failure. If the delivery is delayed or has failed, you will be responsible for assuming any losses.</span>
    </div>
  </div>

</div>
<div class="btn-con" style="position: fixed;width: 100%;bottom: 12px;">
  <div style="border-bottom: 1px solid #eee;padding: 5px 0 10px 0;margin-bottom: 10px">
    <input type="checkbox" name="content" value="content" id="content" class="my-check-submit" onclick="checkPromise()"/>
    <span style="margin-top: -2px;font-size: 14px">
      I have contacted my customer and am certain that all the information above is correct.<br/> I will take all the responsibility if there is any mistake of the information above  or the customer couldn't be reached.
    </span>
  </div>
  <button id='btnClose' class="btn btn-primary my-submit" disabled onclick="checkInputInfo()" >Submit</button>&nbsp;&nbsp;
</div>


<script>
  var order_id_string = '{{ id }}';
  var order_id = order_id_string.split('_');
  function checkInputInfo() {
    parent.layer.load(1,{shade: [0.3,'#000']});
    var state  = $("#content").prop("checked");
    if(state !== true){
      window.parent.layerMsg('Please check the following box and click the button',3000);
      parent.layer.closeAll('loading');
      return false;
    }
    let data = {id: order_id};
    console.dir(data);
    $.ajax({
      url: 'index.php?route=account/sales_order/sales_order_management/salesOrderLtlUpdate',
      type: 'post',
      dataType: 'json',
      async:false,
      data: data,
      success: function (json) {
        parent.layer.closeAll('loading');
        window.parent.layerMsg(json.msg,3000);
        var index = parent.layer.getFrameIndex(window.name);
        parent.layer.close(index);
      },
      error: function (xhr, ajaxOptions, thrownError) {
        parent.layer.closeAll('loading');
        window.parent.layerMsg(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
      }
    });
  }
  function checkPromise() {
    if($(".my-check-submit").is(':checked')){
      $("#btnClose").attr('disabled',false)
    }else{
      $("#btnClose").attr('disabled',true)
    }
  }
</script>
