
<link href="catalog/view/javascript/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen"/>
<link href="catalog/view/theme/yzcTheme/stylesheet/font_demo/iconfont.css?v={{ app_version }}" rel="stylesheet" type="text/css">
<link type="text/css" href="/public/fonts/giga/iconfont.css?v={{ app_version }}" rel="stylesheet">{#B2B页面改版 图标字体#}
<script src="catalog/view/javascript/jquery/jquery-2.1.1.min.js" type="text/javascript"></script>
<script src="catalog/view/javascript/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<style>
  *{
    color: #333;
    font-size: 14px;
  }
  /*滚动条样式*/
  .inner-container ::-webkit-scrollbar {
    width: 3px;
  }

  .inner-container ::-webkit-scrollbar-button {
    background: #fff;
    display: none;
  }

  .inner-container ::-webkit-scrollbar-track {
    display: none;
  }

  .inner-container ::-webkit-scrollbar-track-piece {
    background: #fff;
  }

  .inner-container ::-webkit-scrollbar-thumb {
    background: #e0e0df;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
  }

  .inner-container ::-webkit-scrollbar-corner {
    background: #fff;
  }

  /*   IE美化  */
  .my-main-container {
    scrollbar-arrow-color: #fff; /**//*三角箭头的颜色*/
    scrollbar-face-color: #ccc; /**//*立体滚动条的颜色*/
    scrollbar-3dlight-color: #f1f1f1; /**//*立体滚动条亮边的颜色*/
    scrollbar-highlight-color: #fff; /**//*滚动条空白部分的颜色*/
    scrollbar-shadow-color: #fff; /**//*立体滚动条阴影的颜色*/
    scrollbar-darkshadow-color: #fff; /**//*立体滚动条强阴影的颜色*/
    scrollbar-track-color: #fff; /**//* 立体滚动条背景颜色*/
    scrollbar-base-color: #f1f1f1; /**//*滚动条的基本颜色*/
  }
  /*滚动条样式*/

  .notice{
    height: 110px;
    margin: 1% 2%;

    background: rgb(255,236,238);
    border: 1px solid #FF7982;
    border-radius: 4px;
    /*justify-content: flex-start;*/
    /*align-items: center;*/
    padding-left: 10px;
  }

  .note{
    color: #FF414D;
  }

  .mrt15{
    margin-bottom: 15px;
  }

  table tr th,td{
    text-align: center;
    vertical-align: middle !important;
  }
.t-head{
  width: 96%;
  margin: 0 auto ;
  padding-right: 4px
}
.t-body{
  max-height: 260px;
  overflow: auto;
  width: 96%;
  margin: 0 auto;
  padding-right: 4px
}
  .btn-con{
    text-align: center;
    box-shadow: 0 -6px 10px #eee;
    position: relative;
  }
  .btn-primary.my-submit{
    font-size: 12px;
    background: #3A75DC;
    border-color: #3A75DC;
  }
  .btn-default.my-cancel{
    font-size: 12px;
    color: #478BFF;
    background-color: #fff;
    border-color: #ececec;
    font-weight: 700;
  }
  .btn-primary.my-submit{
    font-size: 14px;
  }
  .my-check-submit:hover{
    cursor: pointer;
  }
</style>
<div class="inner-container">
  <div class="notice" id="boxShow" style="height: auto;padding-top: 10px;padding-bottom: 10px">
    <div class="note" style="width: 100%;font-weight: bold">
      <span style="color: #FF414D;">Listed below are LTL (oversized) products in your order</span><br/>
    </div>
    <div class="tip1" style="width: 100%">
      <span>-LTL products are more likely to experience higher-product return costs</span><br/>
      <span>-LTL products are more likely to experience longer shipping times</span><br/>
    </div>
    <div class="tip2" style="width: 100%">
      <span>Please reconfirm the order information so we can process the order</span><br/>
    </div>
  </div>
  <div style="width: 96%;margin-left: 2%;margin-top: 10px;margin-bottom: 6px">
    <i style="color: #fa6400 ;margin-right: 4px;font-size: 22px" class="giga icon-BusinessIcons_BusinessTagSale-"></i> Order Info
  </div>
  <div class="t-head">
    <table class="table " style="margin-bottom: 0;border-bottom: none">
      <thead>
      <tr>
        <th width="20%" style="border-bottom: none">Sales Order ID</th>
        <th width="15%" style="border-bottom: none">Item Code</th>
        <th width="10%" style="border-bottom: none">Qty</th>
        <th width="55%" style="border-bottom: none">Address</th>
      </tr>
      </thead>
    </table>
  </div>
  <div class="t-body" >
    <table class="table table-bordered" style="border-top: none;margin-bottom: 0">
      <thead>
      <tr>
        <th width="20%" style="border-bottom: none;padding: 0 8px"></th>
        <th width="15%" style="border-bottom: none;padding: 0 8px"></th>
        <th width="10%" style="border-bottom: none;padding: 0 8px"></th>
        <th width="55%" style="border-bottom: none;padding: 0 8px"></th>
      </tr>
      </thead>
      <tbody>
      {% for k,v in list %}
        {% for ks,vs in v.list %}

          <tr>
            {% if ks == 0 %}
              <td rowspan="{{ v.count }}">{{ vs.order_id }}</td>
            {% endif %}
            <td>{{ vs.item_code }}</td>
            <td >{{ vs.qty }}</td>
            {% if ks == 0 %}
              <td style="text-align: left" rowspan="{{ v.count }}">{{ vs.detail_address }}</td>
            {% endif %}
          </tr>
        {% endfor %}
      {% endfor %}
      </tbody>
    </table>
  </div>

</div>
<div class="btn-con" style="position: fixed;width: 100%;bottom: 12px;">
  <div style="border-bottom: 1px solid #eee;padding: 5px 0 10px 0;margin-bottom: 10px">
    <input type="checkbox" name="content" value="content" id="content" class="my-check-submit" onclick="checkPromise()"/>
    <span style="margin-top: -2px;font-size: 14px">
      I have contacted my customer and am certain that all the information above is correct.<br/> I will take all the responsibility if there is any mistake of the information above  or the customer couldn't be reached.
    </span>
  </div>
  <button id='btnClose' class="btn btn-primary my-submit" disabled onclick="checkInputInfo()" >Submit</button>&nbsp;&nbsp;
</div>


<script>
  var from_page = '{{ from_page }}';

  {% if list|length==0 %}
    if(from_page == 'upload'){
      window.parent.location.href='index.php?route=account/customerpartner/sales_order_list';
    } else {
      window.parent.location.reload();
    }
  {% endif %}


  var order_id_string = '{{ id }}';
  var order_id = order_id_string.split('_');
  function checkInputInfo() {
    parent.layer.load(1,{shade: [0.3,'#000']});
    var state  = $("#content").prop("checked");
    if(state !== true){
      window.parent.layerMsg('Please check the following box and click the button',3000);
      parent.layer.closeAll('loading');
      return false;
    }
    let data = {id: order_id};
    $.ajax({
      url: 'index.php?route=account/customerpartner/sales_order_management/salesOrderLtlUpdateToBP',
      type: 'post',
      dataType: 'json',
      async:false,
      data: data,
      success: function (json) {
        parent.layer.closeAll('loading');
        window.parent.layerMsg(json.msg,3000);
        setTimeout(function(){
          if(from_page == 'upload'){
            window.parent.location.href='index.php?route=account/customerpartner/sales_order_list';
          } else {
            window.parent.location.reload();
          }
        }, 3000);
        //var index = parent.layer.getFrameIndex(window.name);
        //parent.layer.close(index);
      },
      error: function (xhr, ajaxOptions, thrownError) {
        parent.layer.closeAll('loading');
        window.parent.layerMsg(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
      }
    });
  }
  function checkPromise() {
    if($(".my-check-submit").is(':checked')){
      $("#btnClose").attr('disabled',false)
    }else{
      $("#btnClose").attr('disabled',true)
    }
  }
</script>
