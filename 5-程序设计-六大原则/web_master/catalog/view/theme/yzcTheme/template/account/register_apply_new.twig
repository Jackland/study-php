{{ header }}
<style>
    .myrequired:after {
        content: '*';
        color: #F00;
        font-weight: bold;
    }

    .field-group-title {
        font-weight: bold;
        color: #FF7400;
    }

    .question-line {
        border-top: 1px solid #dddddd;
    }

    #question-symbol {

    }

    .button-wrapper a {
        color: blue;
    }

    .modal-dialog .modal-body {
        text-align: center;
        padding: 30px 0;
    }

    .schedule {
        background-color: #f3f5f7;
        padding: 10px;
    }

    .schedule ul {
        margin-bottom: 0;
        overflow: hidden;
        text-align: center;
    }

    .schedule li {
        list-style: none;
        float: left;
        font-size: 16px;
    }

    .schedule li.gap {
        width: 5%;
        text-align: center;
    }

    .schedule li.gap {
        font-size: 12px;
        color: #ccc;
    }

    .must:after {
        content: '*';
        color: red;
        margin-left: 5px;
    }
</style>
<div id="account-register" class="bg-white splitLine">
    {% if error_warning %}
        <div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
        </div>
    {% endif %}

    <div id="appregister">
        <form id="thatForm" action="{{ action }}" method="post" enctype="multipart/form-data" class="">
            <div class="container">
                <div class="text-center mb-3">
                    <h1>I am a new customer</h1>
                </div>
                <div class="schedule col-md-10 col-md-push-1 mb-2">
                    <ul>
                        <li style="color: #3a75dc">1. Submit Buyer information</li>
                        <li class="gap"><i class="giga icon-arrow-right-copy"> </i></li>
                        <li {% if success_register_apply %} style="color: #3a75dc" {% endif %}>2. Receive contact from business representative</li>
                        <li class="gap"><i class="giga icon-arrow-right-copy"> </i></li>
                        <li>3. Account approval and creation</li>
                    </ul>
                </div>
                {% if success_register_apply is not defined %}
                <div class="registrationPage">
                    <div class="form-wrapper">
                        <div class="row mb-2">
                            <div class="col-md-10 col-md-push-1">
                                <p class="form-title">Contact Information</p>
                                <div class="row">
                                    {#First Name#}
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="input-firstname" class="must">FIRST NAME</label>
                                            <span class="input-required">
                                              {% if error_firstname %}
                                                  {{ error_firstname }}
                                              {% endif %}
                                            </span>
                                            <input type="text" name="firstname" value="{{ firstname }}" class="form-control"
                                                   id="input-firstname" placeholder="{{ entry_firstname }}"
                                                    onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')">
                                        </div>
                                    </div>
                                    {#Last Name#}
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="input-lastname" class="must">LAST NAME</label>
                                            <span class="input-required">
                                                    {% if error_lastname %}
                                                        {{ error_lastname }}
                                                    {% endif %}
                                             </span>
                                            <input type="text" name="lastname" value="{{ lastname }}"
                                                   class="form-control" id="input-lastname"
                                                   placeholder="{{ entry_lastname }}"
                                                   onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')">
                                        </div>
                                    </div>
                                    {#Job Title#}
                                    <div class="col-md-4">
                                        <div class="form-group ipt">
                                            <label for="input-jobtitle" class="must">JOB TITLE</label>
                                            <span class="input-required">
                                               {% if error_jobtitle %}
                                                   {{ error_jobtitle }}
                                               {% endif %}
                                             </span>
                                            <input type="text" name="jobtitle" value="{{ jobtitle }}"
                                                   class="form-control" id="input-jobtitle"
                                                   placeholder="{{ entry_jobtitle }}"
                                                   onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    {#E-mail#}
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="input-email" class="must">EMAIL</label>
                                            <span class="input-required">
                                                {% if error_email %}
                                                    {{ error_email }}
                                                {% endif %}

                                            </span>
                                            <input type="text" name="email" value="{{ email }}" class="form-control"
                                                   id="input-email"
                                                   placeholder="{{ entry_email }}"
                                                   onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')">
                                        </div>
                                    </div>
                                    {#Telephont#}
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="input-telephone" class="must">PHONE(EXT.)</label>
                                            <span class="input-required">
                                                {% if error_telephone %}
                                                    {{ error_telephone }}
                                                {% endif %}
                                            </span>
                                            <input type="tel" name="telephone" value="{{ telephone }}"
                                                   class="form-control" id="input-telephone"
                                                   placeholder="Full phone number"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')">
                                        </div>
                                    </div>
                                    {#Primary Time Zone#}
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="input-primary-timezone" class="must">PRIMARY TIME ZONE</label>
                                            <span class="input-required">
                                              {% if error_primary_timezone %}
                                                  {{ error_primary_timezone }}
                                              {% endif %}
                                            </span>
                                            <input type="text" name="primary_timezone" value="{{ primary_timezone }}"
                                                   class="form-control"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')"
                                                   id="input-primary-timezone" placeholder="Primary Time Zone">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mb-2">
                            <div class="col-md-10 col-md-push-1">
                                <p class="form-title">Business Information</p>
                                <div class="row">
                                    {#Company#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-company" class="must">COMPANY</label>
                                            <span class="input-required">
                                              {% if error_company %}
                                                  {{ error_company }}
                                              {% endif %}
                                            </span>
                                            <input type="text" name="company" value="{{ company }}" class="form-control"
                                                   id="input-company"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')"
                                                   placeholder="{{ entry_company }}">
                                        </div>
                                    </div>
                                    {#Tax ID#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-tax-id" class="">Tax ID</label>
                                            <span class="input-required">
                                               {% if error_tax_id %}
                                                   {{ error_tax_id }}
                                               {% endif %}
                                             </span>
                                            <input type="text" name="tax_id" value="{{ tax_id }}" class="form-control"
                                                   id="input-tax-id"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')"
                                                   placeholder="{{ entry_tax_id }}">
                                        </div>
                                    </div>
                                    {#State of Incorporation#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-state-incorporation" class="">STATE OF
                                                INCORPORATION</label>
                                            <span class="input-required">
                                                {% if error_state_incorporation %}
                                                    {{ error_state_incorporation }}
                                                {% else %}
                                                    {#                        REQUIRED#}
                                                {% endif %}
                                            </span>
                                            <input type="text" name="state_incorporation"
                                                   value="{{ state_incorporation }}" class="form-control"
                                                   id="input-state-incorporation"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')"
                                                   placeholder="{{ entry_state_incorporation }}">
                                        </div>
                                    </div>
                                    {#Year Company was Founded#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-year-company">YEAR COMPANY WAS FOUNDED</label>
                                            <span class="input-required">
                                                {% if error_year_company %}
                                                    {{ error_year_company }}
                                                {% else %}
                                                    {#                        REQUIRED#}
                                                {% endif %}
                                              </span>
                                            <input type="text" name="year_company" value="{{ year_company }}"
                                                   class="form-control"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')"
                                                   id="input-year-company" placeholder="{{ entry_year_company }}">
                                        </div>
                                    </div>
                                    {#Annual Online Sales Revenue (USD)#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-annual-revenue">ANNUAL ONLINE SALES REVENUE(USD)</label>
                                            <span class="input-required">
                                                    {% if error_annual_revenue %}
                                                        {{ error_annual_revenue }}
                                                    {% else %}
                                                        {#                        REQUIRED#}
                                                    {% endif %}
                                             </span>
                                            <input type="text" name="annual_revenue" value="{{ annual_revenue }}"
                                                   class="form-control"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')"
                                                   id="input-annual-revenue" placeholder="{{ entry_annual_revenue }}">
                                        </div>
                                    </div>
                                    {#Website(s)#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-website">WEBSITE(s)</label>
                                            <span class="input-required">
                                              {% if error_website %}
                                                  {{ error_website }}
                                              {% else %}
                                                  {#                        REQUIRED#}
                                              {% endif %}
                                            </span>
                                            <input type="text" name="website" value="{{ website }}" class="form-control"
                                                   id="input-website"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')"
                                                   placeholder="http://">
                                        </div>
                                    </div>
                                    {#Address Line 1#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-address-1" class="must">ADDRESS LINE 1</label>
                                            <span class="input-required">
                                              {% if error_address_1 %}
                                                  {{ error_address_1 }}
                                              {% else %}
{#                                                  REQUIRED#}
                                              {% endif %}
                                            </span>
                                            <input type="text" name="street" value="{{ street }}"
                                                   placeholder="{{ entry_address_1 }}"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')"
                                                   class="form-control" id="input-address-1"
                                                   placeholder="{{ entry_address_1 }}">
                                        </div>
                                    </div>
                                    {#Address Line 2#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-street-2">ADDRESS LINE 2</label>
                                            <span class="input-required">
                                              {% if error_street_2 %}
                                                  {{ error_street_2 }}
                                              {% else %}
                                              {% endif %}
                                            </span>
                                            <input type="text" name="street_2" value="{{ street_2 }}"
                                                   class="form-control" id="input-street-2"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')"
                                                   placeholder="{{ entry_street_2 }}">
                                        </div>
                                    </div>
                                    {#City/Town#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-city" class="must">CITY / TOWN</label>
                                            <span class="input-required">
                                                {% if error_city %}
                                                    {{ error_city }}
                                                {% endif %}
                                              </span>
                                            <input type="text" name="city" value="{{ city }}" class="form-control"
                                                   id="input-city"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')"
                                                   placeholder="{{ entry_city }}">
                                        </div>
                                    </div>
                                    {#State#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-confirm">STATE / REGION / PROVINCE</label>
                                            <select name="address[zone_id]" id="input-zone" class="form-control">

                                            </select>
                                        </div>
                                    </div>
                                    {#ZipCode#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-zip" class="must">ZIP / POSTAL CODE</label>
                                            <span class="input-required" >
                                                   {% if error_zip %}
                                                       {{ error_zip }}
                                                   {% endif %}
                                                 </span>
                                            <input type="text" name="zip" value="{{ zip }}" class="form-control"
                                                   id="input-zip"  onkeyup="this.value=this.value.replace(/^\s+|\s+$/g,'')"
                                                   placeholder="{{ entry_zip }}">
                                        </div>
                                    </div>
                                    {#Country#}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="input-country" class="must">COUNTRY</label>
                                            <span class="input-required">
                                                   {% if error_country %}
                                                       {{ error_country }}
                                                   {% endif %}
                                                 </span>
                                            <select name="address[country_id]" id="input-country"
                                                    onchange="country(this,'{{ address.zone_id }}', {{ zone_id }});"
                                                    class="form-control">
                                                <option value="">----{{ __('请选择', {}, 'common') }}----</option>
                                                {% for country in countries %}
                                                    <option
                                                            value="{{ country.country_id }}" {% if country_id == country.country_id %} selected {% endif %}>{{ country.name }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-10 col-md-push-1">
                                {#Q & A#}
                                <p class="form-title">Q&amp;A</p>
                                <div class="mb-3">
                                    <p>Q1 — WHO IS YOUR TARGET MARKET?</p>
                                    <div class="row">
                                        {% verbatim %}
                  <div v-for="(item, index) in marketList">
                    <div class="col-md-3 col-sm-3 col-xs-12">
                      <div class="checkbox-plus">
                        <label class="checkbox-inline">
                          <input type="checkbox" name="market[]" :value="item.id" v-model="item.status"><span class="icon"></span> <span class="text">{{item.name}}</span>
                        </label>
                      </div>
                    </div>
                  </div>
                  {% endverbatim %}
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <p>Q2 — HOW DID YOU FIND US?</p>
                                    <p style="margin-top: 1%;margin-bottom:1%;">
                                        <input id="findType1" name="findType" type="radio" value="1" checked="false"
                                               style="vertical-align:middle; margin-top:0;"/>
                                        <span class="must" style="vertical-align:middle; margin-top:0;margin-left: 1%">Business representative recommended</span>
                                        <input id="findType2" name="findType" type="radio" value="2"
                                               style="margin-left: 10%;vertical-align:middle; margin-top:0;"/>
                                        <span style="vertical-align:middle; margin-top:0;margin-left: 1%">Others</span>
{#                                        <span class="input-required" id="requireFlag"#}
{#                                              style="line-height: 20px">REQUIRED</span>#}
                                    </p>
                                    <textarea id="recommendedText" name="source" class="form-control" rows="5"
                                              placeholder="Enter a business representative's name here...">{{ source }}</textarea>
                                    {% if error_source %}
                                        <div class="text-danger">{{ error_source }}</div>
                                    {% endif %}
                                </div>
                                <div class="mb-4">
                                    <p>Q3 — WHAT PRODUCT CATEGORIES DOES YOUR BUSINESS OFFER?</p>
                                    <textarea name="product" class="form-control" rows="5"
                                              placeholder="Enter your answer here...">{{ product }}</textarea>
                                    {% if error_product %}
                                        <div class="text-danger">{{ error_product }}</div>
                                    {% endif %}
                                </div>
                                <div class="mb-4">
                                    <p>Q4 — WHAT ARE YOUR MOST UTILIZED ECOMMERCE ACCOUNT(S)? PLEASE PROVIDE STOREFRONT
                                        URL(S).</p>
                                    <textarea name="account" class="form-control" rows="5"
                                              placeholder="Enter your answer here...">{{ account }}</textarea>
                                    {% if error_account %}
                                        <div class="text-danger">{{ error_account }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="button-wrapper">
                        <button type="button" id="postme" class="btn btn-lg">REGISTER NOW</button>
                    </div>
                </div>
                {% endif %}
                {% if success_register_apply %}
                <div class="successfulRegistration col-md-10 col-md-push-1">
                    <h3 class="mb-2" style="color: #183464">You have successfully applied for registration</h3>
                    <p style="color: #ccc">
                        Thank you for registering with the GIGA CLOUD LOGISTICS MARKETPLACE.<br>
                        A business representative will be reaching out to you within 5 working days via the contact information you provided,
                        please check your messages regularly.
                    </p>
                    <div class="button-wrapper">
                        <a href="/">
                          <button type="button" id="homepage" class="btn btn-lg" style="width: auto">Homepage</button>
                        </a>
                    </div>
                </div>
                {% endif %}
            </div>


            <!-- Modal -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                        aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">Confirm</h4>
                        </div>
                        <div class="modal-body">
                            Once your registration application has been submitted<br>changes cannot be made.

                        </div>
                        <div class="btn">
                            <button id="modelConfirm" type="button" class="btn btn-primary">Confirm</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        </div>

                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<style>
    .modal-content > .btn {
        margin-left: 65%;
        margin-top: 20px;
        padding: 10px;
    }

    .form-wrapper .input-required {
        color: #3A75DC;
    }
</style>
<script>

    function vaild() {
        // FirstName 1~50
        if ($("#input-firstname").val().length < 1 || $("#input-firstname").val().length > 50) {
            $("#input-firstname").prev().text("1 - 50 characters!");
            // window.location.hash ="#input-firstname";
            $('html,body').animate({scrollTop: $("#input-firstname").offset().top - 50});
            return false;
        } else {
            $("#input-firstname").prev().text(" ");
        }
        // LastName 1~50
        if ($("#input-lastname").val().length < 1 || $("#input-lastname").val().length > 50) {
            $("#input-lastname").prev().text("1 - 50 characters!");
            $('html,body').animate({scrollTop: $("#input-lastname").offset().top - 50});
            return false;
        } else {
            $("#input-lastname").prev().text(" ");
        }
        //jobtitle
        if ($("#input-jobtitle").val().length < 1 || $("#input-jobtitle").val().length > 50) {
            $("#input-jobtitle").prev().text("1 - 50 characters!");
            $('html,body').animate({scrollTop: $("#input-jobtitle").offset().top - 50});
            return false;
        } else {
            $("#input-jobtitle").prev().text(" ");
        }
        // Email <96
        var re = RegExp(/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/);
        if (!re.test($("#input-email").val())) {
            // if($("#input-email").val()!= regExp){
            $("#input-email").prev().text("Email Address is not valid!");
            $('html,body').animate({scrollTop: $("#input-email").offset().top - 50});
            return false;
        } else {
            $("#input-email").prev().text(" ");
        }
        // phone 3~50
        if ($("#input-telephone").val().length < 3 || $("#input-telephone").val().length > 50) {
            $("#input-telephone").prev().text("3 - 50 characters!");
            $('html,body').animate({scrollTop: $("#input-telephone").offset().top - 50});
            return false;
        } else {
            $("#input-telephone").prev().text(" ");
        }
        // Primary Time 1~50
        if ($("#input-primary-timezone").val().length < 1 || $("#input-primary-timezone").val().length > 50) {
            $("#input-primary-timezone").prev().text("1 - 50 characters!");
            $('html,body').animate({scrollTop: $("#input-primary-timezone").offset().top - 50});
            return false;
        } else {
            $("#input-primary-timezone").prev().text(" ");
        }
        // input-company 1~100
        if ($("#input-company").val().length < 1 || $("#input-company").val().length > 100) {
            $("#input-company").prev().text("1 - 100 characters!");
            $('html,body').animate({scrollTop: $("#input-company").offset().top - 50});
            return false;
        } else {
            $("#input-company").prev().text(" ");
        }
        // input-tax-id 0-100
        if ($("#input-tax-id").val().length > 100) {
            $("#input-tax-id").prev().text("1 - 50 characters!");
            $('html,body').animate({scrollTop: $("#input-tax-id").offset().top - 50});
            return false;
        }
        // input-state-incorporation 0-100
        if ($("#input-state-incorporation").val().length > 100) {
            $('html,body').animate({scrollTop: $("#input-state-incorporation").offset().top - 50});
            return false;
        }
        // input-year-company 0-100
        if ($("#input-year-company").val().length > 100) {
            $('html,body').animate({scrollTop: $("#input-year-company").offset().top - 50});
            return false;
        }
        // input-annual-revenue 0-100
        if ($("#input-annual-revenue").val().length > 100) {
            $('html,body').animate({scrollTop: $("#input-annual-revenue").offset().top - 50});
            return false;
        }
        // input-website 0-100
        if ($("#input-website").val().length > 100) {
            $('html,body').animate({scrollTop: $("#input-website").offset().top - 50});
            return false;
        }
        // input-address-1 1~100
        if ($("#input-address-1").val().length < 1 || $("#input-address-1").val().length > 100) {
            $("#input-address-1").prev().text("1 - 100 characters!");
            $('html,body').animate({scrollTop: $("#input-address-1").offset().top - 50});
            return false;
        } else {
            $("#input-address-1").prev().text(" ");
        }
        // input-street-2 0-100
        if ($("#input-street-2").val().length > 100) {
            $('html,body').animate({scrollTop: $("#input-address-2").offset().top - 50});
            return false;
        }
        // input-city 1~100
        if ($("#input-city").val().length < 1 || $("#input-city").val().length > 100) {
            $("#input-city").prev().text("1 - 100 characters!");
            $('html,body').animate({scrollTop: $("#input-city").offset().top - 50});
            return false;
        } else {
            $("#input-city").prev().text(" ");
        }
        // input-zip 1~20
        if ($("#input-zip").val().length < 1 || $("#input-zip").val().length > 20) {
            $("#input-zip").prev().text("1 - 20 characters!");
            $('html,body').animate({scrollTop: $("#input-zip").offset().top - 50});
            return false;
        } else {
            $("#input-zip").prev().text(" ");
        }
        //input-country
        if ($("#input-country").val() == null || $("#input-country").val() == undefined || $("#input-country").val() == "") {
            $("#input-country").prev().text("Please select a country!");
            $('html,body').animate({scrollTop: $("#input-country").offset().top - 50});
            // window.location.hash ="#input-country";
            return false;
        } else {
            $("#input-country").prev().text(" ");
        }
        //检验推荐人
        var orderType = $('input[type=radio][name=findType]:checked').val();
        if (orderType == 1) {
            if ($('#recommendedText').val().length < 1 || $('#recommendedText').val().length > 25) {
                $("#requireFlag").text("1 - 25 characters!");
                $('html,body').animate({scrollTop: $("#input-zip").offset().top - 50});
                return false;
            } else {
                $("#requireFlag").text(" ");
            }
        }

        return true;
    }

    $(document).ready(function () {
        // Highlight any found errors
        $('.text-danger').each(function () {
                var element = $(this).parent().parent();

                if (element.hasClass('has-error')) {
                    element.removeClass('has-error');
                }
                element = $(this).parent();
                if (element.hasClass('ipt')) {
                    element.addClass('has-error');
                }

                var findType = {{ findType }};
                if (findType == 1) {
                    $("#findType1").attr("checked", "checked");
                } else if (findType == 2) {
                    $("#findType2").attr("checked", "checked");
                }
            }
        );


        $("#postme").on('click', function () {
            var isTrue = vaild();
            console.log(isTrue);
            if (isTrue) {
                $("#myModal").modal("show");
            }
        });


        $("#modelConfirm").on('click', function () {
            $("#thatForm").submit();
            $("#modelConfirm").button('loading');
            $("#postme").button('loading');
        });
    });


    function country(element, index, zone_id) {
        $.ajax({
            url: 'index.php?route=account/register_apply/country&user_token={{ user_token }}&country_id=' + element.value,
            dataType: 'json',
            beforeSend: function () {
                $('select[name=\'address[country_id]\']').prop('disabled', true);
            },
            complete: function () {
                $('select[name=\'address[country_id]\']').prop('disabled', false);
            },
            success: function (json) {
                if (json['postcode_required'] == '1') {
                    $('input[name=\'address[' + index + '][postcode]\']').parent().parent().addClass('required');
                } else {
                    $('input[name=\'address[' + index + '][postcode]\']').parent().parent().removeClass('required');
                }

                var html = '<option value="">----{{ text_select }}----</option>';

                if (json['zone'] && json['zone'] != '') {
                    for (var i = 0; i < json['zone'].length; i++) {
                        html += '<option value="' + json['zone'][i]['zone_id'] + '"';

                        if (json['zone'][i]['zone_id'] == zone_id) {
                            html += ' selected="selected"';
                        }

                        html += '>' + json['zone'][i]['name'] + '</option>';
                    }
                } else {
                    html += '<option value="0">{{ text_none }}</option>';
                }

                $('select[name=\'address[zone_id]\']').html(html);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
            }
        });
    }

    $('select[name$=\'[country_id]\']').trigger('change');

    var marketJson = {{ marketJson }};
    var appregister = new Vue({
        el: '#appregister',
        data: {
            marketList: marketJson
        }
    });
</script>
<script>
    $('input[name=findType]').change(function () {
        var orderType = $('input[type=radio][name=findType]:checked').val();
        if (orderType == 2) {
            $('#recommendedText').val('');
            $('#recommendedText').attr('placeholder', "Enter your response here...");
            $("#requireFlag").text(" ");
            $('#requireFlag').hide();
        } else {
            $('#recommendedText').val('');
            $('#recommendedText').attr('placeholder', "Enter a business representative's name here...");
            $("#requireFlag").text(" ");
            $('#requireFlag').show();
        }
    })
</script>
{{ footer }} 