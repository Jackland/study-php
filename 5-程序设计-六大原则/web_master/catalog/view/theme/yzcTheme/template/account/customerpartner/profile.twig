{{ header }}{{ separate_column_left }}
{{ assetBundle('Common\\SummernoteAsset') }}

<link rel="stylesheet" href="catalog/view/javascript/product/element-ui.css">
<!-- import Vue before Element -->
{#<script src="https://unpkg.com/vue/dist/vue.js"></script>#}
<script src="catalog/view/javascript/product/vue.min.js"></script>
<!-- import JavaScript -->
<script src="catalog/view/javascript/product/element-ui.js"></script>
<script src="catalog/view/javascript/product/element-ui-en.js"></script>
<!-- import axios -->
<script src="catalog/view/javascript/product/axios.min.js"></script>
<link rel="stylesheet" type="text/css" href="catalog/view/theme/yzcTheme/stylesheet/account/customerpartner/profile.css">
<style type="text/css">
    {% if partner.companybanner_img %}
    .companybanner .el-upload--picture-card {
        display: none !important;
    }
    {% endif %}

    {% if partner.avatar_img %}
    .avatar .el-upload--picture-card {
        display: none !important;
    }
    {% endif %}
    .store-status{
       font-size: 14px;
       padding: 12px;
    }
    .profile-form .row {
      margin: 0;
    }

    .pending {
      color: #004bd8;
    }

    .not-approved {
      color: #f82b2b;
    }

    .approved {
      color: #04a146;
    }
    .pull-right a {
      height: 36px;
    }
    .btn-right i.iconfont {
      font-size: 13px;
    }
</style>
{{ upload_input }}
{% if separate_view is defined and separate_view %}
<div class="container-fluid profile-form" id="content" style="margin-left: 15%">
  {% else %}
  <div class="container">
    {% endif %}
    <ul class="breadcrumb" >
      {% for breadcrumb in breadcrumbs %}
        <li>
          <a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a>
        </li>
      {% endfor %}
    </ul>
    {% if error_warning %}
      <div class="alert alert-danger">
        <i class="fa fa-check-circle"></i>
        {{ error_warning }}
        <button type="button" class="close" data-dismiss="alert">&times;</button>
      </div>
    {% endif %}
    {% if success %}
      <div class="alert alert-success">
        <i class="fa fa-check-circle"></i>
        {{ success }}
        <button type="button" class="close" data-dismiss="alert">&times;</button>
      </div>
    {% endif %}
    <div class="row" id="app_form">{{ column_left }}
      {% if column_left and column_right %}
        {% set class = 'col-sm-6' %}
      {% elseif column_left or column_right %}
        {% set class = 'col-sm-9' %}
      {% else %}
        {% set class = 'col-sm-12' %}
      {% endif %}
      <div id="content" class="{{ class }}">{{ content_top }}
        {% if chkIsPartner %}
          <h1 style="margin-bottom: 15px">{{ heading_title }}
            {% if not first_apply %}
              <a href="index.php?route=customerpartner/credit_manage" data-toggle="tooltip"  style="font-size: 12px;" data-original-title="Credit card authorization has not been enabled. Click here to access the application page"><i class="giga icon-V10-wenhaotishi"></i></a>
            {% endif %}
            <div class="pull-right" style="margin-top: -10px">
              <a href="{{ view_profile }}" data-toggle="tooltip" title="{{ text_my_store }}" class="btn btn-right"
                 target="_blank">
                <i class="iconfont icon-shangdian"></i>
              </a>
              <a href="{{ back }}" data-toggle="tooltip" title="{{ button_back }}" class="btn btn-right" >
                <i class="fa fa-reply"></i>
              </a>
            </div>
          </h1>
          <div id="table-shadow" >
            <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-profile" style="padding-top: 15px;overflow: hidden">
              {% if isMember %}
                {% if allowed is defined and allowed %}
                  <div class="alert alert-info" >
                    <i class="fa fa-exclamation-circle"></i>
                    {{ text_profile_info }}
                    <button type="button" class="close" data-dismiss="alert">×</button>
                  </div>
                {% endif %}
                {% if audit_status and audit_status > 0 %}
                  <div class="store-status">Status：<span class="{{ audit_status_class }}">{{ audit_status_show }}</span></div>
                {% endif %}
                <div class="tab-content">
                  <div class="tab-pane active" id="tab-profile_details">
                    <div class="row">
                      <div class="form-group required col-md-6 col-sm-12">
                        <label class="control-label col-sm-12" for="input-screenName" style="text-align: left;padding: 0px;">
                          {{ text_store_name }}
                          <a  title="Store name can not be left blank." data-toggle="tooltip" style="color: red;float: right">Required</a>
                        </label>
                        <div class="input">
                          <input type="text" name="screenName" value="{{ partner['screenname'] }}" id="input-screenName"
                                 class="form-control" style="background-color: #eee"/>
                          {% if screenname_error is defined and screenname_error %}
                            <div class="text-danger">
                              {{ screenname_error }}
                            </div>
                          {% endif %}
                        </div>
                      </div>
                      <div class="form-group col-md-6 col-sm-12">
                        <label class="control-label  pl-0" for="input-country">
                          {{ text_country }}
                        </label>
                        <div class="input pl-0">
                          <input disabled type="text" name="country" value="{{ partner['country'] }}" id="input-country"
                                 class="form-control"/>
                          <span class="forbid">Can't be changed</span>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="form-group col-md-6 col-sm-12">
                        <label class=" control-label" for="input-firstname">{{ text_firstname }}</label>
                        <div class="input">
                          <input disabled type="text" name="firstname" value="{{ customer_details['firstname'] }}"
                                 id="input-firstname" class="form-control"/>
                          <span class="forbid">Can't be changed</span>
                        </div>
                      </div>
                      <div class="form-group col-md-6 col-sm-12">
                        <label class=" control-label" for="input-lastname">
                          {{ text_lastname }}
                        </label>
                        <div class="input">
                          <input disabled type="text" name="lastname" value="{{ customer_details['lastname'] }}"
                                 id="input-lastname" class="form-control"/>
                          <span class="forbid">Can't be changed</span>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="form-group  col-md-6 col-sm-12">
                        <label class=" control-label" for="input-email">
                          {{ text_email }}
                        </label>
                        <div class="input">
                          <input disabled type="text" name="email" value="{{ customer_details['email'] }}" id="input-email"
                                 class="form-control"/>
                          <span class="forbid">Can't be changed</span>
                        </div>
                      </div>
                      <div class="form-group  col-md-6 col-sm-12">
                        <label class="control-label" for="input-email">
                          Telephone
                        </label>
                        <div class="input">
                          <input disabled type="text" name="email" value="{{ customer_details['telephone'] }}"
                                 id="input-email" class="form-control"/>
                          <span class="forbid">Can't be changed</span>
                        </div>
                      </div>
                    </div>
                    {% if allowed['shortprofile'] is defined %}
                      <div class="form-group ">
                        <label class="col-sm-3 control-label" for="input-shortprofile">{{ text_short_profile }}</label>
                        <div class="col-sm-9">
                        <textarea name="shortProfile" id="input-shortprofile"
                                  class="form-control">{{ partner['shortprofile'] }}</textarea>

                        </div>
                      </div>
                    {% endif %}
                    {% if allowed['twitterid'] is defined %}
                      <div class="form-group form-group required">
                        <label class="col-sm-3 control-label" for="input-twitterId">
                          {{ text_twitter_id }}
                        </label>
                        <div class="col-sm-9">
                          <input type="text" name="twitterId" value="{{ partner['twitterid'] }}" id="input-twitterId"
                                 class="form-control"/>
                        </div>
                      </div>
                    {% endif %}
                    {% if allowed['facebookid'] is defined %}
                      <div class="form-group form-group required">
                        <label class="col-sm-3 control-label" for="input-facebookId">
                          {{ text_facebook_id }}
                        </label>
                        <div class="col-sm-9">
                          <input type="text" name="facebookId" value="{{ partner['facebookid'] }}" id="input-facebookId"
                                 class="form-control"/>
                        </div>
                      </div>
                    {% endif %}
                    {% if allowed['backgroundcolor'] is defined %}
                      <div class="form-group">
                        <label class="col-sm-3 control-label"
                               for="input-backgroundcolor">{{ text_theme_background_color }}</label>
                        <div class="col-sm-9">
                          <div class="input-group bgcolorpicker">
													<span class="input-group-addon">
														<i></i>
													</span>
                            <input type="text" name="backgroundcolor" value="{{ partner['backgroundcolor'] }}"
                                   id="input-backgroundcolor" class="form-control"/>
                          </div>
                        </div>
                      </div>
                    {% endif %}
                    {% if allowed['avatar'] is defined %}
                      <div class="form-group avatar col-md-5" >
                        <label class="col-sm-12 control-label" for="input-avatar" style="text-align:left;margin-bottom: 10px;">
                          {{ text_company_logo }}
                          <a data-toggle="tooltip" title="200px * 200px"><i class="giga icon-V10-wenhaotishi"></i></a>
                        </label>
                          <upload-input
                            :on-confirm="handlerOnConfirmLogo"
                            :on-change="handlerOnConfirmLogo"
                            :file-list="logo"
                            :select-range="['image']"
                            :show-preview="function() {  return true;  }"
                            ref="upload_logo">
                          </upload-input>
                          <input type="hidden" name="avatar" v-model="logo_file_ids">

                      </div>
                    {% endif %}
                    {% if allowed['companybanner'] is defined %}
                      <div class="form-group companybanner col-md-5" >
                        <label class="col-sm-12 control-label" for="input-companybanner" style="text-align:left;margin-bottom: 10px;">
                          {{ text_company_banner }}
                          <a data-toggle="tooltip" title="1130px * 200px"><i class="giga icon-V10-wenhaotishi"></i></a>
                        </label>

                        <upload-input
                          :on-confirm="handlerOnConfirmBanner"
                          :on-change="handlerOnConfirmBanner"
                          :file-list="banner"
                          :select-range="['image']"
                          :show-preview="function() {  return true;  }"
                          ref="upload_banner">
                        </upload-input>
                        <input type="hidden" name="companybanner" v-model="banner_file_ids">

                      </div>


                    {% endif %}
                    {% if allowed['companydescription'] is defined %}
                      <div class="form-group clear-flow">
                        <label class=" control-label" for="input-companydescription"
                               style="margin-left:15px">{{ text_store_description }}</label>
                        <div class="input">
                        <textarea name="companyDescription" id="input-companydescription"
                                  class="form-control" data-toggle="summernote">{{ partner['companydescription'] }}</textarea>
                        </div>
                      </div>
                    {% endif %}
                  </div>

                  {% if allowed['paypalid'] is defined and allowed['otherpayment'] is defined and allowed['taxinfo'] is defined %}
                    <div class="tab-pane" id="tab-paymentmode">
                      <div class="alert alert-info">
                        <i class="fa fa-exclamation-circle"></i>
                        {{ text_paymentmode }}
                        <button type="button" class="close" data-dismiss="alert">×</button>
                      </div>
                      {% if allowed['paypalid'] is defined %}
                        <div class="form-group">
                          <label class="col-sm-3 control-label" for="input-paypalfirst">
                            {{ text_paypal_ ~ ' ' ~ text_firstname }}
                          </label>
                          <div class="col-sm-9">
                            <input type="text" name="paypalfirst" value="{{ partner['paypalfirst'] }}"
                                   id="input-paypalfirst" class="form-control"/>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="col-sm-3 control-label" for="input-paypallast">
                            {{ text_paypal_ ~ ' ' ~ text_lastname }}
                          </label>
                          <div class="col-sm-9">
                            <input type="text" name="paypallast" value="{{ partner['paypallast'] }}" id="input-paypallast"
                                   class="form-control"/>
                          </div>
                        </div>
                        <div class="form-group">
                          <label class="col-sm-3 control-label" for="input-paypalid">
                            {{ text_payment_detail }}
                          </label>
                          <div class="col-sm-9">
                            <input type="text" name="paypalid" value="{{ partner['paypalid'] }}" id="input-paypalid"
                                   class="form-control"/>
                            {% if paypal_error is defined and paypal_error %}
                              <div class="text-danger">
                                {{ paypal_error }}
                              </div>
                            {% endif %}
                          </div>
                        </div>
                      {% endif %}
                      {% if allowed['otherpayment'] is defined %}
                        <div class="form-group">
                          <label class="col-sm-3 control-label" for="input-paypalid">
                            {{ text_otherpayment }}
                          </label>
                          <div class="col-sm-9">
                          <textarea data-placeholder="{{ text_bankinfo }}" class="form-control"
                                    name="otherpayment">{{ partner['otherpayment'] }}</textarea>
                          </div>
                        </div>
                      {% endif %}
                      {% if allowed['taxinfo'] is defined %}
                        <div class="form-group">
                          <label class="col-sm-3 control-label" for="input-paypalid">
                            {{ text_taxinfo }}
                          </label>
                          <div class="col-sm-9">
                          <textarea data-placeholder="{{ text_taxinfo }}" class="form-control"
                                    name="taxinfo">{{ partner['taxinfo'] }}</textarea>
                          </div>
                        </div>
                      {% endif %}
                    </div>
                  {% endif %}
                </div>
              {% else %}
                <div class="text-danger">
                  {{ error_warning_authenticate }}
                </div>
              {% endif %}
              <div class="return-warranty col-sm-12">
                <span class="dscription">Return & Warranty:&nbsp;&nbsp;</span>Standard Marketplace Return & Warranty Policies will not be shown on the Seller's information page. The Seller's customized Return & Warranty Policy will be applied.
              </div>
              <div class="return-policy col-sm-12 col-md-12">
                <div class="return-title">Return Policy (Marketplace RMA guidelines must be followed for processing all return requests)</div>
                <div>
                  <div class="return-policy-title">
                      Unshipped Items Return Policy
                  </div>
                  <div class="refund-policy">
                    <div id="unshippedPolicy">
                      <input type="radio"  name="allow_return" value="1" class="choice" {% if return_warranty.return.undelivered.allow_return ==1 %}checked{% endif %}>
                      <label for="contactChoice1">
                          <input type="text" name="rate" value="{{ return_warranty.return.undelivered.rate }}"  class="input-line end-num"  id="endNum" autocomplete=“off”>% restocking fee will be charged for unshipped item returns without valid reason within
                          <input type="text" name="days" value="{{ return_warranty.return.undelivered.days }}"  class="input-line end-time" id="endTime" autocomplete=“off”>days of the original order being processed. 
                      </label>
                    </div>
                    <div>
                      <input type="radio"  name="allow_return" value="0" {% if return_warranty.return.undelivered.allow_return ==0 %}checked{% endif %} class="input-line">
                      <label for="contactChoice1">Sellers do not accept return requests for unshipped items.</label>
                    </div>
                  </div>
                </div>
                <div>
                  <div class="return-policy-title">
                      Shipped Items Return Policy
                  </div>
                  <div class="refund-policy">
                    <div>
                      <label >
                          <input type="radio" name="" checked>
                          For quality or logistics issues, the Buyer can request a refund or reshipment within
                        <input type="text" name="before_days" value="{{ return_warranty.return.delivered.before_days }}" class="input-line end-time"  onchange="getrmb()" id="day-before" autocomplete=“off”>days after the end customer has received the item. The reshipment fee will be borne by the Seller.</label>
                    </div>
                    <div>
                      <p><input type="checkbox" name="delivered_checked" value="1" {% if return_warranty.return.delivered.delivered_checked ==1 %} checked {% endif %}  class="check-btn"/>&nbsp;After
                        <input  name="after_days" id="day-after" value="{{ return_warranty.return.delivered.after_days }}" class="input-line end-time" disabled>
                          days have passed since the end customer recieved their order, RMA requests will no longer be accepted aside from quality or logistics related issues.
                      </p>
                    </div>
                  </div>
                </div>
                <div>
                  <div class="return-title policy-h">Warranty Policy (Marketplace RMA guidelines must be followed during after-sales services)</div>
                  <div class="return-policy-content1">
                    <div class="refund-policy">Beginning from the date of delivery, purchased products include a
                      <input id="warrantyMonth" type="text" name="month" value="{{ return_warranty.warranty.month }}" class="input-line end-time" autocomplete=“off”>
                        month warranty.In the event of manufacturing defects, the Buyer can request a refund, partial reshipment or full reshipment within the warranty period.
                    </div>
                    <div class="refund-policy scenes">Please note that the warranty policy does not apply to the following situations:</div>
                    <div class="refund-policy">
                      <ul id="ul" class="refund-policy-ul">
                        <li>Damage resulting from negligence, abuse, normal wear and tear or natural disaster and accidents, including but not limited to: burns, cuts, tears abrasions, scratches, watermarks, indentation or pet damage.</li>
                        <li>Damage resulting from unauthorized modifications, except with written approval from Seller</li>
                        <li>Products not purchased through the Giga Cloud Marketplace</li>
                        <li>Products with their own individual warranty policy</li>
                        {% if return_warranty.warranty.conditions %}
                          {% for condition in return_warranty.warranty.conditions %}
                            {% if condition != '' %}
                            <li class="action-self">
                              <input class="newadd" type="text" name="conditions[]" value="{{ condition }}"
                                     placeholder="Add more situations for approval. The new situations will be effective after being approved by Marketplace" autocomplete="off" onkeyup="changeText(this)">
                              <i onclick="add(this)" class="el-icon-circle-plus-outline icon first-icon icon  new-add"></i>
                              <i onclick="del(this)" class="el-icon-remove-outline icon remove icon"></i>
                            </li>
                            {% endif %}
                          {% endfor %}
                        {% endif %}
                        <li class="action-self">
                          <input class="newadd" type="text" name="conditions[]"  placeholder="Add more situations for approval. The new situations will be effective after being approved by Marketplace" autocomplete="off" onkeyup="changeText(this)">
                          <i onclick="add(this)" class="el-icon-circle-plus-outline icon new-add"></i>
                          <i onclick="del(this)" class="el-icon-remove-outline icon remove icon"></i>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              <input name="delete_avatar" value="0" type="hidden">
              <input name="delete_companybanner" value="0" type="hidden">
              <button type="button" id="updateBtn" form="form-profile" data-toggle="tooltip" title="{{ button_continue }}"
                      class="btn btn-primary" style="float: right;margin: 20px">
                UPDATE
              </button>
            </form>
          </div>

{#          <button type="button" id="myButton update" data-loading-text="Loading..." class="btn btn-primary"#}
{#                  autocomplete="off" style="margin-left: 90%;">#}
{#            UPDATE#}
{#          </button>#}
        {% else %}
          <div class="alert alert-danger">
            <i class="fa fa-exclamation-circle"></i>
            {{ warning_become_seller }}
            <button type="button" class="close" data-dismiss="alert">×</button>
          </div>
        {% endif %}
        {{ content_bottom }}</div>
      {{ column_right }}</div>
  </div>
  <script src="catalog/view/javascript/wk_common.js"></script>
  <script src="admin/view/javascript/color-picker/js/bootstrap-colorpicker.min.js"></script>
  <link href="admin/view/javascript/color-picker/css/bootstrap-colorpicker.min.css" rel="stylesheet">
  <script>
      $(function () {
          init()
      });

      function init() {
          $("#country").change(function () {
              var scr = 'image/flags/' + $(this).val().toLowerCase() + '.png';
              $('.wk_countrylogo').attr('src', scr)
              $('#countryLogo').val(scr);
          });
          $('.bgcolorpicker').colorpicker({'format': 'hex'});

          $('[data-toggle=uploadImg] input[type=file]').change(function () {
              var _this = this;
              var newsrc = getObjectURL(_this.files[0]);
              var reader = new FileReader();
              reader.onload = function (theFile) {
                  var image = new Image();
                  image.onload = function () {
                      $(_this).parent().find('img').attr("src", newsrc);
                      var elem_name = $(_this).parent().attr('data-name');
                      $('[name=delete_' + elem_name + ']').val(0);
                  };
                  image.src = theFile.target.result;
              }
              reader.readAsDataURL(_this.files[0]);
          });
          $('.end-time').blur(function(){
            if ($(this).val() > 999 || $(this).val() < 1) {
              layer.msg('please enter an integer from 1 to 999!', {time: 1500});
              $(this).addClass("warn-line")
            }
          });
          $('.end-num').blur(function(){
            if ($(this).val() > 100 || $(this).val() < 1) {
              layer.msg('please enter an integer from 1 to 100!', {time: 1500});
              $(this).addClass("warn-line")
             }
          });
        $('.end-time').bind("input propertychange",function(event)
        {
          if (0<$(this).val() <1000) {
                $(this).removeClass("warn-line")
              }
        })
        $('.end-num').bind("input propertychange",function(event)
        {
          if (0<$(this).val() <100) {
                $(this).removeClass("warn-line")
          }
        })
          $('.input-line').on("input",function(e){
            e.target.value = e.target.value.replace(/^(0+)|[^\d]+/g,"")
          })
        // 初始化 判断退返品政策自定义条数不能超过五条, 并且第一条禁止删除，最后一条非第五个有加号
        var $actionLi = $(".refund-policy-ul li.action-self");
        $actionLi.each(function(index, one){
          if (index === 0) {
            $(one).find('i.remove').hide();
          }
          if (index > 4) {
            $(one).remove();
          }
        })

        $('#updateBtn').on('click', function(){
          // 先验证
          if (toVaild()) {
            $('#form-profile').submit();
          }
        })
      }

      function getObjectURL(file) {
          var url = null;
          if (window.createObjectURL != undefined) {
              url = window.createObjectURL(file);
          } else if (window.URL != undefined) {
              url = window.URL.createObjectURL(file);
          } else if (window.webkitURL != undefined) {
              url = window.webkitURL.createObjectURL(file);
          }
          return url;
      }

      $('[data-toggle=uploadImg]').on('click', function (e) {
          var $element = $(this);
          var $popover = $element.data('bs.popover');

          $('[data-toggle="uploadImg"]').popover('destroy');
          if ($popover) {
              return;
          }

          $element.popover({
              html: true,
              placement: 'right',
              trigger: 'manual',
              content: function () {
                  return '<button type="button" id="button-img-edit" class="btn btn-primary"><i class="fa fa-pencil"></i></button>' + '<button type="button" id="button-img-clear" class="btn btn-danger"><i class="fa fa-trash-o"></i></button>';
              }
          });

          $element.popover('show');
          $('#button-img-edit').on('click', function () {
              $element.popover('destroy');
              $element.find('input').click();
          });

          $('#button-img-clear').on('click', function () {
              var elem_name = $element.attr('data-name');
              $('[name=delete_' + elem_name + ']').val(1);
              $element.find('img').attr('src', $element.find('img').attr('data-placeholder'));
              $element.find('input').val('');
              $element.popover('destroy');
          });
      });
      function add(a) {
        $(".refund-policy-ul li:last-child").find('.new-add').hide();
        $(a).parent().after('<li class="action-self"><input class="newadd" type="text" name="conditions[]" placeholder="Add more situations for approval. The new situations will be effective after being approved by Marketplace" autocomplete=“off”> <i onclick="add(this)" class="el-icon-circle-plus-outline icon new-add"></i> <i onclick="del(this)" class="el-icon-remove-outline icon remove icon"></li>')
        $(".refund-policy-ul li:last-child").find('.new-add').show();
        $(".refund-policy-ul li:nth-child(n+9)").find('.new-add').hide();
      }

      function del(a) {
        $(a).parent().remove()
        $(".refund-policy-ul li:last-child").find('.new-add').show();
      }

      function getrmb(){
        var num1 = document.getElementById('day-before').value; //获取第一个输入框的值
        document.getElementById('day-after').value = num1;
      }

      function toVaild(){
        var result = true;
        $('.end-time').each(function(){
          if ($(this).val() > 999 || $(this).val() < 1) {
              result = false;
          }
        })
        $('.end-num').each(function(){
          if ($(this).val() > 100 || $(this).val() < 1) {
            result = false;
          }
        })
        if (!result) {
          layer.msg('please enter an integer from 1 to 999!', {time: 1500});
        }
        return result;
      }

      function changeText(obj) {
        //获取输入内容
        var userDesc = $(obj).val();
        var calcReturn = calcStringLength(userDesc.trim());
        $(obj).val(calcReturn.fullStr)
      }
      // 校验字符长度，中文和日本算两个字符
      function calcStringLength(str) {
        var len = 0;
        var charCode = -1;
        var fullStr = '';
        if (!str || !str.length) {
          return { 'len': len, 'fullStr': fullStr };;
        }
        for (var i = 0; i < str.length; i++) {
          charCode = str.charCodeAt(i);
          if (charCode >= 2048 && charCode <= 40869) {
            len += 2;
          } else {
            len++;
          }
          if (len <= 400) {
            fullStr += str[i];
          }
        }
        return { 'len': len, 'fullStr': fullStr };
      }

  </script>


  <script>
    let logo_url = '{{ logo_url }}';
    let banner_url = '{{ banner_url }}';
    let vm_4396 = new Vue({
      el: '#app_form',
      data: function () {
        return {
          logo: [],
          logo_file_ids: '',
          banner: [],
          banner_file_ids: [],
        }
      },
      mounted: function () {
        let _this = this;
        axios.get(logo_url).then(function (res) {
          _this.logo = res.data
          _this.logo_file_ids = _this.logo.map((val) => {
            return val.orig_url;
          })
        })
        axios.get(banner_url).then(function (res) {
          _this.banner = res.data
          _this.banner_file_ids = _this.banner.map((val) => {
            return val.orig_url;
          })
        })
      },
      methods: {
        handlerOnConfirmLogo: function () {
          let _this = this;
          _this.logo = _this.$refs['upload_logo'].getFileList().slice(0,1);
          _this.logo_file_ids = _this.logo.map((val) => {
            return val.orig_url;
          })
          if (_this.logo_file_ids.length == 0) {
            $('.avatar .el-upload--picture-card').css("cssText", "display:inline-block !important;");
          } else {
            $('.avatar .el-upload--picture-card').css("cssText", "display:none !important;");
          }
        },
        handlerOnConfirmBanner: function () {
          let _this = this;
          _this.banner = _this.$refs['upload_banner'].getFileList().slice(0,1);
          _this.banner_file_ids = _this.banner.map((val) => {
            return val.orig_url;
          })
          if(_this.banner_file_ids.length==0){
            $('.companybanner .el-upload--picture-card').css("cssText", "display:inline-block !important;");
          }else{
            $('.companybanner .el-upload--picture-card').css("cssText", "display:none !important;");
          }
        },
      }
    });
  </script>
  <style type="text/css">

  </style>
  {{ footer }}
