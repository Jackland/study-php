<script src="catalog/view/javascript/jquery/jquery-2.1.1.min.js" type="text/javascript"></script>
<link href="catalog/view/javascript/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen"/>
<script src="catalog/view/javascript/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<link href="catalog/view/javascript/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
<link href="catalog/view/theme/yzcTheme/stylesheet/font_demo/iconfont.css" rel="stylesheet" type="text/css"/>
<link href="//fonts.googleapis.com/css?family=Open+Sans:400,400i,300,700" rel="stylesheet" type="text/css"/>
<link type="text/css" href="/public/fonts/giga/iconfont.css?v={{ app_version }}" rel="stylesheet">{#B2B页面改版 图标字体#}
<link href="catalog/view/theme/yzcTheme/stylesheet/stylesheet.css?v={{ app_version }}" rel="stylesheet">
<link href="public/css/common/common.css?v={{ app_version }}" rel="stylesheet">
<link href="catalog/view/theme/yzcTheme/stylesheet/app.css?v={{ app_version }}" rel="stylesheet">
<link rel="icon" href="data:;base64,=">

<link href="catalog/view/javascript/diyUpload/file_upload/css/iconfont.css" rel="stylesheet" type="text/css"/>
<link href="catalog/view/javascript/diyUpload/file_upload/css/fileUpload.css" rel="stylesheet" type="text/css">
<link href="public/css/buyer/account/corderImportEuropeWayfair.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="catalog/view/javascript/diyUpload/file_upload/js/fileUploadWalmart.js"></script>
<form enctype="multipart/form-data" id="form-upload">
  <div class="modal-body">
    <div id="column1">
      <i class="fa fa-info-circle text-warning" style=" color: #fa6400;"></i>User Notice
      <a class="btn " role="button" data-toggle="collapse" href="#collapseExample" aria-expanded="false"
         aria-controls="collapseExample">
        <i class="fa fa-angle-double-down"></i>
      </a>
      <div class="collapse" id="collapseExample">
        <div class="well">
          <ul>
            <li>If the product is a combo product, please upload the shipping label for each sub-item and fill in the
              corresponding tracking numbers.
            </li>
            <li>Before submitting, please make sure the tracking number and Order ID are consistent with those in
              preview picture of uploaded Label.
            </li>
            <li>If you don't upload Manifest, the order status will still be Check Label which means it cannot be purchased or shipped</li>
            <li class="text-danger">If your third-party selling platform (Wayfair) provides you with the commercial invoices,
              please download them and upload them to the designated area on the Marketplace.
              You shall bear the corresponding consequences if delayed logistics information is caused by
              the failure to upload the commercial invoices in time or the mistake of uploading the wrong commercial invoices.</li>
          </ul>
        </div>
      </div>
    </div>
    <div id="column2">
      {% for order in upload_file_info %}
      <div class="order">
        <div class="content">
          <div style="float: left;width: 100%;background: #E2EAFA;padding: 0 5px">
            <div class="flex-start col-sm-5">
              <input type="hidden" id="order_id" name='order_id' value={{ order.id }}>
              <span class="name mr20">Sales Order ID:</span>
              <span class="order_value">{{ order.order_id }}</span>
              <span id="{{ order.id }}_span" class="order_value">({{ order.total_file_amount }}/{{ order.total_file_amount }})</span>
            </div>
            <div class="col-sm-7 flex-layout" style="line-height: 40px">
              <div>Manifest:</div>
              <div class="text-ellipsis">
                <a class="pointer link" onclick="getManifestPdf(this)" mean="{{ order.deal_file_path }}">{{ order.file_name }}</a>
              </div>
            </div>
          </div>
          {% for children in order.childrenList %}
            {% if not children.is_combo %}
              <div class="list">
                <div class="item">
                  <div style="margin-left: 40px">
                    <div class="col-sm-3 flex-start">
                      <span class="name mr20">{{ text_item_code }}:</span>
                      <span class="value ">{{ children.item_code }}</span>
                    </div>
                    <div class="col-sm-1 flex-start">
                      <span class="name mr20">{{ text_qty }}: </span>
                      <span class="value ">{{ children.qty }}</span>
                    </div>
                    <div class="col-sm-2 flex-start">
                      <span class="name mr20">Weight:</span>
                      <span class="value ">{{ (children['weight']*0.4535924)|number_format(2, '.', '') }} kg</span>
                    </div>
                    <div class="col-sm-4 flex-start">
                      <span class="name mr20">{{ text_ship_method }}: </span>
                      <span class="value " title="{{ children.ship_method_code }}">{{ children.ship_method_code }}</span>
                    </div>
                  </div>
                </div>
                {% set k = 1 %}
                {% for detail in children.combo_info %}
                  <div class="detail flex-start">
                    <div class="num">{{ k }}</div>
                    <div class="upload-file-content">
                      <div class="la name mr20"> Shipping Label:</div>
                      <div class="text-ellipsis" style="width:35%;" id="{{ detail.container_id }}_pdf_show">
                        <a class="link pointer text-ellipsis label-file" onclick="getCommonLabelPdf(this)"
                           mean="{{ detail.deal_file_path }}">{{ detail.file_name }}</a>
                      </div>
                    </div>
                    <p class="flex-start"><span class="name mr20">Tracking Number:</span>
                      <span id="{{ detail.container_id }}_tracking_number_show"
                            name="{{ detail.container_id }}_tracking_number_show"
                            class="value track-val">{{ detail.tracking_id }}
                      </span>
                    </p>
                    {% if home_pick_commercial_invoice %}
                      <div class="upload-file-content">
                      <div class="la name mr20"> Commercial Invoice:</div>
                      <div class="text-ellipsis" style="width:35%;" id="{{ detail.container_id }}_invoice_pdf_show">
                        <a class="link pointer text-ellipsis invoice-file" onclick="getCommonLabelPdf(this)"
                           mean="{{ detail.commercial_invoice_file_path }}">{{ detail.commercial_invoice_file_name }}</a>
                      </div>
                    </div>
                    {% endif %}
                  </div>
                  <div class="img_show flex-layout" id="{{ detail.container_id }}_show">
                    <div class="name ml-2 mr-octal1">Preview:</div>
                    <div class="orderId-img flex1">
                      <span style="float: left;overflow: hidden" class="name"> Order ID: </span>
                      <img src="{{ detail.order_id_img }}" style="height:25px;margin-left: 2%;margin-top:10px;width: 30%">
                    </div>
                    <div class="name weight-img flex1">
                      <span style="float: left;overflow: hidden"> Weight: </span>
                      <img src="{{ detail.weight_img }}" style="height:25px;margin-left: 2%;width: 40%">
                    </div>
                    <div class="name trackNum-img flex1">
                      <span style="color:#938593;float: left;overflow: hidden"> Tracking Number:</span>
                      <img src="{{ detail.tracking_number_img }}" style="height:25px;margin-left: 2%;width: 40%;">
                    </div>
                  </div>
                  {% set k = k + 1 %}
                {% endfor %}
              </div>
            {% else %}
              <div class="list">
                <div class="item">
                  <div style="width: 40px;float: left;height: 1px"></div>
                  <div>
                    <div class="col-sm-3 flex-start">
                      <span class="name mr20">{{ text_item_code }}:</span>
                      <span class="value ">{{ children.item_code }}
                        {{ image_icon_url }}
                      </span>
                    </div>
                    <div class="col-sm-1 flex-start">
                      <span class="name mr20">{{ text_qty }}:</span>
                      <span class="value ">{{ children.qty }}</span>
                    </div>
                    <div class="col-sm-6 flex-start">
                      <span class="name mr20">{{ text_ship_method }}:</span>
                      <span class="value " title="{{ children.ship_method_code }}">{{ children.ship_method_code }}</span>
                    </div>
                    <div class="col-sm-2"></div>
                  </div>
                </div>
              </div>
              {% for detail in children.combo_info %}
                <div class="list">
                  <div class="item">
                    <div style="margin-left: 40px">
                      <div class="col-sm-3 flex-start">
                        <span class="name mr20">{{ text_subitem_code }}:</span>
                        <span class="value ">{{ detail.sku }}</span></div>
                      <div class="col-sm-1 flex-start">
                        <span class="name mr20">QTY:</span>
                        <span class="value ">{{ detail.qty }}</span>
                      </div>
                      <div class="col-sm-2 flex-start">
                        <span class="name mr20">Weight:</span>
                        <span class="value ">{{ (detail['weight']*0.4535924)|number_format(2, '.', '') }} kg</span>
                      </div>
                      <div class="col-sm-2"></div>
                    </div>
                  </div>
                  {% set k = 1 %}
                  {% for line in detail.line %}
                    <div class="detail flex-start">
                      <div class="num">{{ k }}</div>
                      <div class="upload-file-content">
                        <div class="la name mr20"> Shipping Label:</div>
                        <div class="text-ellipsis" style="width:35%;" id="{{ line.container_id }}_pdf_show">
                          <a  class="pointer link label-file" onclick="getCommonLabelPdf(this)"
                              mean="{{ line.deal_file_path }}">{{ line.file_name }}</a>
                        </div>
                      </div>
                      <p class="flex-start"><span class="name mr20">Tracking Number:</span>
                        <span id="{{ line.container_id }}_tracking_number"
                              name="{{ line.container_id }}_tracking_number"
                              class="value track-val">{{ line.tracking_id }}
                        </span>
                      </p>
                      {% if home_pick_commercial_invoice %}
                        <div class="upload-file-content">
                        <div class="la name mr20"> Commercial Invoice:</div>
                        <div class="text-ellipsis" style="width:35%;" id="{{ line.container_id }}_invoice_pdf_show">
                          <a class="link pointer text-ellipsis invoice-file" onclick="getCommonLabelPdf(this)"
                             mean="{{ line.commercial_invoice_file_path }}">{{ line.commercial_invoice_file_name }}</a>
                        </div>
                      </div>
                      {% endif %}
                    </div>

                    <div class="img_show flex-layout" id="{{ line.container_id }}_show">
                      <div class="name ml-2 mr-octal1">Preview:</div>
                      <div class="orderId-img flex1">
                        <span style="float: left;overflow: hidden" class="name"> Order ID: </span>
                        <img src="{{ line.order_id_img }}" style="height:25px;margin-left: 2%;margin-top:10px;width: 30%">
                      </div>
                      <div class="name weight-img flex1">
                        <span style="float: left;overflow: hidden"> Weight: </span>
                        <img src="{{ line.weight_img }}" style="height:25px;margin-left: 2%;width: 40%">
                      </div>
                      <div class="name trackNum-img flex1">
                        <span style="color:#938593;float: left;overflow: hidden"> Tracking Number:</span>
                        <img src="{{ line.tracking_number_img }}" style="height:25px;margin-left: 2%;width: 40%;">
                      </div>
                    </div>
                    {% set k = k + 1 %}
                  {% endfor %}
                </div>
              {% endfor %}
            {% endif %}
          {% endfor %}

        </div>
        {% endfor %}
      </div>
    </div>
</form>
<script>
  $("[data-toggle='tooltip']").tooltip();
  function getManifestPdf(obj) {
    var url = $(obj).attr('mean');
    var upload_info = 'Bol Label';
    parent.layer.open({
      type: 2,
      offset: ['150px', '380px'],
      area: ['700px', '400px'],
      title: upload_info,
      fixed: false, //不固定Change
      maxmin: true,
      skin: 'yzc_layer',
      scrollbar: false,
      content: url,
    });
  }
  function getCommonLabelPdf(obj) {
    var url = $(obj).attr('mean');
    if ($(obj).hasClass('invoice-file')){
      var upload_info = 'Commercial Invoice';
    }else{
      var upload_info = 'Common Label';
    }
    parent.layer.open({
      type: 2,
      offset: ['150px', '380px'],
      area: ['700px', '400px'],
      title: upload_info,
      fixed: false, //不固定Change
      maxmin: true,
      skin: 'yzc_layer',
      scrollbar: false,
      content: url,

    });
  }

</script>

