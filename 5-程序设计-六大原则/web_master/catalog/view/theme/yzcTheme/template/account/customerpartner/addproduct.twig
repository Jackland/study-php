{{ header }}{{ separate_column_left }}
{% if chkIsPartner %}
  {% if separate_view is defined and separate_view %}
    <div class="container-fluid" id="content" style="margin-left: 18%">
  {% else %}
    <div class="container">
  {% endif %}
  <ul class="breadcrumb">
    {% for breadcrumb in breadcrumbs %}
      <li>
        <a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a>
      </li>
    {% endfor %}
  </ul>
  {#{% if error_warning %}#}
  {#<div class="alert alert-danger">#}
  {#<i class="fa fa-exclamation-circle"></i>{{ error_warning}}</div>#}
  {#{% endif %}#}
  {#<div class="alert alert-danger" id="warning-title" style="display: none">#}
  {#<i class="fa fa-exclamation-circle"></i>{{ error_warning}}</div>#}
  {#</div>#}

  {% if marketplace_product_reapprove %}
    <div class="alert alert-info">
      <i class="fa fa-info-circle"></i>
      {{ marketplace_product_reapprove }}
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
  {% endif %}
  {% if success %}
    <div class="alert alert-success">
      <i class="fa fa-check-circle"></i>
      {{ success }}</div>
  {% endif %}

  <div class="row">{{ column_left }}
    {% if column_left and column_right %}
      {% set class = 'col-sm-6' %}
    {% elseif column_left or column_right %}
      {% set class = 'col-sm-9' %}
    {% else %}
      {% set class = 'col-sm-12' %}
    {% endif %}

    <div id="content" class="{{ class }}">{{ content_top }}
      <h1>
        {{ is_add?heading_title_add_product:heading_title_edit_product }}
        <div class="pull-right">
          {#<a  data-target="#myModal-upload-product" data-toggle="modal" title="upload" id="upload"  class="btn" style="font-size: 18px">#}
          {#<i class="fa fa-cloud-upload"></i>#}
          {#</a>#}
          {#<a onclick="$('#form-save').submit();" data-toggle="tooltip" class="btn {{ product_id ? 'btn-info' : 'btn-success'}}" title="{{ button_continue}}" id="submit">#}
          <a data-toggle="tooltip" class="btn {{ product_id ? 'btn-info' : 'btn-success' }}"
             title="{{ button_continue }}" id="submit">
            <i class="fa fa-save"></i>
          </a>
          <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_back }}" class="btn btn-default"
             data-original-title="Cancel">
            <i class="fa fa-reply"></i>
          </a>
        </div>
      </h1>

        <legend>
          {#<i class="fa fa-pencil"></i>#}
          {#{{ is_add?heading_title_add_product:heading_title_edit_product }}#}
        </legend>

      {% if access_error is not defined and isMember %}
      <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-save" class="form-horizontal">
        {% if module_wk_seller_group_status is defined and module_wk_seller_group_status %}
          <input type="hidden" value="{% if isClone is defined and isClone %}{{ isClone }}{% endif %}" name="clone">
          <input type="hidden" value="{% if isRelist is defined and isRelist %}{{ isRelist }}{% endif %}" name="relist">
          <input type="hidden" value="{% if isEdit is defined and isEdit %}{{ isEdit }}{% endif %}" name="edit">
        {% endif %}
        <!-- membership codes ends here -->
        <ul class="nav nav-tabs">
          <li class="active">
            <a href="#tab-general" data-toggle="tab">{{ tab_general }}</a>
          </li>
          {#<li>#}
          {#<a href="#tab-data" data-toggle="tab">{{ tab_data}}</a>#}
          {#</li>#}

          {% if mp_allowproducttabs['links']is defined %}
            <li>
              <a href="#tab-links" data-toggle="tab">{{ tab_links }}</a>
            </li>
          {% endif %}

          {% if mp_allowproducttabs['images']is defined %}
            <li>
              <a href="#tab-image" data-toggle="tab"><span data-toggle="tooltip" title="{{ help_main_pic }}">{{ tab_image }}<i class="giga icon-V10-wenhaotishi"></i></span></a>
            </li>
          {% endif %}
          <li>
            <a href="#tab-material-package" data-toggle="tab">Material Package</a>
          </li>
        </ul>

        <div class="tab-content">
          <div class="tab-pane active" id="tab-general">

            <div class="tab-content">
              {% set count = 0 %}
              {% for language in languages %}
                <div class="tab-pane {% if count == 0 %}{{ 'active' }}{% endif %}
                    {% set count = count + 1 %}" id="language{{ language['language_id'] }}">
                  <div class="form-group required">
                    <label class="col-sm-3 control-label" for="input-status">Status</label>
                    <div class="col-sm-7" style="width: 65%">
                      <select name="status1" id="input-tax-class" class="form-control">
                        {% for key,value in product_status %}
                          {% set selected = '' %}
                          {% if key == status %}
                            {% set selected = 'selected' %}
                          {% endif %}
                          <option value="{{ key }}" {{ selected }}>{{ value }}</option>
                        {% endfor %}
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="input-product_group">Product Group</label>
                    <div class="col-sm-7" style="width: 65%">
                      <select name="product_group" multiple id="input-product_group" class="form-control selectpicker">
                          {% if product_groups  %}
                              {% for product_group in product_groups %}
                                  <option value="{{ product_group.id }}">{{ product_group.name }}</option>
                              {% endfor %}
                          {% endif %}
                      </select>
                    </div>
                  </div>
                  <div class="form-group required">
                    <label class="col-sm-3 control-label" for="input-allowed-buy">
                      <span title="Can be sold separately?"> {{ column_sold_separate }}</span>
                    </label>
                    <div class="col-sm-7" style="width: 65%">
                      <select name="allowedBuy" id="input-tax-class" class="form-control">
                        {% if allowedBuy ==0 %}
                          <option value="1">Yes</option>
                          <option value="0" selected>No</option>
                        {% else %}
                          <option value="1" selected>Yes</option>
                          <option value="0">No</option>
                        {% endif %}
                      </select>
                    </div>
                  </div>
                  <div class="form-group required">
                    <label class="col-sm-3 control-label" for="input-mpn" id="mpnLabel">
                      {{ entry_mpn }}
                    </label>
                    <div class="col-sm-7" style="width: 65%" id="mpn-div">
                      {% if Edit %}
                        <input type="text" name="mpn" value="{{ mpn }}" placeholder="{{ entry_mpn }}" id="input-mpn"
                               class="form-control" onblur="backfillSku(this)" readonly="readonly"/>
                      {% else %}
                        <input type="text" name="mpn" value="{{ mpn }}" placeholder="{{ entry_mpn }}" id="input-mpn"
                               class="form-control" onblur="backfillSku(this)"/>
                      {% endif %}
                      {#{% if error_name[language['language_id']]is defined %}#}
                      <div style="display: none" id="mpn-error">{{ error_mpn }}</div>
                      {#{% endif %}#}
                    </div>
                    {% if Edit %}
                      {% if comboFlag == '1' %}
                        <input type="checkbox" onclick="return false" name="comboFlag" checked
                               id="combo-flag">Combo Item
                      {% endif %}
                      {% if partFlag == '1' %}
                        <input type="checkbox" onclick="return false" name="partFlag" checked id="part-flag">Part Item
                      {% endif %}
                    {% else %}
                      <input type="checkbox" onclick="showComboDetail(this)" name="comboFlag" id="combo-flag">Combo Item
                      <br>
                      <input type="checkbox" onclick="showPartDetail(this)" name="partFlag" id="part-flag">Part Item
                    {% endif %}
                  </div>
                  <div class="form-group">
                    <label class="col-sm-3 control-label" for="input-sku">
                      Item Code
                    </label>
                    <div class="col-sm-7" style="width: 65%">
                      <input type="text" name="sku" value="{{ sku }}" placeholder="Item Code" id="input-sku"
                             class="form-control" readonly="readonly"/>
                    </div>
                  </div>
                  <div class="form-group required">
                    <label class="col-sm-3 control-label"
                           for="input-name{{ language['language_id'] }}">{{ entry_name }}</label>
                    <div class="col-sm-7" style="width: 65%">
                      <input
                        type="text"
                        class="form-control"
                        name="product_description[{{ language['language_id'] }}][name]"
                        value="{{ product_description[language['language_id']] ? product_description[language['language_id']]['name'] : '' }}"
                        placeholder="{{ entry_name }}"
                        id="input-name{{ language['language_id'] }}"/>
                      {#{% if error_name[language['language_id']]is defined %}#}
                      <div id="name-error" style="display: none">{{ error__product_name }}</div>
                      {#{% endif %}#}
                    </div>
                  </div>
                  {#combo#}
                  {% if comboFlag == '1' %}
                    {% if comboInfos %}
                      {% for combo in comboInfos %}
                        {% if loop.index ==1 %}
                          <div class="form-group" id="comboDetails{{ loop.index }}" name="comboDetails">
                            <label class="col-sm-3 control-label" for="input-weight">
                               <span title="
①MPN in Combo must be entered.
②Quantity: the number of sub-MPNs that are combined into a Combo.
③The check box for MPN in Combo is checked. Sub-MPN can be sold separately.
④The check box for MPN in Combo is not checked. Sub-MPN cannot be sold separately.">Combo MPN Details</span>
                            </label>
                            <div class="col-sm-7" style="width: 65%">
                              <div class="row" style="display: flex;padding-left: 15px;padding-right: 15px">
                                <input type="text" name="combo[{{ loop.index }}][mpn]" value="{{ combo.set_mpn }}"
                                       placeholder="MPN in Combo" id="input-mpn-{{ loop.index }}" class="form-control"
                                       style="width: 20%" onblur="checkMPN(this)"/>
                                <input type="text" name="combo[{{ loop.index }}][quantity]" value="{{ combo.qty }}"
                                       placeholder="Quantity" id="input-quantity-{{ loop.index }}" class="form-control"
                                       onkeyup="qty(this)" style="width: 15%;margin-left: 1%"/>
                                <input type="text" name="combo[{{ loop.index }}][length]" value="{{ combo.length }}"
                                       placeholder="Length" id="input-length-{{ loop.index }}" class="form-control"
                                       onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>
                                <input type="text" name="combo[{{ loop.index }}][width]" value="{{ combo.width }}"
                                       placeholder="Width" id="input-width-{{ loop.index }}" class="form-control"
                                       onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>
                                <input type="text" name="combo[{{ loop.index }}][height]" value="{{ combo.height }}"
                                       placeholder="height" id="input-height-{{ loop.index }}" class="form-control"
                                       onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>
                                <input type="text" name="combo[{{ loop.index }}][weight]" value="{{ combo.weight }}"
                                       placeholder="Weight" id="input-weight-{{ loop.index }}" class="form-control"
                                       onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>
                              </div>
                            </div>
                            <div>
                              <button type="button" onclick="addComboDetail();" data-toggle="tooltip" title=""
                                      class="btn btn-primary" data-original-title="Add"><i
                                  class="fa fa-plus-circle"></i></button>
                            </div>
                          </div>
                        {% else %}
                          <div class="form-group" id="comboDetails{{ loop.index }}" name="comboDetails">
                            <label class="col-sm-3 control-label" for="input-weight">
                            </label>
                            <div class="col-sm-7" style="width: 65%">
                              <div class="row" style="display: flex;padding-left: 15px;padding-right: 15px">
                                <input type="text" name="combo[{{ loop.index }}][mpn]" value="{{ combo.set_mpn }}"
                                       placeholder="MPN in Combo" id="input-mpn-{{ loop.index }}" class="form-control"
                                       style="width: 20%" onblur="checkMPN(this)"/>
                                <input type="text" name="combo[{{ loop.index }}][quantity]" value="{{ combo.qty }}"
                                       placeholder="Quantity" id="input-quantity-{{ loop.index }}" class="form-control"
                                       onkeyup="qty(this)" style="width: 15%;margin-left: 1%"/>
                                <input type="text" name="combo[{{ loop.index }}][length]" value="{{ combo.length }}"
                                       placeholder="Length" id="input-length-{{ loop.index }}" class="form-control"
                                       onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>
                                <input type="text" name="combo[{{ loop.index }}][width]" value="{{ combo.width }}"
                                       placeholder="Width" id="input-width-{{ loop.index }}" class="form-control"
                                       onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>
                                <input type="text" name="combo[{{ loop.index }}][height]" value="{{ combo.height }}"
                                       placeholder="height" id="input-height-{{ loop.index }}" class="form-control"
                                       onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>
                                <input type="text" name="combo[{{ loop.index }}][weight]" value="{{ combo.weight }}"
                                       placeholder="Weight" id="input-weight-{{ loop.index }}" class="form-control"
                                       onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>
                              </div>
                            </div>
                            <div>
                              <button type="button" onclick="removeComboDetail({{ loop.index }});" data-toggle="tooltip"
                                      title="" class="btn btn-danger" data-original-title="Remove"><i
                                  class="fa fa-minus-circle"></i></button>
                            </div>
                          </div>
                        {% endif %}
                      {% endfor %}
                    {% else %}
                      <div class="form-group" id="comboDetails0" name="comboDetails">
                        <label class="col-sm-3 control-label" for="input-weight">
                               <span title="
①MPN in Combo must be entered.
②Quantity: the number of sub-MPNs that are combined into a Combo.
③The check box for MPN in Combo is checked. Sub-MPN can be sold separately.
④The check box for MPN in Combo is not checked. Sub-MPN cannot be sold separately.">Combo MPN Details</span>
                        </label>
                        <div class="col-sm-7" style="width: 65%">
                          <div class="row" style="display: flex;padding-left: 15px;padding-right: 15px">
                            <input type="text" name="combo[0][mpn]" value="{{ combo.set_mpn }}"
                                   placeholder="MPN in Combo" id="input-mpn-0" class="form-control" style="width: 20%"
                                   onblur="checkMPN(this)"/>
                            <input type="text" name="combo[0][quantity]" value="{{ combo.qty }}" placeholder="Quantity"
                                   id="input-quantity-0" class="form-control" onkeyup="qty(this)"
                                   style="width: 15%;margin-left: 1%"/>
                            <input type="text" name="combo[0][length]" value="{{ combo.length }}" placeholder="Length"
                                   id="input-length-0" class="form-control" onkeyup="num(this)" readonly="readonly"
                                   style="width: 15%;margin-left: 1%"/>
                            <input type="text" name="combo[0][width]" value="{{ combo.width }}" placeholder="Width"
                                   id="input-width-0" class="form-control" onkeyup="num(this)" readonly="readonly"
                                   style="width: 15%;margin-left: 1%"/>
                            <input type="text" name="combo[0][height]" value="{{ combo.height }}" placeholder="height"
                                   id="input-height-0" class="form-control" onkeyup="num(this)" readonly="readonly"
                                   style="width: 15%;margin-left: 1%"/>
                            <input type="text" name="combo[0][weight]" value="{{ combo.weight }}" placeholder="Weight"
                                   id="input-weight-0" class="form-control" onkeyup="num(this)" readonly="readonly"
                                   style="width: 15%;margin-left: 1%"/>
                          </div>
                        </div>
                        <div>
                          <button type="button" onclick="addComboDetail();" data-toggle="tooltip" title=""
                                  class="btn btn-primary" data-original-title="Add"><i class="fa fa-plus-circle"></i>
                          </button>
                        </div>
                      </div>
                    {% endif %}
                  {% else %}
                    <div class="form-group required" id="div-dimensions">
                      <label class="col-sm-3 control-label" for="input-length">
                        <span data-toggle="tooltip" title="{{ help_measurement_unit }}">{{ entry_dimension }}<i class="giga icon-V10-wenhaotishi"></i></span>
                      </label>
                      <div class="col-sm-7" style="width: 65%">
                        {% if Edit %}
                          <div class="row">
                            <div class="col-sm-4">
                              <input type="text" name="length" value="{{ length }}" placeholder="{{ help_length }}"
                                     id="input-length" class="form-control" onkeyup="num(this)" readonly="readonly"/>
                            </div>
                            <div class="col-sm-4">
                              <input type="text" name="width" value="{{ width }}" placeholder="{{ help_width }}"
                                     id="input-width" class="form-control" onkeyup="num(this)" readonly="readonly"/>
                            </div>
                            <div class="col-sm-4">
                              <input type="text" name="height" value="{{ height }}" placeholder="{{ help_height }}"
                                     id="input-height" class="form-control" onkeyup="num(this)" readonly="readonly"/>
                            </div>
                          </div>
                        {% else %}
                          <div class="row">
                            <div class="col-sm-4">
                              <input type="text" name="length" value="{{ length }}" placeholder="{{ help_length }}"
                                     id="input-length" class="form-control" onkeyup="num(this)"/>
                            </div>
                            <div class="col-sm-4">
                              <input type="text" name="width" value="{{ width }}" placeholder="{{ help_width }}"
                                     id="input-width" class="form-control" onkeyup="num(this)"/>
                            </div>
                            <div class="col-sm-4">
                              <input type="text" name="height" value="{{ height }}" placeholder="{{ help_height }}"
                                     id="input-height" class="form-control" onkeyup="num(this)"/>
                            </div>
                          </div>
                        {% endif %}
                        <div id="dimensions-error" style="display: none">{{ error_dimensions }}</div>
                      </div>
                    </div>
                    <div class="form-group required" id="div-weight">
                      <label class="col-sm-3 control-label" for="input-weight">
                        <span data-toggle="tooltip" title="{{ help_weight_unit }}">{{ entry_weight }}<i class="giga icon-V10-wenhaotishi"></i></span>
                      </label>
                      <div class="col-sm-7" style="width: 65%">
                        {% if Edit %}
                          <input type="text" name="weight" value="{{ weight }}" placeholder="{{ help_weight }}"
                                 id="input-weight" class="form-control" onkeyup="num(this)" readonly="readonly"/>
                        {% else %}
                          <input type="text" name="weight" value="{{ weight }}" placeholder="{{ help_weight }}"
                                 id="input-weight" class="form-control" onkeyup="num(this)"/>
                        {% endif %}
                        <div id="weight-error" style="display: none">{{ error_weight }}</div>
                      </div>
                    </div>
                  {% endif %}
                  <div class="form-group" id="div-color" style="display:none">
                    {#<label class="col-sm-3 control-label" for="input-weight">Color</label>#}
                    {#<div class="col-sm-7"style="width: 65%">#}
                    {#<select  name="color" id="input-tax-class" class="form-control">#}
                    {#<option value="">- - NONE - -</option>#}
                    {#{% for colorCate in colors %}#}
                    {#{% if  color  == colorCate.id %}#}
                    {#<option value="{{ colorCate.id }}" selected>{{ colorCate.color }}</option>#}
                    {#{% else %}#}
                    {#<option value="{{ colorCate.id }}">{{ colorCate.color }}</option>#}
                    {#{% endif %}#}
                    {#{% endfor %}#}
                    {#</select>#}
                    {#</div>#}
                  </div>
                  {% set colorName='' %}
                  {% for colorCate in colors %}
                    {% if  color  == colorCate.id %}
                      {% set colorName=colorCate.color %}
                    {% endif %}
                  {% endfor %}
                  <div class="form-group" id="div-color-2">
                    <label class="col-sm-3 control-label" for="input-weight">Color</label>
                    <div class="col-sm-7" style="width: 65%">
                      <input name="color_select" id="input_color_select" value="{{ colorName }}" class="form-control"/>
                      <input name="color" type="hidden" id="input_color_value" value="{{ color }}"
                             class="form-control"/>
                      <span class="help-block" style="display: none">
                           {{ error_color_msg }}
                         </span>
                    </div>
                  </div>
                  <div class="form-group ">
                    <label class="col-sm-3 control-label"
                           for="input-description{{ language['language_id'] }}">{{ entry_description }}</label>
                    <div class="col-sm-7" style="width: 65%">
                      <textarea name="product_description[{{ language['language_id'] }}][description]"
                                placeholder="{{ entry_description }}"
                                id="input-description{{ language['language_id'] }}"
                                class="form-control">{{ product_description[language['language_id']] ? product_description[language['language_id']]['description'] : '' }}</textarea>
                    </div>
                  </div>

                  <div class="form-group required" style="display: none">
                    <label class="col-sm-3 control-label"
                           for="input-meta-description{{ language['language_id'] }}">{{ entry_meta_title }}</label>
                    <div class="col-sm-9">
                      <input
                        type="text"
                        name="product_description[{{ language['language_id'] }}][meta_title]"
                        placeholder="{{ entry_meta_title }}"
                        id="input-meta-description{{ language['language_id'] }}"
                        class="form-control"
                        value="{{ product_description[language['language_id']] ? product_description[language['language_id']]['meta_title'] : '' }}"/>
                      {% if error_meta_title[language['language_id']]is defined %}
                        <div class="text-danger">{{ error_meta_title[language['language_id']] }}</div>
                      {% endif %}
                    </div>
                  </div>

                  <div class="form-group" style="display: none">
                    <label class="col-sm-3 control-label"
                           for="input-meta-description{{ language['language_id'] }}">{{ entry_meta_description }}</label>
                    <div class="col-sm-7" style="width: 65%">
                      <textarea name="product_description[{{ language['language_id'] }}][meta_description]" rows="5"
                                placeholder="{{ entry_meta_description }}"
                                id="input-meta-description{{ language['language_id'] }}"
                                class="form-control">{{ product_description[language['language_id']] ? product_description[language['language_id']]['meta_description'] : '' }}</textarea>
                    </div>
                  </div>
                  <div class="form-group" style="display: none">
                    <label class="col-sm-3 control-label"
                           for="input-meta-keyword{{ language['language_id'] }}">{{ entry_meta_keyword }}</label>
                    <div class="col-sm-7" style="width: 65%">
                      <textarea name="product_description[{{ language['language_id'] }}][meta_keyword]" rows="5"
                                placeholder="{{ entry_meta_keyword }}"
                                id="input-meta-keyword{{ language['language_id'] }}"
                                class="form-control">{{ product_description[language['language_id']] ? product_description[language['language_id']]['meta_keyword'] : '' }}</textarea>
                    </div>
                  </div>
                  <div class="form-group" style="display:none">
                    <label class="col-sm-3 control-label" for="input-tag{{ language['language_id'] }}">
                      <span data-toggle="tooltip" title="{{ help_tag }}">{{ entry_tag }}<i class="giga icon-V10-wenhaotishi"></i></span>
                    </label>
                    <div class="col-sm-7" style="width: 65%">
                      <input
                        class="form-control"
                        type="text"
                        name="product_description[{{ language['language_id'] }}][tag]"
                        value="{{ product_description[language['language_id']] ? product_description[language['language_id']]['tag'] : '' }}"
                        placeholder="{{ entry_tag }}"
                        id="input-tag{{ language['language_id'] }}"/>
                    </div>
                  </div>
                </div>
              {% endfor %}
            </div>
            <!--tab-content-language-->
          </div>

          <div class="tab-pane" id="tab-data" style="display: none">
            <div class="form-group required">
              <label class="col-sm-3 control-label" for="input-model">{{ entry_model }}</label>
              <div class="col-sm-9">
                <input type="text" name="model" value="{{ model }}" placeholder="{{ entry_model }}" id="input-model"
                       class="form-control"/>
                {% if error_model %}
                  <div class="text-danger">{{ error_model }}</div>
                {% endif %}
              </div>
            </div>
            {#{% if mp_allowproductcolumn['sku']is defined %}#}
            {#<div class="form-group">#}
            {#<label class="col-sm-3 control-label" for="input-sku">#}
            {#<span data-toggle="tooltip" title="{{ help_sku}}">{{ entry_sku}}<i class="giga icon-V10-wenhaotishi"></i></span>#}
            {#</label>#}
            {#<div class="col-sm-9">#}
            {#<input type="text" name="sku" value="{{ sku}}" placeholder="{{ entry_sku}}" id="input-sku" class="form-control"/>#}
            {#</div>#}
            {#</div>#}
            {#{% endif %}#}
            {% if mp_allowproductcolumn['upc']is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-upc">
                  <span data-toggle="tooltip" title="{{ help_upc }}">{{ entry_upc }}<i class="giga icon-V10-wenhaotishi"></i></span>
                </label>
                <div class="col-sm-9">
                  <input type="text" name="upc" value="{{ upc }}" placeholder="{{ entry_upc }}" id="input-upc"
                         class="form-control"/>
                </div>
              </div>
            {% endif %}
            {% if mp_allowproductcolumn['ean']is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-ean">
                  <span data-toggle="tooltip" title="{{ help_ean }}">{{ entry_ean }}<i class="giga icon-V10-wenhaotishi"></i></span>
                </label>
                <div class="col-sm-9">
                  <input type="text" name="ean" value="{{ ean }}" placeholder="{{ entry_ean }}" id="input-ean"
                         class="form-control"/>
                </div>
              </div>
            {% endif %}
            {% if mp_allowproductcolumn['jan']is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-jan">
                  <span data-toggle="tooltip" title="{{ help_jan }}">{{ entry_jan }}<i class="giga icon-V10-wenhaotishi"></i></span>
                </label>
                <div class="col-sm-9">
                  <input type="text" name="jan" value="{{ jan }}" placeholder="{{ entry_jan }}" id="input-jan"
                         class="form-control"/>
                </div>
              </div>
            {% endif %}
            {% if mp_allowproductcolumn['isbn']is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-isbn">
                  <span data-toggle="tooltip" title="{{ help_isbn }}">{{ entry_isbn }}<i class="giga icon-V10-wenhaotishi"></i></span>
                </label>
                <div class="col-sm-9">
                  <input type="text" name="isbn" value="{{ isbn }}" placeholder="{{ entry_isbn }}" id="input-isbn"
                         class="form-control"/>
                </div>
              </div>
            {% endif %}
            {#{% if mp_allowproductcolumn['mpn']is defined %}#}
            {#<div class="form-group">#}
            {#<label class="col-sm-3 control-label" for="input-mpn">#}
            {#<span data-toggle="tooltip" title="{{ help_mpn}}">{{ entry_mpn}}<i class="giga icon-V10-wenhaotishi"></i></span>#}
            {#</label>#}
            {#<div class="col-sm-9">#}
            {#<input type="text" name="mpn" value="{{ mpn}}" placeholder="{{ entry_mpn}}" id="input-mpn" class="form-control"/>#}
            {#</div>#}
            {#</div>#}
            {#{% endif %}#}
            {% if mp_allowproductcolumn['location']is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-location">{{ entry_location }}</label>
                <div class="col-sm-9">
                  <input type="text" name="location" value="{{ location }}" placeholder="{{ entry_location }}"
                         id="input-location" class="form-control"/>
                  <input type="hidden" name="prevPrice" value="{{ prevPrice }}"/>
                </div>
              </div>
            {% endif %}
            {% if mp_allowproductcolumn['price']is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-price">{{ entry_price }}</label>
                <div class="col-sm-9">
                  <input type="text" name="price" value="{{ price }}" placeholder="{{ entry_price }}" id="input-price"
                         class="form-control"/>
                  <input type="hidden" name="prevPrice" value="{{ prevPrice }}"/>
                </div>
              </div>
            {% endif %}
            {% if mp_allowproductcolumn['price']is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-price">Price_Display</label>
                <div class="col-sm-9">
                  <select name="price_display" id="input-tax-class" class="form-control">
                    {% if price_display ==1 %}
                      <option value="0">Invisible</option>
                      <option value="1" selected>Visible</option>
                    {% else %}
                      <option value="0" selected>Invisible</option>
                      <option value="1">Visible</option>
                    {% endif %}
                  </select>
                </div>
              </div>
            {% endif %}
            <!-- membership codes starts here -->
            {% if module_wk_seller_group_status %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-expiring-date">{{ entry_expiring_date }}</label>
                <div class="col-sm-9">
                  <input type="text" name="price" value="{{ expiry_date }}" placeholder="{{ entry_expiring_date }}"
                         id="input-expiring-date" class="form-control" disabled/>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-expiring-date">{{ entry_relist_duration }}</label>
                <div class="col-sm-9">
                  <select name="relist_duration" class="form-control" id="input-relist-duration"></select>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-auto-relist">{{ entry_auto_relist }}</label>
                <div class="col-sm-9">
                  <div class="checkbox">
                    <label for="input-auto-relist">
                      <input type="checkbox" name="auto_relist" id="input-auto-relist">
                      {{ entry_auto_relist_lable }}
                    </label>
                  </div>
                </div>
              </div>
            {% endif %}
            <!-- membership codes ends here -->
            {% if mp_allowproductcolumn['tax_class_id']is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-tax-class">{{ entry_tax_class }}</label>
                <div class="col-sm-9">
                  <select name="tax_class_id" id="input-tax-class" class="form-control">
                    <option value="0">{{ text_none }}</option>
                    {% for tax_class in tax_classes %}
                      {% if tax_class['tax_class_id'] == tax_class_id %}
                        <option value="{{ tax_class['tax_class_id'] }}"
                                selected="selected">{{ tax_class['title'] }}</option>
                      {% else %}
                        <option value="{{ tax_class['tax_class_id'] }}">{{ tax_class['title'] }}</option>
                      {% endif %}
                    {% endfor %}
                  </select>
                </div>
              </div>
            {% endif %}
            {% if mp_allowproductcolumn['quantity']is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-quantity">{{ entry_quantity }}</label>
                <div class="col-sm-9">
                  <input type="text" name="quantity" value="{{ quantity }}" placeholder="{{ entry_quantity }}"
                         id="input-quantity" class="form-control"/>

                  <!-- Membership code -->
                  {% if module_wk_seller_group_status is defined and marketplace_account_menu_sequence is defined and 'membership' in marketplace_account_menu_sequence|keys %}
                    <input type="hidden" name="prevQuantity" id="prevQuantity" value="{{ prevQuantity }}"/>
                    <a href="#myModalanswer" id="showerror" role="button" class="hide tfbutton tfbuttonborder asub"
                       data-toggle="modal"></a>
                  {% endif %}
                  <!--  -->
                </div>
              </div>
            {% endif %}
            {% if mp_allowproductcolumn['quantity']is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-price">Quantity_Display</label>
                <div class="col-sm-9">
                  <select name="quantity_display" id="input-tax-class" class="form-control">
                    {% if quantity_display ==1 %}
                      <option value="0">Invisible</option>
                      <option value="1" selected>Visible</option>
                    {% else %}
                      <option value="0" selected>Invisible</option>
                      <option value="1">Visible</option>
                    {% endif %}
                  </select>
                </div>
              </div>
            {% endif %}
            {% if mp_allowproductcolumn['minimum'] is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-minimum"><span data-toggle="tooltip"
                                                                                title="{{ help_minimum }}">{{ entry_minimum }}<i class="giga icon-V10-wenhaotishi"></i></span></label>
                <div class="col-sm-9">
                  <input type="text" name="minimum" value="{{ minimum }}" placeholder="{{ entry_minimum }}"
                         id="input-minimum" class="form-control"/>
                </div>
              </div>
            {% endif %}
            {% if mp_allowproductcolumn['subtract'] is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-subtract">{{ entry_subtract }}</label>
                <div class="col-sm-9">
                  <select name="subtract" id="input-subtract" class="form-control">
                    {% if subtract %}
                      <option value="1" selected="selected">{{ text_yes }}</option>
                      <option value="0">{{ text_no }}</option>
                    {% else %}
                      <option value="1">{{ text_yes }}</option>
                      <option value="0" selected="selected">{{ text_no }}</option>
                    {% endif %}
                  </select>
                </div>
              </div>
            {% endif %}

            {#{% if mp_allowproductcolumn['status'] is defined %}#}
            {#<div class="form-group">#}
            {#<label class="col-sm-3 control-label" for="input-status">{{ entry_status}}</label>#}
            {#<div class="col-sm-9">#}
            {#<select name="status" id="input-status" class="form-control">#}
            {#{% if status %}#}
            {#<option value="1" selected="selected">{{ text_enabled}}</option>#}
            {#<option value="0">{{ text_disabled}}</option>#}
            {#{% else %}#}
            {#<option value="1">{{ text_enabled}}</option>#}
            {#<option value="0" selected="selected">{{ text_disabled}}</option>#}
            {#{% endif %}#}
            {#</select>#}
            {#</div>#}
            {#</div>#}
            {#{% endif %}#}

            {% if mp_allowproductcolumn['stock_status_id'] is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-stock-status"><span data-toggle="tooltip"
                                                                                     title="{{ help_stock_status }}">{{ entry_stock_status }}<i class="giga icon-V10-wenhaotishi"></i></span></label>
                <div class="col-sm-9">
                  <select name="stock_status_id" id="input-stock-status" class="form-control">
                    {% for stock_status in stock_statuses %}
                      {% if stock_status['stock_status_id'] == stock_status_id %}
                        <option value="{{ stock_status['stock_status_id'] }}"
                                selected="selected">{{ stock_status['name'] }}</option>
                      {% else %}
                        <option value="{{ stock_status['stock_status_id'] }}">{{ stock_status['name'] }}</option>
                      {% endif %}
                    {% endfor %}
                  </select>
                </div>
              </div>
            {% endif %}
            {% if mp_allowproductcolumn['shipping'] is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label">{{ entry_shipping }}</label>
                <div class="col-sm-9">
                  <label class="radio-inline">
                    {% if shipping %}
                      <input type="radio" name="shipping" value="1" checked="checked"/>
                      {{ text_yes }}
                    {% else %}
                      <input type="radio" name="shipping" value="1"/>
                      {{ text_yes }}
                    {% endif %}
                  </label>
                  <label class="radio-inline">
                    {% if not shipping %}
                      <input type="radio" name="shipping" value="0" checked="checked"/>
                      {{ text_no }}
                    {% else %}
                      <input type="radio" name="shipping" value="0"/>
                      {{ text_no }}
                    {% endif %}
                  </label>
                </div>
              </div>
            {% endif %}
            {% if mp_allowproductcolumn['keyword'] is defined %}
              {% for language in languages %}
                <div class="form-group">
                  <label class="col-sm-3 control-label" for="input-keyword"><span data-toggle="tooltip"
                                                                                  title="{{ help_keyword }}">{{ entry_keyword }}<i class="giga icon-V10-wenhaotishi"></i></span></label>
                  <div class="col-sm-9 input-group">
                  <span class="input-group-addon">
                    <img src="catalog/language/{{ language['code'] }}/{{ language['code'] }}.png"
                         title="{{ language['name'] }}"/>
                  </span>
                    <input type="text" name="keyword[{{ current_store }}][{{ language['language_id'] }}]"
                           value="{{ keyword[current_store][language['language_id']] }}"
                           placeholder="{{ entry_keyword }}" id="input-keyword" class="form-control"/>
                    {% if error_keyword %}
                      <div class="text-danger">{{ error_keyword }}</div>
                    {% endif %}
                  </div>
                </div>
              {% endfor %}
            {% endif %}
            {#{% if mp_allowproductcolumn['image'] is defined %}#}
            {#<div class="form-group">#}
            {#<label class="col-sm-3 control-label" for="input-thumb-image">{{ entry_image}}</label>#}
            {#<div class="col-sm-9">#}
            {#<div style="width:110px;height:110px;overflow:hidden" class="img-thumbnail wk_upload_img">#}
            {#<img id="image-thumb-image" src="{{ thumb}}" alt="" title=""/>#}
            {#</div>#}
            {#<input type="hidden" name="image" value="{{ thumb_img}}" id="image-target-image"/>#}
            {#<div class="btn-group imgoption">#}
            {#<button class="btn btn-danger btn-sm delete_img" type="button">Remove</button>#}
            {#</div>#}
            {#</div>#}
            {#</div>#}
            {#{% endif %}#}
            {% if mp_allowproductcolumn['date_available'] is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-date-available">{{ entry_date_available }}</label>
                <div class="col-sm-9">
                  <div class="input-group data-date">
                    <input type="text" name="date_available" value="{{ date_available }}"
                           placeholder="{{ entry_date_available }}" data-date-format="YYYY-MM-DD"
                           id="input-date-available" class="form-control"/>
                    <span class="input-group-btn">
                <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                </span></div>
                </div>
              </div>
            {% endif %}
            {#{% if mp_allowproductcolumn['length'] is defined %}#}
            {#<div class="form-group">#}
            {#<label class="col-sm-3 control-label" for="input-length">{{ entry_dimension}}</label>#}
            {#<div class="col-sm-9">#}
            {#<div class="row">#}
            {#<div class="col-sm-4">#}
            {#<input type="text" name="length" value="{{ length}}" placeholder="{{ help_length}}" id="input-length" class="form-control" />#}
            {#</div>#}
            {#<div class="col-sm-4">#}
            {#<input type="text" name="width" value="{{ width}}" placeholder="{{ help_width}}" id="input-width" class="form-control" />#}
            {#</div>#}
            {#<div class="col-sm-4">#}
            {#<input type="text" name="height" value="{{ height}}" placeholder="{{ help_height}}" id="input-height" class="form-control" />#}
            {#</div>#}
            {#</div>#}
            {#</div>#}
            {#</div>#}
            {#{% endif %}#}
            {% if mp_allowproductcolumn['length_class_id'] is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-length-class">{{ entry_length }}</label>
                <div class="col-sm-9">
                  <select name="length_class_id" id="input-length-class" class="form-control">
                    {% for length_class in length_classes %}
                      {% if length_class['length_class_id'] == length_class_id %}
                        <option value="{{ length_class['length_class_id'] }}"
                                selected="selected">{{ length_class['title'] }}</option>
                      {% else %}
                        <option value="{{ length_class['length_class_id'] }}">{{ length_class['title'] }}</option>
                      {% endif %}
                    {% endfor %}
                  </select>
                </div>
              </div>
            {% endif %}
            {#{% if mp_allowproductcolumn['weight'] is defined %}#}
            {#<div class="form-group">#}
            {#<label class="col-sm-3 control-label" for="input-weight">{{ entry_weight}}</label>#}
            {#<div class="col-sm-9">#}
            {#<input type="text" name="weight" value="{{ weight}}" placeholder="{{ help_weight}}" id="input-weight" class="form-control" />#}
            {#</div>#}
            {#</div>#}
            {#{% endif %}#}
            {% if mp_allowproductcolumn['weight_class_id'] is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-weight-class">{{ entry_weight_class }}</label>
                <div class="col-sm-9">
                  <select name="weight_class_id" id="input-weight-class" class="form-control">
                    {% for weight_class in weight_classes %}
                      {% if weight_class['weight_class_id'] == weight_class_id %}
                        <option value="{{ weight_class['weight_class_id'] }}"
                                selected="selected">{{ weight_class['title'] }}</option>
                      {% else %}
                        <option value="{{ weight_class['weight_class_id'] }}">{{ weight_class['title'] }}</option>
                      {% endif %}
                    {% endfor %}
                  </select>
                </div>
              </div>
            {% endif %}

            {% if mp_allowproductcolumn['sort_order'] is defined %}
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-sort-order">{{ entry_sort_order }}</label>
                <div class="col-sm-9">
                  <input type="text" name="sort_order" value="{{ sort_order }}" placeholder="{{ entry_sort_order }}"
                         id="input-sort-order" class="form-control"/>
                </div>
              </div>
            {% endif %}

          </div>

          <!-- link tab -->
          {% if mp_allowproducttabs['links'] is defined %}
            <input type="hidden" name="product_link_tab" value="1">
            <div class="tab-pane" id="tab-links">
              <div class="form-group">
                <label class="col-sm-3 control-label" for="input-manufacturer">{{ brand_name }}</label>
                <div class="col-sm-9">
                  <input type="text" name="manufacturer" value="{{ manufacturer }}" placeholder="{{ brand_name }}"
                         id="input-manufacturer" class="form-control"/>
                  <input type="hidden" name="manufacturer_id" value="{{ manufacturer_id }}"/>
                </div>
              </div>
              <div class="form-group {% if category_required %}{{ 'required' }}{% endif %}">
                <label class="col-sm-3 control-label" for="input-category">{{ entry_category }}</label>
                <div class="col-sm-9">
                  <a id="input-category" class="btn btn-primary" data-toggle="modal" data-target="#category-modal"
                     style="margin-bottom: 10px;">{{ text_addcategory }} </a>
                  <div id="product-category" class="well well-sm" style="height: 150px; overflow: auto;">
                    {% for product_category in product_categories %}
                      <div id="product-category{{ product_category['category_id'] }}"><i
                          class="fa fa-minus-circle "></i>{{ product_category['name'] }}
                        <input type="hidden" name="product_category[]" value="{{ product_category['category_id'] }}"/>
                      </div>
                    {% endfor %}
                  </div>
                  {% if error_category %}
                    <div class="text-danger">{{ error_category }}</div>
                  {% endif %}
                </div>
              </div>
              <div class="form-group ">
                <label class="col-sm-3 control-label" for="input-colors">
                  <span data-toggle="tooltip" title=""
                        data-original-title="Increase the color of the product, the same model will be displayed on the same product details page">{{ entry_color }}<i class="giga icon-V10-wenhaotishi"></i></span></label>
                <div class="col-sm-9">
                  <a id="input-colors" class="btn btn-primary" data-toggle="modal" data-target="#colors-modal"
                     style="margin-bottom: 10px;">{{ text_addItemCode }} </a>
                  <div id="product-colors" class="well well-sm" style="height: 150px; overflow: auto;">
                    {% for product_color in product_colors %}
                      <div id="product-color{{ product_color['product_id'] }}"><i class="fa fa-minus-circle "></i>Item
                        Code:{{ product_color['sku'] }};&nbsp; MPN:{{ product_color['mpn'] }}
                        <input type="hidden" name="product_color[]" value="{{ product_color['product_id'] }}"/>
                      </div>
                    {% endfor %}
                  </div>
                  {% if error_category %}
                    <div class="text-danger">{{ error_category }}</div>
                  {% endif %}
                </div>
              </div>

              {#<div class="form-group">#}
              {#<label class="col-sm-3 control-label" for="input-filter"><span data-toggle="tooltip" title="{{ help_filter}}">{{ entry_filter}}<i class="giga icon-V10-wenhaotishi"></i></span></label>#}
              {#<div class="col-sm-9">#}
              {#<input type="text" name="filter" value="" placeholder="{{ entry_filter}}" id="input-filter" class="form-control" />#}
              {#<div id="product-filter" class="well well-sm" style="height: 150px; overflow: auto;">#}
              {#{% for product_filter in product_filters %}#}
              {#<div id="product-filter{{ product_filter['filter_id']}}"><i class="fa fa-minus-circle"></i> {{ product_filter['name']}}#}
              {#<input type="hidden" name="product_filter[]" value="{{ product_filter['filter_id']}}" />#}
              {#</div>#}
              {#{% endfor %}#}
              {#</div>#}
              {#</div>#}
              {#</div>#}
              {#{% if marketplace_seller_product_store is defined and marketplace_seller_product_store and marketplace_seller_product_store == 'choose_store' %}#}
              {#<div class="form-group">#}
              {#<label class="col-sm-3 control-label">{{ entry_store}}</label>#}
              {#<div class="col-sm-9">#}
              {#<div class="well well-sm" style="height: 150px; overflow: auto;">#}
              {#<div class="checkbox">#}
              {#<label>#}
              {#{% if 0 in product_store %}#}
              {#<input type="checkbox" name="product_store[]" value="0" checked="checked" />#}
              {#{{ text_default}}#}
              {#{% else %}#}
              {#<input type="checkbox" name="product_store[]" value="0" />#}
              {#{{ text_default}}#}
              {#{% endif %}#}
              {#</label>#}
              {#</div>#}
              {#{% for store in stores %}#}
              {#<div class="checkbox">#}
              {#<label>#}
              {#{% if store['store_id'] in product_store %}#}
              {#<input type="checkbox" name="product_store[]" value="{{ store['store_id']}}" checked="checked" />#}
              {#{{ store['name']}}#}
              {#{% else %}#}
              {#<input type="checkbox" name="product_store[]" value="{{ store['store_id']}}" />#}
              {#{{ store['name']}}#}
              {#{% endif %}#}
              {#</label>#}
              {#</div>#}
              {#{% endfor %}#}
              {#</div>#}
              {#</div>#}
              {#</div>#}
              {#{% endif %}#}
              {#<div class="form-group">#}
              {#<label class="col-sm-3 control-label" for="input-download"><span data-toggle="tooltip" title="{{ help_download}}">{{ entry_download}}<i class="giga icon-V10-wenhaotishi"></i></span></label>#}
              {#<div class="col-sm-9">#}
              {#<input type="text" name="download" value="" placeholder="{{ entry_download}}" id="input-download" class="form-control" />#}
              {#<div id="product-download" class="well well-sm" style="height: 150px; overflow: auto;">#}
              {#{% for product_download in product_downloads %}#}
              {#<div id="product-download{{ product_download['download_id']}}"><i class="fa fa-minus-circle"></i> {{ product_download['name']}}#}
              {#<input type="hidden" name="product_download[]" value="{{ product_download['download_id']}}" />#}
              {#</div>#}
              {#{% endfor %}#}
              {#</div>#}
              {#</div>#}
              {#</div>#}
              {#<div class="form-group">#}
              {#<label class="col-sm-3 control-label" for="input-related"><span data-toggle="tooltip" title="{{ help_related}}">{{ entry_related}}<i class="giga icon-V10-wenhaotishi"></i></span></label>#}
              {#<div class="col-sm-9">#}
              {#<input type="text" name="related" value="" placeholder="{{ entry_related}}" id="input-related" class="form-control" />#}
              {#<div id="product-related" class="well well-sm" style="height: 150px; overflow: auto;">#}
              {#{% set class = 'odd' %}#}
              {#{% for product_related in product_relateds %}#}
              {#{% set class = (class == 'even' ? 'odd' : 'even') %}#}
              {#<div id="product-related{{ product_related['product_id']}}" class="{{ class}}"><i class="fa fa-minus-circle"></i> {{ product_related['name']}}#}
              {#<input type="hidden" name="product_related[]" value="{{ product_related['product_id']}}" />#}
              {#</div>#}
              {#{% endfor %}#}
              {#</div>#}
              {#</div>#}
              {#</div>#}

            </div>
          {% endif %}

          <!-- attribute tab -->
          {% if mp_allowproducttabs['attribute'] is defined %}
            <input type="hidden" name="product_attribute_tab" value="1">
            <div class="tab-pane" id="tab-attribute" style="display: none">
              <div class="table-responsive">
                <table id="attribute" class="table table-striped table-bordered table-hover">
                  <thead>
                  <tr>
                    <td class="text-left">{{ entry_attribute }}</td>
                    <td class="text-left">{{ entry_text }}</td>
                    <td></td>
                  </tr>
                  </thead>

                  {% set attribute_row = 0 %}
                  {% for product_attribute in product_attributes %}
                    <tbody id="attribute-row{{ attribute_row }}">
                    <tr>
                      <td class="text-left">
                        <input type="text" name="product_attribute[{{ attribute_row }}][name]"
                               value="{{ product_attribute['name'] }}" placeholder="{{ entry_attribute }}"
                               class="form-control"/>
                        <input type="hidden" name="product_attribute[{{ attribute_row }}][attribute_id]"
                               value="{{ product_attribute['attribute_id'] }}"/>
                      </td>
                      <td class="text-left">
                        {% for language in languages %}
                          <div class="input-group">
                          <span class="input-group-addon">
                            <img src="catalog/language/{{ language['code'] }}/{{ language['code'] }}.png"
                                 title="{{ language['name'] }}"/>
                          </span>
                            <textarea
                              name="product_attribute[{{ attribute_row }}][product_attribute_description][{{ language['language_id'] }}][text]"
                              cols="40" rows="5"
                              class="form-control">{{ product_attribute['product_attribute_description'][language['language_id']] ? product_attribute['product_attribute_description'][language['language_id']]['text'] : '' }}</textarea>
                          </div>
                        {% endfor %}
                      </td>
                      <td class="text-left">
                        <button type="button"
                                onclick="$('#attribute-row{{ attribute_row }}').remove(); $('.tooltip.in').remove();"
                                data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i
                            class="fa fa-minus-circle"></i></button>
                      </td>
                    </tr>
                    </tbody>
                    {% set attribute_row = attribute_row + 1 %}
                  {% endfor %}
                  <tfoot>
                  <tr>
                    <td colspan="2"></td>
                    <td class="text-left">
                      <button type="button" onclick="addAttribute();" data-toggle="tooltip"
                              title="{{ button_add_attribute }}" class="btn btn-primary"><i
                          class="fa fa-plus-circle"></i></button>
                    </td>
                  </tr>
                  </tfoot>
                </table>
              </div><!--table-responsive-->
            </div>
          {% endif %}

          <!-- option tab -->
          {% if mp_allowproducttabs['options'] is defined %}
            <input type="hidden" name="product_option_tab" value="1">
            <div class="tab-pane" id="tab-option" style="display: none">
              <div class="row">
                <div class="col-sm-3">
                  <ul class="nav nav-pills nav-stacked" id="option">
                    {% set option_row = 0 %}
                    {% for product_option in product_options %}

                      <li><a href="#tab-option{{ option_row }}" data-toggle="tab" id="option{{ option_row }}"><i
                            class="fa fa-minus-circle"
                            onclick="$('a[href=\'#tab-option{{ option_row }}\']').parent().remove(); $('#tab-option{{ option_row }}').remove(); $('#option a:first').tab('show');"></i> {{ product_option['name'] }}
                        </a></li>
                      {% set option_row = option_row + 1 %}
                    {% endfor %}
                    <li>
                      <input type="text" name="option" value="" placeholder="{{ button_add_option }}" id="input-option"
                             class="form-control"/>
                    </li>
                  </ul>
                </div>
                <div class="col-sm-9">
                  <div class="tab-content">
                    {% set option_row = 0 %}
                    {% set option_value_row = 0 %}
                    {% for product_option in product_options %}
                      <div class="tab-pane" id="tab-option{{ option_row }}">
                        <input type="hidden" name="product_option[{{ option_row }}][product_option_id]"
                               value="{{ product_option['product_option_id'] }}"/>
                        <input type="hidden" name="product_option[{{ option_row }}][name]"
                               value="{{ product_option['name'] }}"/>
                        <input type="hidden" name="product_option[{{ option_row }}][option_id]"
                               value="{{ product_option['option_id'] }}"/>
                        <input type="hidden" name="product_option[{{ option_row }}][type]"
                               value="{{ product_option['type'] }}"/>
                        <div class="form-group">
                          <label class="col-sm-3 control-label"
                                 for="input-required{{ option_row }}">{{ entry_required }}</label>
                          <div class="col-sm-9">
                            <select name="product_option[{{ option_row }}][required]"
                                    id="input-required{{ option_row }}" class="form-control">
                              {% if product_option['required'] %}
                                <option value="1" selected="selected">{{ text_yes }}</option>
                                <option value="0">{{ text_no }}</option>
                              {% else %}
                                <option value="1">{{ text_yes }}</option>
                                <option value="0" selected="selected">{{ text_no }}</option>
                              {% endif %}
                            </select>
                          </div>
                        </div>

                        {% if product_option['type'] == 'text' %}
                          <div class="form-group">
                            <label class="col-sm-3 control-label"
                                   for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                            <div class="col-sm-9">
                              <input type="text" name="product_option[{{ option_row }}][option_value]"
                                     value="{{ product_option['option_value'] }}" placeholder="{{ entry_option_value }}"
                                     id="input-value{{ option_row }}" class="form-control"/>
                            </div>
                          </div>
                        {% endif %}
                        {% if product_option['type'] == 'textarea' %}
                          <div class="form-group">
                            <label class="col-sm-3 control-label"
                                   for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                            <div class="col-sm-9">
                              <textarea name="product_option[{{ option_row }}][option_value]" rows="5"
                                        placeholder="{{ entry_option_value }}" id="input-value{{ option_row }}"
                                        class="form-control">{{ product_option['option_value'] }}</textarea>
                            </div>
                          </div>
                        {% endif %}
                        {% if product_option['type'] == 'file' %}
                          <div class="form-group" style="display: none;">
                            <label class="col-sm-3 control-label"
                                   for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                            <div class="col-sm-9">
                              <input type="text" name="product_option[{{ option_row }}][option_value]"
                                     value="{{ product_option['option_value'] }}" placeholder="{{ entry_option_value }}"
                                     id="input-value{{ option_row }}" class="form-control"/>
                            </div>
                          </div>
                        {% endif %}
                        {% if product_option['type'] == 'date' %}
                          <div class="form-group">
                            <label class="col-sm-3 control-label"
                                   for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                            <div class="col-sm-3">
                              <div class="input-group date">
                                <input type="text" name="product_option[{{ option_row }}][option_value]"
                                       value="{{ product_option['option_value'] }}"
                                       placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD"
                                       id="input-value{{ option_row }}" class="form-control"/>
                                <span class="input-group-btn">
                        <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                        </span></div>
                            </div>
                          </div>
                        {% endif %}
                        {% if product_option['type'] == 'time' %}
                          <div class="form-group">
                            <label class="col-sm-3 control-label"
                                   for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                            <div class="col-sm-9">
                              <div class="input-group time">
                                <input type="text" name="product_option[{{ option_row }}][option_value]"
                                       value="{{ product_option['option_value'] }}"
                                       placeholder="{{ entry_option_value }}" data-date-format="HH:mm"
                                       id="input-value{{ option_row }}" class="form-control"/>
                                <span class="input-group-btn">
                        <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                        </span></div>
                            </div>
                          </div>
                        {% endif %}
                        {% if product_option['type'] == 'datetime' %}
                          <div class="form-group">
                            <label class="col-sm-3 control-label"
                                   for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                            <div class="col-sm-9">
                              <div class="input-group datetime">
                                <input type="text" name="product_option[{{ option_row }}][option_value]"
                                       value="{{ product_option['option_value'] }}"
                                       placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD HH:mm"
                                       id="input-value{{ option_row }}" class="form-control"/>
                                <span class="input-group-btn">
                        <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                        </span></div>
                            </div>
                          </div>
                        {% endif %}
                        {% if product_option['type'] == 'select' or product_option['type'] == 'radio' or product_option['type'] == 'checkbox' or product_option['type'] == 'image' %}
                          <div class="table-responsive">
                            <table id="option-value{{ option_row }}"
                                   class="table table-striped table-bordered table-hover">
                              <thead>
                              <tr>
                                <td class="text-left">{{ entry_option_value }}</td>
                                <td class="text-right">{{ entry_quantity }}</td>
                                <td class="text-left">{{ entry_subtract }}</td>
                                <td class="text-right">{{ entry_price }}</td>
                                <td class="text-right">{{ entry_option_points }}</td>
                                <td class="text-right">{{ entry_weight }}</td>
                                <td></td>
                              </tr>
                              </thead>
                              {% for product_option_value in product_option['product_option_value'] %}
                                <tbody id="option-value-row{{ option_value_row }}">
                                <tr>
                                  <td class="text-left"><select
                                      name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][option_value_id]"
                                      class="form-control">
                                      {% if option_values[product_option['option_id']] is defined %}
                                        {% for option_value in option_values[product_option['option_id']] %}
                                          {% if option_value['option_value_id'] == product_option_value['option_value_id'] %}
                                            <option value="{{ option_value['option_value_id'] }}"
                                                    selected="selected">{{ option_value['name'] }}</option>
                                          {% else %}
                                            <option
                                              value="{{ option_value['option_value_id'] }}">{{ option_value['name'] }}</option>
                                          {% endif %}
                                        {% endfor %}
                                      {% endif %}
                                    </select>
                                    <input type="hidden"
                                           name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][product_option_value_id]"
                                           value="{{ product_option_value['product_option_value_id'] }}"/></td>
                                  <td class="text-right"><input type="text"
                                                                name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][quantity]"
                                                                value="{{ product_option_value['quantity'] }}"
                                                                class="form-control"/></td>
                                  <td class="text-left"><select
                                      name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][subtract]"
                                      class="form-control">
                                      {% if product_option_value['subtract'] %}
                                        <option value="1" selected="selected">{{ text_yes }}</option>
                                        <option value="0">{{ text_no }}</option>
                                      {% else %}
                                        <option value="1">{{ text_yes }}</option>
                                        <option value="0" selected="selected">{{ text_no }}</option>
                                      {% endif %}
                                    </select></td>
                                  <td class="text-right"><select
                                      name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][price_prefix]"
                                      class="form-control">
                                      {% if product_option_value['price_prefix'] == '+' %}
                                        <option value="+" selected="selected">+</option>
                                      {% else %}
                                        <option value="+">+</option>
                                      {% endif %}
                                      {% if product_option_value['price_prefix'] == '-' %}
                                        <option value="-" selected="selected">-</option>
                                      {% else %}
                                        <option value="-">-</option>
                                      {% endif %}
                                    </select>

                                    <input type="text"
                                           name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][price]"
                                           value="{{ product_option_value['price'] }}" placeholder="{{ entry_price }}"
                                           class="form-control"/></td>
                                  <td class="text-right"><select
                                      name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][points_prefix]"
                                      class="form-control">
                                      {% if product_option_value['points_prefix'] == '+' %}
                                        <option value="+" selected="selected">+</option>
                                      {% else %}
                                        <option value="+">+</option>
                                      {% endif %}
                                      {% if product_option_value['points_prefix'] == '-' %}
                                        <option value="-" selected="selected">-</option>
                                      {% else %}
                                        <option value="-">-</option>
                                      {% endif %}
                                    </select>
                                    <input type="text"
                                           name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][points]"
                                           value="{{ product_option_value['points'] }}" placeholder="{{ entry_points }}"
                                           class="form-control"/></td>
                                  <td class="text-right"><select
                                      name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][weight_prefix]"
                                      class="form-control">
                                      {% if product_option_value['weight_prefix'] == '+' %}
                                        <option value="+" selected="selected">+</option>
                                      {% else %}
                                        <option value="+">+</option>
                                      {% endif %}
                                      {% if product_option_value['weight_prefix'] == '-' %}
                                        <option value="-" selected="selected">-</option>
                                      {% else %}
                                        <option value="-">-</option>
                                      {% endif %}
                                    </select>
                                    <input type="text"
                                           name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][weight]"
                                           value="{{ product_option_value['weight'] }}" placeholder="{{ entry_weight }}"
                                           class="form-control"/></td>
                                  <td class="text-left">
                                    <button type="button"
                                            onclick="$('#option-value-row{{ option_value_row }}').remove();"
                                            data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i
                                        class="fa fa-minus-circle"></i></button>
                                  </td>
                                </tr>
                                </tbody>
                                {% set option_value_row = option_value_row + 1 %}
                              {% endfor %}
                              <tfoot>
                              <tr>
                                <td colspan="6"></td>
                                <td class="text-left">
                                  <button type="button" onclick="addOptionValue('{{ option_row }}');"
                                          data-toggle="tooltip" title="{{ button_add_option_value }}"
                                          class="btn btn-primary"><i class="fa fa-plus-circle"></i></button>
                                </td>
                              </tr>
                              </tfoot>
                            </table>
                          </div>
                          <select id="option-values{{ option_row }}" style="display: none;">
                            {% if option_values[product_option['option_id']] is defined %}
                              {% for option_value in option_values[product_option['option_id']] %}
                                <option
                                  value="{{ option_value['option_value_id'] }}">{{ option_value['name'] }}</option>
                              {% endfor %}
                            {% endif %}
                          </select>
                        {% endif %}
                      </div><!--tab-pane-->
                      {% set option_row = option_row + 1 %}
                    {% endfor %}
                  </div><!--tab-content-->
                </div><!--col-sm-9-->
              </div><!--Row-->
            </div>
          {% endif %}

          <!-- discount tab -->
          {% if mp_allowproducttabs['discount'] is defined %}
            <input type="hidden" name="product_discount_tab" value="1">
            <div class="tab-pane" id="tab-discount" style="display: none">
              <div class="table-responsive">
                <table id="discount" class="table table-striped table-bordered table-hover">
                  <thead>
                  <tr>
                    <td class="text-left">{{ entry_customer_group }}</td>
                    <td class="text-right">{{ entry_quantity }}</td>
                    <td class="text-right" style="min-width:70px">{{ entry_priority }}</td>
                    <td class="text-right" style="min-width:80px">{{ entry_price }}</td>
                    <td class="text-left">{{ entry_date_start }}</td>
                    <td class="text-left">{{ entry_date_end }}</td>
                    <td></td>
                  </tr>
                  </thead>
                  {% set discount_row = 0 %}
                  {% for product_discount in product_discounts %}
                    <tbody id="discount-row{{ discount_row }}">
                    <tr>
                      <td class="text-left"><select name="product_discount[{{ discount_row }}][customer_group_id]"
                                                    class="form-control">
                          {% for customer_group in customer_groups %}
                            {% if customer_group['customer_group_id'] == product_discount['customer_group_id'] %}
                              <option value="{{ customer_group['customer_group_id'] }}"
                                      selected="selected">{{ customer_group['name'] }}</option>
                            {% else %}
                              <option
                                value="{{ customer_group['customer_group_id'] }}">{{ customer_group['name'] }}</option>
                            {% endif %}
                          {% endfor %}
                        </select></td>
                      <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][quantity]"
                                                    value="{{ product_discount['quantity'] }}"
                                                    placeholder="{{ entry_quantity }}" class="form-control"/></td>
                      <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][priority]"
                                                    value="{{ product_discount['priority'] }}"
                                                    placeholder="{{ entry_priority }}" class="form-control"/></td>
                      <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][price]"
                                                    value="{{ product_discount['price'] }}"
                                                    placeholder="{{ entry_price }}" class="form-control"/></td>
                      <td class="text-left">
                        <div class="input-group date">
                          <input type="text" name="product_discount[{{ discount_row }}][date_start]"
                                 value="{{ product_discount['date_start'] }}" placeholder="{{ entry_date_start }}"
                                 data-date-format="YYYY-MM-DD" class="form-control"/>
                          <span class="input-group-btn">
                    <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                    </span></div>
                      </td>
                      <td class="text-left">
                        <div class="input-group date">
                          <input type="text" name="product_discount[{{ discount_row }}][date_end]"
                                 value="{{ product_discount['date_end'] }}" placeholder="{{ entry_date_end }}"
                                 data-date-format="YYYY-MM-DD" class="form-control"/>
                          <span class="input-group-btn">
                    <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                    </span></div>
                      </td>
                      <td class="text-left">
                        <button type="button" onclick="$('#discount-row{{ discount_row }}').remove();"
                                data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i
                            class="fa fa-minus-circle"></i></button>
                      </td>
                    </tr>
                    </tbody>
                    {% set discount_row = discount_row + 1 %}
                  {% endfor %}
                  <tfoot>
                  <tr>
                    <td colspan="6"></td>
                    <td class="text-left">
                      <button type="button" onclick="addDiscount();" data-toggle="tooltip"
                              title="{{ button_add_discount }}" class="btn btn-primary"><i
                          class="fa fa-plus-circle"></i></button>
                    </td>
                  </tr>
                  </tfoot>
                </table>
              </div>
            </div><!--tab-discount-->
          {% endif %}

          <!--tab-special-->
          {% if mp_allowproducttabs['special'] is defined %}
            <input type="hidden" name="product_special_tab" value="1">
            <div class="tab-pane" id="tab-special" style="display: none">
              <div class="table-responsive">
                <table id="special" class="table table-striped table-bordered table-hover">
                  <thead>
                  <tr>
                    <td class="text-left">{{ entry_customer_group }}</td>
                    <td class="text-right" style="min-width:70px">{{ entry_priority }}</td>
                    <td class="text-right" style="min-width:80px">{{ entry_price }}</td>
                    <td class="text-left">{{ entry_date_start }}</td>
                    <td class="text-left">{{ entry_date_end }}</td>
                    <td></td>
                  </tr>
                  </thead>
                  {% set special_row = 0 %}
                  {% for product_special in product_specials %}
                    <tbody id="special-row{{ special_row }}">
                    <tr>
                      <td class="text-left"><select name="product_special[{{ special_row }}][customer_group_id]"
                                                    class="form-control">
                          {% for customer_group in customer_groups %}
                            {% if customer_group['customer_group_id'] == product_special['customer_group_id'] %}
                              <option value="{{ customer_group['customer_group_id'] }}"
                                      selected="selected">{{ customer_group['name'] }}</option>
                            {% else %}
                              <option
                                value="{{ customer_group['customer_group_id'] }}">{{ customer_group['name'] }}</option>
                            {% endif %}
                          {% endfor %}
                        </select></td>
                      <td class="text-right"><input type="text" name="product_special[{{ special_row }}][priority]"
                                                    value="{{ product_special['priority'] }}"
                                                    placeholder="{{ entry_quantity }}" class="form-control"/></td>
                      <td class="text-right"><input type="text" name="product_special[{{ special_row }}][price]"
                                                    value="{{ product_special['price'] }}"
                                                    placeholder="{{ entry_price }}" class="form-control"/></td>
                      <td class="text-left">
                        <div class="input-group date">
                          <input type="text" name="product_special[{{ special_row }}][date_start]"
                                 value="{{ product_special['date_start'] }}" placeholder="{{ entry_date_start }}"
                                 data-date-format="YYYY-MM-DD" class="form-control"/>
                          <span class="input-group-btn">
                      <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                      </span></div>
                      </td>
                      <td class="text-left">
                        <div class="input-group date">
                          <input type="text" name="product_special[{{ special_row }}][date_end]"
                                 value="{{ product_special['date_end'] }}" placeholder="{{ entry_date_end }}"
                                 data-date-format="YYYY-MM-DD" class="form-control"/>
                          <span class="input-group-btn">
                      <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                      </span></div>
                      </td>
                      <td class="text-left">
                        <button type="button" onclick="$('#special-row{{ special_row }}').remove();"
                                data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i
                            class="fa fa-minus-circle"></i></button>
                      </td>
                    </tr>
                    </tbody>
                    {% set special_row = special_row + 1 %}
                  {% endfor %}
                  <tfoot>
                  <tr>
                    <td colspan="5"></td>
                    <td class="text-left">
                      <button type="button" onclick="addSpecial();" data-toggle="tooltip"
                              title="{{ button_add_special }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i>
                      </button>
                    </td>
                  </tr>
                  </tfoot>
                </table>
              </div>
            </div><!--tab-special-->
          {% endif %}

          <!--tab-image-->
          {% set image_row = 0 %}
          {% if mp_allowproducttabs['images'] is defined %}
            <div class="tab-pane" id="tab-image">
              <div class="form-group">
                <span style="margin-left: 3%;font-size: 20px">Main Image</span>
                <div style="display: flex">
                  <div style="margin-left: 3%;margin-right: -7%;margin-top: 15px;">
                    <div style="width:110px;height:110px;overflow:hidden" class="img-thumbnail wk_upload_img">
                      <img id="image-thumb-image" src="{{ thumb }}" alt="" title=""/>
                    </div>
                    <div class="btn-group imgoption" style="width: 100%;">
                      <button class="btn btn-danger btn-sm delete_img" type="button">Remove</button>
                    </div>
                    <input type="hidden" name="image" value="{{ thumb_img }}" id="image-target-image"/>
                  </div>
                  <div style="border: 1px solid #ccc;width:80%;margin-left: 10%">
                    Listings that are missing a main image will not appear in search or browse until you fix the
                    listing.
                    Choose images that are clear,information-rich,and attractive.
                    Images must meet the following requirements:
                    <li>Products must fill at least 85% of the image.Images must show only the product that is for sale,
                      with few or no props
                      and with no logos, watermarks, or inset images.Images may only contains text that is a part of the
                      product.
                    </li>
                    <li>Mian images must have a pure white background, must be a photo(not a drawing),and must not
                      contains excluded accessories.
                    </li>
                    <li>Images must be at least 1000 pixeis on the longest side and at least 500 pixeis on the shortest
                      side to be zoom-able.
                    </li>
                    <li>Images must not exceed 10000 pixeis on the longest side.
                    </li>
                    <li>JPEG is the preferred image format, but you also may use TIFF and GIF files.
                    </li>
                  </div>
                </div>
              </div>
              <div class="table-responsive">
                <table id="images" class="table table-striped table-bordered table-hover">
                  <thead>
                  <tr>
                    <td class="text-left">{{ entry_image }}</td>
                    <td class="text-right">{{ entry_sort_order }}</td>
                    <td></td>
                  </tr>
                  </thead>
                  {% for product_image in product_images %}
                    <tbody id="image-row{{ image_row }}">
                    <tr>
                      <td class="text-left">
                        <div style="width:110px;height:110px;overflow:hidden" class="img-thumbnail wk_upload_img">
                          <img id="thumb{{ image_row }}-thumb-image"
                               src="{{ product_image['thumb'] ? product_image['thumb'] : placeholder }}" alt=""
                               title=""/>
                        </div>
                        <input type="hidden" name="product_image[{{ image_row }}][image]"
                               value="{{ product_image['thumg_img'] }}" id="thumb{{ image_row }}-target-image"/>
                        <div class="btn-group imgoption" style="width: 41%;">
                          <button class="btn btn-danger btn-sm delete_img" type="button">Remove</button>
                        </div>
                      </td>
                      <td class="text-right"><input type="text" name="product_image[{{ image_row }}][sort_order]"
                                                    value="{{ product_image['sort_order'] }}"
                                                    placeholder="{{ entry_sort_order }}" class="form-control"/></td>
                      <td class="text-left">
                        <button type="button" onclick="$('#image-row{{ image_row }}').remove();" data-toggle="tooltip"
                                title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i>
                        </button>
                      </td>
                    </tr>
                    </tbody>
                    {% set image_row = image_row + 1 %}
                  {% endfor %}
                  <tfoot>
                  <tr>
                    <td colspan="2"></td>
                    <td class="text-left">
                      <button type="button" onclick="addImage();" data-toggle="tooltip" title="{{ button_add_image }}"
                              class="btn btn-primary"><i class="fa fa-plus-circle"></i></button>
                    </td>
                  </tr>
                  </tfoot>
                </table>
              </div>
            </div><!--tab-image-->
          {% endif %}

          {#{% endif %}#}

          <div class="tab-pane" id="tab-material-package">
            <div class="table-responsive">
              <h2>Product Images</h2>
              <div class="picDiv">
                <div id="app">
                  <div class="hello">
                    <div class="upload">
                      <div class="upload_warp">
                        <div class="upload_warp_left" @click="fileClick">
                          <img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/imageUpload.png"
                               width="70px">
                        </div>
                      </div>
                      <div class="upload_warp_text">
                        <div class="upload_warp_text" v-if="imgList.length>1">
                          ${imgList.length}$ images are selected, ${bytesToSize(this.size)}$ in total.
                        </div>
                        <div class="upload_warp_text" v-if="imgList.length<=1">
                          ${imgList.length}$ image are selected, ${bytesToSize(this.size)}$ in total.
                        </div>
                      </div>
                      <input @change="fileChange($event)" type="file" id="upload_file" multiple style="display: none"
                             accept="image/*"/>
                      <div class="upload_warp_img">
                        {% for image in imageResult %}
                          <div class="upload_warp_img_div">
                            <div class="upload_warp_img_div_top">
                              <div class="upload_warp_img_div_text">
                                {{ image.name }}
                              </div>
                              <img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/del.png"
                                   class="upload_warp_img_div_del"
                                   onclick="deleteImage(this,'{{ image.productId }}','{{ image.name }}','{{ image.id }}','{{ image.path }}')">
                            </div>
                            <img src="{{ image.path }}">
                          </div>
                        {% endfor %}
                        <div class="upload_warp_img_div" v-for="(item,index) of imgList">
                          <div class="upload_warp_img_div_top">
                            <div class="upload_warp_img_div_text">
                              ${item.file.name}$
                            </div>
                            <img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/del.png"
                                 class="upload_warp_img_div_del" @click="fileDel(index)">
                          </div>
                          <img :src="item.file.src">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <h2>Product Manuals</h2>
              <div class="fileDiv">
                <div id="appFile">
                  <div class="hello">
                    <div class="upload">
                      <div class="upload_warp">
                        <div class="upload_warp_left" @click="fileClick">
                          <img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/fileUpload.png"
                               width="70px">
                        </div>
                      </div>
                      <div class="upload_warp_text" v-if="imgList.length>1">
                        ${imgList.length}$ files are selected, ${bytesToSize(this.size)}$ in total.
                      </div>
                      <div class="upload_warp_text" v-if="imgList.length<=1">
                        ${imgList.length}$ file are selected, ${bytesToSize(this.size)}$ in total.
                      </div>
                      <input @change="fileChange($event)" type="file" id="upload_file1" multiple style="display: none"/>
                      <div class="upload_warp_img">
                        {% for file in fileResult %}
                          <div class="upload_warp_img_div">
                            <div class="upload_warp_img_div_top">
                              <div class="upload_warp_img_div_text">
                                {{ file.name }}
                              </div>
                              <img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/del.png"
                                   class="upload_warp_img_div_del"
                                   onclick="deleteFile(this,'{{ file.productId }}','{{ file.name }}','{{ file.id }}','{{ file.path }}')">
                            </div>
                            <img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/file.png"
                                 style="width: 70px; margin-top: 15px;">
                          </div>
                        {% endfor %}
                        <div class="upload_warp_img_div" v-for="(item,index) of imgList">
                          <div class="upload_warp_img_div_top">
                            <div class="upload_warp_img_div_text">
                              ${item.file.name}$
                            </div>
                            <img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/del.png"
                                 class="upload_warp_img_div_del" @click="fileDel(index)">
                          </div>
                          <img :src="item.file.src">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div style="display: flex">
              <h2>Product Video</h2>
              <a class="text-right" href="index.php?route=account/customerpartner/addproduct/downloadTemplateFile"
                 target="_blank"
                 style="text-decoration: underline;cursor: pointer;bottom: 0;left: 300px;margin-left: 100px;line-height: 30px">How
                to Upload</a>
            </div>
            <div class="videoDiv">
              <div id="appVideo">
                <div class="hello">
                  <div class="upload">
                    <div class="upload_warp">
                      <div class="upload_warp_left" @click="fileClick">
                        <img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/fileUpload.png" width="70px">
                      </div>
                    </div>
                    <div class="upload_warp_text" v-if="imgList.length>1">
                      ${imgList.length}$ files are selected, ${bytesToSize(this.size)}$ in total.
                    </div>
                    <div class="upload_warp_text" v-if="imgList.length<=1">
                      ${imgList.length}$ file are selected, ${bytesToSize(this.size)}$ in total.
                    </div>
                    <input @change="fileChange($event)" type="file" id="upload_video1" multiple style="display: none"/>
                    <div class="upload_warp_img">
                      {% for file in videoResult %}
                        <div class="upload_warp_img_div">
                          <div class="upload_warp_img_div_top">
                            <div class="upload_warp_img_div_text">
                              {{ file.name }}
                            </div>
                            <img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/del.png"
                                 class="upload_warp_img_div_del"
                                 onclick="deleteVideo(this,'{{ file.productId }}','{{ file.name }}','{{ file.id }}','{{ file.path }}')">
                          </div>
                          <img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/file.png"
                               style="width: 70px; margin-top: 15px;">
                        </div>
                      {% endfor %}
                      <div class="upload_warp_img_div" v-for="(item,index) of imgList">
                        <div class="upload_warp_img_div_top">
                          <div class="upload_warp_img_div_text">
                            ${item.file.name}$
                          </div>
                          <img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/del.png"
                               class="upload_warp_img_div_del" @click="fileDel(index)">
                        </div>
                        <img :src="item.file.src">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {#{% set index = 0 %}#}
              {#{% if videoResult %}#}
              {#<div id="app" style="border:1px solid #ccc;display: flex;" >#}
              {#{% for video in videoResult %}#}
              {#{% set index = index + 1 %}#}
              {#<div style="margin-top: 20px;margin-left: 55px;width: 22%;">#}
              {#<div  id="video{{ index }}" style="border:1px dashed silver;width:150px; height:150px;margin-bottom: 20px">#}
              {#<div class="upload_warp_video_div_top"><div class="upload_warp_img_div_text"> {{ video.name }}</div>#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/del.png" onclick="deleteVideo(this,'{{ index }}','{{ video.productId }}','{{ video.name }}','{{ video.id }}','{{ video.path }}')"></div>#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/video.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}
              {#</div>#}
              {#{% endfor %}#}
              {#{% if index ==4 %}#}
              {#<div style="margin-top: 20px;margin-left: 22px;width: 22%;display: none">#}
              {#<div  id="drop_area1" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile1" style="width: 150px;"></progress>#}

              {#<span id="persent1">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video1"   accept="video/*" onchange="filechage1(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup1()" id="stop1" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;display: none">#}
              {#<div  id="drop_area2" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile2" style="width: 150px;"></progress>#}

              {#<span id="persent2">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video2"   accept="video/*" onchange="filechage2(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup2()" id="stop2" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;display: none">#}
              {#<div  id="drop_area3" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile3" style="width: 150px;"></progress>#}

              {#<span id="persent3">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video3"   accept="video/*" onchange="filechage3(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup3()" id="stop3" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;display: none">#}
              {#<div  id="drop_area4" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile4" style="width: 150px;"></progress>#}

              {#<span id="persent4">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video4"   accept="video/*" onchange="filechage4(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup4()" id="stop4" value="upload" style="display:none">#}
              {#</div>#}
              {#{% elseif index ==3 %}#}
              {#<div style="margin-top: 20px;margin-left: 22px;width: 22%;display: none">#}
              {#<div  id="drop_area1" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile1" style="width: 150px;"></progress>#}

              {#<span id="persent1">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video1"   accept="video/*" onchange="filechage1(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup1()" id="stop1" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;display: none">#}
              {#<div  id="drop_area2" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile2" style="width: 150px;"></progress>#}

              {#<span id="persent2">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video2"   accept="video/*" onchange="filechage2(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup2()" id="stop2" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;display: none">#}
              {#<div  id="drop_area3" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile3" style="width: 150px;"></progress>#}

              {#<span id="persent3">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video3"   accept="video/*" onchange="filechage3(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup3()" id="stop3" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;">#}
              {#<div  id="drop_area4" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile4" style="width: 150px;"></progress>#}

              {#<span id="persent4">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video4"   accept="video/*" onchange="filechage4(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup4()" id="stop4" value="upload" style="display:none">#}
              {#</div>#}
              {#{% elseif index ==2 %}#}
              {#<div style="margin-top: 20px;margin-left: 22px;width: 22%;display: none">#}
              {#<div  id="drop_area1" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile1" style="width: 150px;"></progress>#}

              {#<span id="persent1">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video1"   accept="video/*" onchange="filechage1(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup1()" id="stop1" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;display: none">#}
              {#<div  id="drop_area2" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile2" style="width: 150px;"></progress>#}

              {#<span id="persent2">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video2"   accept="video/*" onchange="filechage2(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup2()" id="stop2" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;">#}
              {#<div  id="drop_area3" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile3" style="width: 150px;"></progress>#}

              {#<span id="persent3">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video3"   accept="video/*" onchange="filechage3(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup3()" id="stop3" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;">#}
              {#<div  id="drop_area4" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile4" style="width: 150px;"></progress>#}

              {#<span id="persent4">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video4"   accept="video/*" onchange="filechage4(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup4()" id="stop4" value="upload" style="display:none">#}
              {#</div>#}
              {#{% elseif index ==1 %}#}
              {#<div style="margin-top: 20px;margin-left: 22px;width: 22%;display: none">#}
              {#<div  id="drop_area1" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile1" style="width: 150px;"></progress>#}

              {#<span id="persent1">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video1"   accept="video/*" onchange="filechage1(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup1()" id="stop1" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;">#}
              {#<div  id="drop_area2" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile2" style="width: 150px;"></progress>#}

              {#<span id="persent2">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video2"   accept="video/*" onchange="filechage2(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup2()" id="stop2" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;">#}
              {#<div  id="drop_area3" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile3" style="width: 150px;"></progress>#}

              {#<span id="persent3">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video3"   accept="video/*" onchange="filechage3(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup3()" id="stop3" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;">#}
              {#<div  id="drop_area4" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile4" style="width: 150px;"></progress>#}

              {#<span id="persent4">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video4"   accept="video/*" onchange="filechage4(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup4()" id="stop4" value="upload" style="display:none">#}
              {#</div>#}
              {#{% endif %}#}
              {#</div>#}
              {#{% else %}#}
              {#<div id="app" style="border:1px solid #ccc;display: flex;" >#}
              {#<div style="margin-top: 20px;margin-left: 55px;width: 22%;">#}
              {#<div  id="drop_area1" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile1" style="width: 150px;"></progress>#}

              {#<span id="persent1">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video1"   accept="video/*" onchange="filechage1(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup1()" id="stop1" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;">#}
              {#<div  id="drop_area2" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile2" style="width: 150px;"></progress>#}

              {#<span id="persent2">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video2"   accept="video/*" onchange="filechage2(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup2()" id="stop2" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;">#}
              {#<div  id="drop_area3" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile3" style="width: 150px;"></progress>#}

              {#<span id="persent3">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video3"   accept="video/*" onchange="filechage3(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup3()" id="stop3" value="upload" style="display:none">#}
              {#</div>#}
              {#<div style="margin-top: 20px;margin-left: 10px;width: 22%;">#}
              {#<div  id="drop_area4" style="border:1px dashed silver;width:150px; height:150px">#}
              {#<img src="catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/videoUpload.png" width="70px" style="margin-left: 26%;margin-top: 26%">#}
              {#</div>#}

              {#<progress value="0" max="10" id="prouploadfile4" style="width: 150px;"></progress>#}

              {#<span id="persent4">0%</span>#}
              {#<br />#}
              {#<!--<button onclick="xhr2()">ajax上传</button>-->#}
              {#<input  type="file" id="upload_file_video4"   accept="video/*" onchange="filechage4(event)" style="display:none"/>#}
              {#<input type="button" onclick="stopup4()" id="stop4" value="upload" style="display:none">#}
              {#</div>#}
              {#</div>#}
              {#{% endif %}#}
            </div>
          </div>
    </div><!--tab-content-->
    </form>
    {% endif %}
  </div>  <!--content-->
  {{ column_right }}
  </div>   <!--row-->
  <div class="modal fade" id="myModal-upload-product" tabindex="-1" data-backdrop="static" role="dialog"
       aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span
              class="sr-only">Close</span></button>
          <h3 class="modal-title">Upload Product Information</h3>
        </div>
        <div class="modal-body">
          <span>Upload File:</span>
          <button type="button" id="button-upload1" data-loading-text="{{ text_loading }}" class="btn btn-primary btn-submit"><i
              class="fa fa-upload"></i> Upload
          </button>
          <span onclick="downloadTemplate()" style="font-size: 14px;margin-left: 40px">Download Template</span>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div>  <!--container-->

  <div class="modal fade" id="myModal-save-wait" tabindex="-1" data-backdrop="static" role="dialog"
       aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
    <div class="loader1" style="margin-top: 20%;margin-left: 50%">

      <span></span>

      <span></span>

      <span></span>

      <span></span>

      <span></span>

    </div><!-- /.modal-dialog -->
  </div>  <!--container-->
  <div id="category-modal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">{{ heading_category }}</h4>
        </div>
        <div class="modal-body" style="overflow:auto;">
          <div id="category-modal-body" style="height: 100%;display: inline-flex;width: 100%;"></div>
        </div>
        <div class="modal-footer">
          <!-- <div class="pull-left">
          <button type="button" class="btn btn-warning" id="category-modal-back">{{ button_back }}</button>
        </div> -->
          <div class="pull-right">
            <button type="button" class="btn btn-default" data-dismiss="modal">{{ button_close }}</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="colors-modal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">{{ heading_colors }}</h4>
        </div>
        <div class="modal-body" style="overflow:auto;">
          <div id="colors-modal-body" style="height: 100%;width: 100%;">
            <div style="display: flex;width: 100%;height: 34px">
              <input type="text" name="filter_search" value="{{ filter_search }}"
                     placeholder="MPN/Item Code/Product Name" id="input-search" class="form-control"
                     style="width: 50%;"/>
              <a onclick="filter({{ product_id }});" class="btn btn-primary pull-right btn-submit"
                 style="margin-left: 20px">{{ button_filter }}</a>
            </div>
          </div>
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>
  <div></div>
  <!-- script custom field -->

  <!-- membership codes starts here -->
  <script>
    $(document).ready(function () {
      $("#drop_area1").css("cursor", "pointer");
      $("#drop_area2").css("cursor", "pointer");
      $("#drop_area3").css("cursor", "pointer");
      $("#drop_area4").css("cursor", "pointer");
    });
  </script>
  <script type="text/javascript">
    {% if module_wk_seller_group_status is defined and module_wk_seller_group_status %}
    listing_duration = 0;
    {% if relist_duration is defined and relist_duration %}
    listing_duration = {{ relist_duration }};
    {% endif %}
    var count = 0;

    function getListingDuration(gld_category_id) {
      $.ajax({
        url: 'index.php?route=account/customerpartner/wk_membership_catalog/getListingDuration',
        data: {category_id: gld_category_id},
        type: 'post',
        methodType: 'json',
        success: function (data) {

          $('#alert-danger').remove();
          $('#alert-info').remove();
          html = '';
          if (data) {
            for (var i = 1; i <= data; i++) {
              html += '<option value="' + i + '"';
              if (listing_duration == i) {
                html += ' selected ';
              }
              html += '>' + i + ' day(s)</option>';
            }

            $('#input-relist-duration').html(html);
            if (count != 0) {
              $('.breadcrumb').after('<div class="alert alert-info" id="alert-info"><i class="fa fa-info-circle"></i> Listing duration has been refreshed as per category selection, please check it again.<button class="close" data-dismiss="alert" type="button">×</button></div>');
            } else {
              count++;
            }
          } else {
            html += '<option></option>';
            $('#input-relist-duration').html(html);
            $('.breadcrumb').after('<div class="alert alert-danger" id="alert-danger"><i class="fa fa-exclamation-circle"></i> Warning: No more listing duration is available!</div>');
            $('body').animate({
              scrollTop: 0,
            }, 'slow');
          }
        }
      });
    }

    getListingDuration(0);
    {% endif %}
  </script>
  <!-- membership codes ends here -->

  <style>
    #wk_customfieldcontent textarea {
      height: 35px;
    }

    @media only screen and (max-width: 767px) {
      #tab-data .imgoption {
        width: 95px;
      }

      #attribute .input-group-addon textarea {
        display: block;
      }

      tbody[id^="option-value-row"] td:nth-child(4) input, tbody[id^="option-value-row"] td:nth-child(5) input, tbody[id^="option-value-row"] td:nth-child(6) input {
        display: block;
        width: 65px;
      }

      #images .btn-group.imgoption {
        width: 95px !important;
      }

      #attribute textarea[name^="product_attribute"] {
        display: block;
      }

      .imgoption {
        display: block;
        margin-top: 5px;
        width: 14%;
      }

      .imgoption button {
        width: 100%;
      }
    }

    .loader1 {
      display: inline-block;
      font-size: 0px;
      padding: 0px;
    }

    .loader1 span {
      vertical-align: middle;
      border-radius: 100%;

      display: inline-block;
      width: 10px;
      height: 10px;
      margin: 3px 2px;
      -webkit-animation: loader1 0.8s linear infinite alternate;
      animation: loader1 0.8s linear infinite alternate;
    }

    .loader1 span:nth-child(1) {
      -webkit-animation-delay: -1s;
      animation-delay: -1s;
      background: rgba(245, 103, 115, 0.6);
    }

    .loader1 span:nth-child(2) {
      -webkit-animation-delay: -0.8s;
      animation-delay: -0.8s;
      background: rgba(245, 103, 115, 0.8);
    }

    .loader1 span:nth-child(3) {
      -webkit-animation-delay: -0.26666s;
      animation-delay: -0.26666s;
      background: rgba(245, 103, 115, 1);
    }

    .loader1 span:nth-child(4) {
      -webkit-animation-delay: -0.8s;
      animation-delay: -0.8s;
      background: rgba(245, 103, 115, 0.8);

    }

    .loader1 span:nth-child(5) {
      -webkit-animation-delay: -1s;
      animation-delay: -1s;
      background: rgba(245, 103, 115, 0.4);
    }

    @keyframes loader1 {
      from {
        transform: scale(0, 0);
      }
      to {
        transform: scale(1, 1);
      }
    }

    @-webkit-keyframes loader1 {
      from {
        -webkit-transform: scale(0, 0);
      }
      to {
        -webkit-transform: scale(1, 1);
      }
    }
  </style>

  <script type="text/javascript">

    $('#vtab-option a:first').tab('show');
    tabCount = '{{ tabCount }}';
    wkcustom_option_row = '{{ wkcustom_option_row }}';
    $('select[name="wkcustomfield"]').on('change', function () {
      value = $(this).val();
      if (value == '') {
        return;
      }

      if ($('body').find('[field-id = wkoption-' + value + ']').length) {
        return;
      }
      fieldType = $('option:selected', this).attr('data-type');
      fieldName = $('option:selected', this).attr('data-name');
      fieldDes = $('option:selected', this).attr('data-des');
      fieldIsRequired = $('option:selected', this).attr('data-isRequired');
      tab = '<li><a href="#wktab-option-' + tabCount + '" data-toggle="tab" id="wkoption-' + tabCount + '" field-id = "wkoption-' + value + '"><i class="fa fa-minus-circle" onclick="$(\'#wkoption-' + tabCount + '\').remove(); $(\'#wktab-option-' + tabCount + '\').remove(); $(\'#vtab-option a:first\').trigger(\'click\'); return false;" /></i>&nbsp;' + fieldName + '</a></li>';
      $('#optionSelector').before(tab);
      html = '';
      html += '<input type="hidden" name="product_custom_field[' + wkcustom_option_row + '][custom_field_name]" value="' + fieldName + '">';
      html += '<input type="hidden" name="product_custom_field[' + wkcustom_option_row + '][custom_field_type]" value="' + fieldType + '">';
      html += '<input type="hidden" name="product_custom_field[' + wkcustom_option_row + '][custom_field_id]" value="' + value + '">';
      html += '<input type="hidden" name="product_custom_field[' + wkcustom_option_row + '][custom_field_des]" value="' + fieldDes + '">';
      html += '<input type="hidden" name="product_custom_field[' + wkcustom_option_row + '][custom_field_is_required]" value="' + fieldIsRequired + '">';
      if (fieldIsRequired == 'yes') {
        required = 'required';
      } else {
        required = '';
      }
      if (fieldType == "textarea") {

        html += '<div class="form-group ' + required + ' "><label class="col-sm-3 control-label">{{ entry_enter_text }}</label>';
        html += '<div class="col-sm-9"><textarea class="form-control" id="" value="" name="product_custom_field[' + wkcustom_option_row + '][custom_field_value][]" row="7"></textarea></div></div>';
        addtoBody(html);

      } else if (fieldType == "text") {

        html += '<div class="form-group ' + required + '"><label class="col-sm-3 control-label">{{ entry_enter_text }}</label>';
        html += '<div class="col-sm-9"><input type="text" class="form-control" name="product_custom_field[' + wkcustom_option_row + '][custom_field_value][]" /></div></div>';
        addtoBody(html);

      } else if (fieldType == "time") {

        html += '<div class="form-group ' + required + '"><label class="col-sm-3 control-label">{{ entry_select_time }}</label>';
        html += '<div class="col-sm-6"><div class="input-group time"><input type="text" name="product_custom_field[' + wkcustom_option_row + '][custom_field_value][]" class="form-control" /><span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-clock-o"></i></button</span></div</div></div>';

        addtoBody(html);

      } else if (fieldType == "datetime") {

        html += '<div class="form-group ' + required + '"><label class="col-sm-3 control-label">{{ entry_select_datetime }}</label>';
        html += '<div class="col-sm-6"><div class="input-group datetime"><input type="text" name="product_custom_field[' + wkcustom_option_row + '][custom_field_value][]" class="form-control" /><span class="input-group-btn"><button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button</span></div</div></div>';

        addtoBody(html);

      } else if (fieldType == "date") {

        html += '<div class="form-group ' + required + '">';
        html += '<label class="col-sm-3 control-label">{{ entry_select_date }}</label>';
        html += '<div class="col-sm-6"><div class="input-group date">';
        html += '<input type="text" name="product_custom_field[{{ wkcustom_option_row }}][custom_field_value][]" class="form-control">';
        html += '<span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div></div>';

        addtoBody(html);

      } else {
        $.ajax({
          url: 'index.php?route=account/customerpartner/addproduct/getOptions',
          data: '&value=' + value,
          dataType: 'json',
          type: 'post',
          success: function (data) {
            innerHtml = '';
            if (fieldType == "select") {
              html += '<div class="form-group ' + required + '"><label class="col-sm-3 control-label">Options</label><div class="col-sm-9" >';
            } else {
              html += '<div class="form-group ' + required + '"><label class="control-label">Options</label><div>';
            }
            $.each(data, function (key, val) {
              if (fieldType == "select") {
                innerHtml += '<option value="' + val.optionId + '">' + val.optionValue + '</option>'
              } else if (fieldType == "checkbox") {

                html += '<div class="radio checkbox"><label for="' + wkcustom_option_row + val.optionId + '"><input type=' + fieldType + ' id="' + wkcustom_option_row + val.optionId + '" value="' + val.optionId + '" name="product_custom_field[' + wkcustom_option_row + '][custom_field_value][]">' + val.optionValue + '</lable></div>';

              } else {

                html += '<div class="radio checkbox"><label for="' + wkcustom_option_row + val.optionId + '"><input type=' + fieldType + ' id="' + wkcustom_option_row + val.optionId + '" value="' + val.optionId + '" value="' + val.optionId + '" name="product_custom_field[' + wkcustom_option_row + '][custom_field_value][]">' + val.optionValue + '</lable></div>';

              }
            });
            if (fieldType == "select") {
              html += '<select class="form-control" name="product_custom_field[' + wkcustom_option_row + '][custom_field_value][]">' + innerHtml + '</select>';
            }
            addtoBody(html);
          }
        })
      }
    });

    function addtoBody(html) {
      html = '<div id="wktab-option-' + tabCount + '" class="tab-pane"><div class="alert alert-info"><i class="fa fa-info-circle"></i> ' + fieldDes + '</div>' + html + '</div></div></div>';
      $('#wk_customfieldcontent').append(html);
      $('#wkoption-' + tabCount).trigger('click');
      tabCount++;
      wkcustom_option_row++;

      $('.date').datetimepicker({
        pickTime: false
      });

      $('.time').datetimepicker({
        pickDate: false
      });

      $('.datetime').datetimepicker({
        pickDate: true,
        pickTime: true
      });
    }

    $('.date').datetimepicker({
      pickTime: false
    });

    $('.time').datetimepicker({
      pickDate: false
    });

    $('.datetime').datetimepicker({
      pickDate: true,
      pickTime: true
    });
  </script>
  <!-- script end here -->
  <script src="catalog/view/javascript/wk_common.js"></script>
  <script type="text/javascript"><!--
    {% for language in languages %}
    $('#input-description{{ language['language_id'] }}').summernote({
      height: 300,
    });
    {% endfor %}

    $('.data-date').datetimepicker({
      pickTime: false
    });

    $('.tab-content').on('click', '.click-file', function () {
      $(this).prev().trigger('click');
    })

    $(function () {
      $("body").on("change", "input[type='file']", function () {
        $.this = this;
        var files = !!this.files ? this.files : [];
        if (!files.length || !window.FileReader) return;
        /* no file selected, or no FileReader support */
        if (/^image/.test(files[0].type)) { /* only image file */
          var reader = new FileReader();
          /* instance of the FileReader */
          reader.readAsDataURL(files[0]);
          /* read the local file */

          reader.onloadend = function () { /* set image to display only */
            src = this.result;
            $($.this).next().attr('src', src);
          }
        }
      });
    });

    //--></script>

  {% if mp_allowproducttabs['links'] is defined and mp_allowproducttabs['links'] %}
    <script type="text/javascript"><!--
      $('input[name=\'manufacturer\']').click(function () {
        $(this).autocomplete("search");
      });
      // Manufacturer
      $('input[name=\'manufacturer\']').autocomplete({
        minLength: 0,
        delay: 101,
        source: function (request, response) {
          $.ajax({
            url: 'index.php?route=customerpartner/autocomplete/manufacturer&filter_name=' + encodeURIComponent(request),
            dataType: 'json',
            success: function (json) {
              json.unshift({
                manufacturer_id: 0,
                name: '{{ text_none }}'
              });
              response($.map(json, function (item) {
                return {
                  label: item['name'],
                  value: item['manufacturer_id']
                }
              }));
            }
          });
        },
        select: function (item) {
          $('input[name=\'manufacturer\']').val(item['label']);
          $('input[name=\'manufacturer_id\']').val(item['value']);

          return false;
        },
        focus: function (item) {
          return false;
        }
      });


      $('input[name=\'category\']').click(function () {
        $(this).next('ul').remove();
        $(this).autocomplete("search");
      });

      // Category
      $('input[name=\'category\']').autocomplete({
        minLength: 0,
        delay: 101,
        source: function (request, response) {
          $.ajax({
            url: 'index.php?route=customerpartner/autocomplete/category&filter_name=' + encodeURIComponent(request),
            dataType: 'json',
            success: function (json) {
              response($.map(json, function (item) {
                return {
                  label: item['name'],
                  value: item['category_id']
                }
              }));
            }
          });
        },
        select: function (item) {
          {% if mp_allowproducttabs['attribute'] is defined and mp_allowproducttabs['attribute'] %}
          addCategoryAttribute(item);
          {% endif %}
          // <!-- membership codes starts here -->
          {% if module_wk_seller_group_status and module_wk_seller_group_single_category is defined and module_wk_seller_group_single_category %}
          $('input[name=\'category\']').val('');
          $('#product-category' + item['value']).remove();

          $('#product-category').append('<div id="product-category' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_category[]" value="' + item['value'] + '" /></div>');

          $('#product-category div:odd').attr('class', 'odd');
          $('#product-category div:even').attr('class', 'even');
          {% if module_wk_seller_group_status %}
          getListingDuration(item['value']);
          {% endif %}
          {% else %}
          $('input[name=\'category\']').val('');
          $('#product-category' + item['value']).remove();

          $('#product-category').append('<div id="product-category' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_category[]" value="' + item['value'] + '" /></div>');

          $('#product-category div:odd').attr('class', 'odd');
          $('#product-category div:even').attr('class', 'even');
          {% endif %}
          //
          <!-- membership codes ends here -->

          return false;
        },
        focus: function (item) {
          return false;
        }
      });
      $('#product-category').delegate('.fa-minus-circle', 'click', function () {
        let that = parseInt($(this).siblings("input[type='hidden']").val());
        let bool = false;
        let arr = [];
        $.map(obj, function (value, index) {
          if (obj.length == 0)
            obj = value.filter(function (n) {
              return n != undefined
            });
        })
        $.map(obj, function (value, index) {
          if (value != undefined && typeof value != undefined) {
            if (value['category_id'] == that) {
              $.each(value.attribute_id, function (index_in, value_in) {
                $.map($('#attribute').find("tbody"), function (value_in_in, index_in_in) {
                  $.map($(value_in_in).find("input[type='hidden']"), function (val, i) {
                    if (parseInt(val['value']) == parseInt(value_in)) {
                      let k = $(value_in_in['id'])['selector'];
                      arr.push(parseInt(value_in));
                      $('#' + k).remove();
                      return bool = true;
                    }
                  })
                });
              });
            }
          }
          if (bool) {
            if (arr.length > 0) {
              $.map(arr, function (val, i) {
                if (attr_ids.includes(val)) {
                  $.map(attr_ids, function (val_in, i_in) {
                    if (val == val_in) {
                      delete attr_ids[i_in];
                    }
                  })
                }
              })
            }
            attr_ids = attr_ids.filter(function (n) {
              return n != undefined
            });
            obj.splice(index, 1);
            return true;
          }
        });

        $(this).parent().remove();
        $('#product-category div:odd').attr('class', 'odd');
        $('#product-category div:even').attr('class', 'even');
      });


      $('input[name=\'filter\']').click(function () {
        $(this).autocomplete("search");
      });

      // Filter
      $('input[name=\'filter\']').autocomplete({
        minLength: 0,
        delay: 101,
        source: function (request, response) {
          $.ajax({
            url: 'index.php?route=customerpartner/autocomplete/filter&filter_name=' + encodeURIComponent(request),
            dataType: 'json',
            success: function (json) {
              response($.map(json, function (item) {
                return {
                  label: item['name'],
                  value: item['filter_id']
                }
              }));
            }
          });
        },
        select: function (item) {
          $('input[name=\'filter\']').val('');
          $('#product-filter' + item['value']).remove();

          $('#product-filter').append('<div id="product-filter' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_filter[]" value="' + item['value'] + '" /></div>');

          $('#product-filter div:odd').attr('class', 'odd');
          $('#product-filter div:even').attr('class', 'even');

          return false;
        },
        focus: function (item) {
          return false;
        }
      });

      $('#product-filter').delegate('.fa-minus-circle', 'click', function () {
        $(this).parent().remove();
        $('#product-filter div:odd').attr('class', 'odd');
        $('#product-filter div:even').attr('class', 'even');
      });

      $('input[name=\'download\']').click(function () {
        $(this).autocomplete("search");
      });

      // Downloads
      $('input[name=\'download\']').autocomplete({
        minLength: 0,
        delay: 101,
        source: function (request, response) {
          $.ajax({
            url: 'index.php?route=customerpartner/autocomplete/download&filter_name=' + encodeURIComponent(request),
            dataType: 'json',
            success: function (json) {
              response($.map(json, function (item) {
                return {
                  label: item['name'],
                  value: item['download_id']
                }
              }));
            }
          });
        },
        select: function (item) {
          $('input[name=\'download\']').val('');
          $('#product-download' + item['value']).remove();

          $('#product-download').append('<div id="product-download' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_download[]" value="' + item['value'] + '" /></div>');

          $('#product-download div:odd').attr('class', 'odd');
          $('#product-download div:even').attr('class', 'even');

          return false;
        },
        focus: function (item) {
          return false;
        }
      });

      $('#product-download').delegate('.fa-minus-circle', 'click', function () {
        $(this).parent().remove();
        $('#product-download div:odd').attr('class', 'odd');
        $('#product-download div:even').attr('class', 'even');
      });

      $('input[name=\'related\']').click(function () {
        $(this).autocomplete("search");
      });
      // Related
      $('input[name=\'related\']').autocomplete({
        minLength: 0,
        delay: 101,
        source: function (request, response) {
          $.ajax({
            url: 'index.php?route=customerpartner/autocomplete/product&filter_name=' + encodeURIComponent(request),
            dataType: 'json',
            success: function (json) {
              response($.map(json, function (item) {
                return {
                  label: item['name'],
                  value: item['product_id']
                }
              }));
            }
          });
        },
        select: function (item) {
          $('input[name=\'related\']').val('');
          $('#product-related' + item['value']).remove();

          $('#product-related').append('<div id="product-related' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_related[]" value="' + item['value'] + '" /></div>');

          $('#product-related div:odd').attr('class', 'odd');
          $('#product-related div:even').attr('class', 'even');

          return false;
        },
        focus: function (item) {
          return false;
        }
      });

      $('#product-related').delegate('.fa-minus-circle', 'click', function () {
        $(this).parent().remove();
        $('#product-related div:odd').attr('class', 'odd');
        $('#product-related div:even').attr('class', 'even');
      });
      //--></script>
  {% endif %}

  {% if mp_allowproducttabs['attribute'] is defined and mp_allowproducttabs['attribute'] %}
    <script type="text/javascript"><!--

      var attribute_row = {{ attribute_row }};
      let obj = [];
      let increment = 0;
      let attr_ids = [];

      function addCategoryAttribute(item) {
        let bool = false;
        let copyAttributes = [];
        if (item.value) {
          $.ajax({
            url: 'index.php?route=customerpartner/autocomplete/categoryAttribute&category_id=' + item.value,
            dataType: 'json',
            success: function (json) {
              let array = [];
              array['category_id'] = item.value;
              array['attribute_id'] = [];
              $.each(json, function (index, value) {
                let val = parseInt(value['attribute_id']);
                if (array) {
                  $.map(obj, function (value_in, index_in) {
                    if (value_in != undefined && value_in['attribute_id'] == val) {
                      bool = true;
                    }
                  });
                  if (bool) {
                    return;
                  }
                }
                if (attr_ids.includes(val)) {
                  copyAttributes.push(val);
                } else {
                  attr_ids.push(val);
                }

                array['attribute_id'].push(val);
              })
              if (!increment) {
                obj[increment] = array;
                increment++;
              } else {
                let bool2 = false;
                obj = obj.filter(function (n) {
                  return n != undefined
                });
                // console.log(obj, 'new');
                $.map(obj, function (value, index) {
                  if (value != null || value != undefined) {
                    if (obj.length == 0) {
                      return true;
                    }
                    if (value.category_id == item.value) {
                      bool2 = true;
                      bool = true;
                    }
                  }
                })
                if (!bool2) {
                  obj[increment] = array;
                  increment++;
                }
              }
              $.each(json, function () {
                let attr_id = parseInt(this.attribute_id);
                let bool_in = false;
                $.map(copyAttributes, function (value, index) {
                  if (typeof value != 'number')
                    return true;
                  // console.log(typeof attr_id, 'attr_id', attr_id, value);
                  if (attr_id == value) {
                    delete copyAttributes[index];
                    return bool_in = true;
                  }
                })
                if (bool_in) {
                  copyAttributes = copyAttributes.filter(function (n) {
                    return n != undefined
                  });
                  return true;
                }
                addAttribute();
                var category_attribute_row = attribute_row - 1;
                $('input[name=\'product_attribute[' + category_attribute_row + '][name]\']').val(this.name);
                $('input[name=\'product_attribute[' + category_attribute_row + '][attribute_id]\']').val(this.attribute_id);
              });
            }
          });
        }
      }

      function addAttribute() {
        html = '<tbody id="attribute-row' + attribute_row + '">';
        html += '  <tr>';
        html += '    <td class="text-left"><input type="text" name="product_attribute[' + attribute_row + '][name]" value="" placeholder="{{ entry_attribute }}" class="form-control" /><input type="hidden" name="product_attribute[' + attribute_row + '][attribute_id]" value="" /></td>';
        html += '    <td class="text-left">';
        {% for language in languages %}
        html += '<div class="input-group"><span class="input-group-addon"><img src="catalog/language/{{ language['code'] }}/{{ language['code'] }}.png" title="{{ language['name'] }}" /></span><textarea name="product_attribute[' + attribute_row + '][product_attribute_description][{{ language['language_id'] }}][text]" rows="5" placeholder="{{ entry_text }}" class="form-control"></textarea></div> ';
        {% endfor %}
        html += '    </td>';
        html += '    <td class="text-left"><button type="button" onclick="$(\'#attribute-row' + attribute_row + '\').remove(); $(\'.tooltip.in\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
        html += '  </tr>';
        html += '</tbody>';

        $('#attribute tfoot').before(html);

        attributeautocomplete(attribute_row);

        $('input[name=\'product_attribute[' + attribute_row + '][name]\']').click(function () {
          $(this).autocomplete("search");
        });

        attribute_row++;
      }

      function attributeautocomplete(attribute_row) {
        $('input[name=\'product_attribute[' + attribute_row + '][name]\']').autocomplete({
          minLength: 0,
          delay: 101,
          source: function (request, response) {
            $.ajax({
              url: 'index.php?route=customerpartner/autocomplete/attribute&filter_name=' + encodeURIComponent(request),
              dataType: 'json',
              success: function (json) {
                response($.map(json, function (item) {
                  return {
                    category: item.attribute_group,
                    label: item.name,
                    value: item.attribute_id
                  }
                }));
              }
            });
          },
          select: function (item) {
            $('input[name=\'product_attribute[' + attribute_row + '][name]\']').val(item['label']);
            $('input[name=\'product_attribute[' + attribute_row + '][attribute_id]\']').val(item['value']);

            return false;
          },
          focus: function (item) {
            return false;
          }
        });
      }

      $('#attribute tbody').each(function (index, element) {
        attributeautocomplete(index);
      });
      //--></script>
  {% endif %}

  {% if mp_allowproducttabs['options'] is defined and mp_allowproducttabs['options'] %}
    <script type="text/javascript"><!--

      var option_row = {{ option_row }};

      $('input[name=\'option\']').autocomplete({
        minLength: 0,
        delay: 101,
        source: function (request, response) {
          $.ajax({
            url: 'index.php?route=customerpartner/autocomplete/option&filter_name=' + encodeURIComponent(request),
            dataType: 'json',
            success: function (json) {
              response($.map(json, function (item) {
                return {
                  category: item.category,
                  label: item.name,
                  value: item.option_id,
                  type: item.type,
                  option_value: item.option_value
                }
              }));
            }
          });
        },
        select: function (item) {
          html = '<div class="tab-pane" id="tab-option' + option_row + '">';
          html += ' <input type="hidden" name="product_option[' + option_row + '][product_option_id]" value="" />';
          html += ' <input type="hidden" name="product_option[' + option_row + '][name]" value="' + item['label'] + '" />';
          html += ' <input type="hidden" name="product_option[' + option_row + '][option_id]" value="' + item['value'] + '" />';
          html += ' <input type="hidden" name="product_option[' + option_row + '][type]" value="' + item['type'] + '" />';

          html += ' <div class="form-group">';
          html += '   <label class="col-sm-3 control-label" for="input-required' + option_row + '">{{ entry_required }}</label>';
          html += '   <div class="col-sm-9"><select name="product_option[' + option_row + '][required]" id="input-required' + option_row + '" class="form-control">';
          html += '       <option value="1">{{ text_yes }}</option>';
          html += '       <option value="0">{{ text_no }}</option>';
          html += '   </select></div>';
          html += ' </div>';

          if (item['type'] == 'text') {
            html += ' <div class="form-group">';
            html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
            html += '   <div class="col-sm-9"><input type="text" name="product_option[' + option_row + '][option_value]" value="" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control" /></div>';
            html += ' </div>';
          }

          if (item['type'] == 'textarea') {
            html += ' <div class="form-group">';
            html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
            html += '   <div class="col-sm-9"><textarea name="product_option[' + option_row + '][option_value]" rows="5" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control"></textarea></div>';
            html += ' </div>';
          }

          if (item['type'] == 'file') {
            html += ' <div class="form-group" style="display: none;">';
            html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
            html += '   <div class="col-sm-9"><input type="text" name="product_option[' + option_row + '][option_value]" value="" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control" /></div>';
            html += ' </div>';
          }

          if (item['type'] == 'date') {
            html += ' <div class="form-group">';
            html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
            html += '   <div class="col-sm-3"><div class="input-group date"><input type="text" name="product_option[' + option_row + '][option_value]" value="" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
            html += ' </div>';
          }

          if (item['type'] == 'time') {
            html += ' <div class="form-group">';
            html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
            html += '   <div class="col-sm-9"><div class="input-group time"><input type="text" name="product_option[' + option_row + '][option_value]" value="" placeholder="{{ entry_option_value }}" data-date-format="HH:mm" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
            html += ' </div>';
          }

          if (item['type'] == 'datetime') {
            html += ' <div class="form-group">';
            html += '   <label class="col-sm-3 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
            html += '   <div class="col-sm-9"><div class="input-group datetime"><input type="text" name="product_option[' + option_row + '][option_value]" value="" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
            html += ' </div>';
          }

          if (item['type'] == 'select' || item['type'] == 'radio' || item['type'] == 'checkbox' || item['type'] == 'image') {
            html += '<div class="table-responsive">';
            html += '  <table id="option-value' + option_row + '" class="table table-striped table-bordered table-hover">';
            html += '    <thead>';
            html += '      <tr>';
            html += '        <td class="text-left">{{ entry_option_value }}</td>';
            html += '        <td class="text-right">{{ entry_quantity }}</td>';
            html += '        <td class="text-left">{{ entry_subtract }}</td>';
            html += '        <td class="text-right">{{ entry_price }}</td>';
            html += '        <td class="text-right">{{ entry_option_points }}</td>';
            html += '        <td class="text-right">{{ entry_weight }}</td>';
            html += '        <td></td>';
            html += '      </tr>';
            html += '    </thead>';
            html += '    <tbody>';
            html += '    </tbody>';
            html += '    <tfoot>';
            html += '      <tr>';
            html += '        <td colspan="6"></td>';
            html += '        <td class="text-left"><button type="button" onclick="addOptionValue(' + option_row + ');" data-toggle="tooltip" title="{{ button_add_option_value }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>';
            html += '      </tr>';
            html += '    </tfoot>';
            html += '  </table>';
            html += '</div>';

            html += '  <select id="option-values' + option_row + '" style="display: none;">';

            for (i = 0; i < item['option_value'].length; i++) {
              html += '  <option value="' + item['option_value'][i]['option_value_id'] + '">' + item['option_value'][i]['name'] + '</option>';
            }

            html += '  </select>';
            html += '</div>';
          }

          $('#tab-option .tab-content').append(html);

          $('#option > li:last-child').before('<li><a href="#tab-option' + option_row + '" data-toggle="tab"><i class="fa fa-minus-circle" onclick="$(\'a[href=\\\'#tab-option' + option_row + '\\\']\').parent().remove(); $(\'#tab-option' + option_row + '\').remove(); $(\'#option a:first\').tab(\'show\')"></i> ' + item['label'] + '</li>');

          $('#option a[href=\'#tab-option' + option_row + '\']').tab('show');

          $('.date').datetimepicker({
            pickTime: false
          });

          $('.time').datetimepicker({
            pickDate: false
          });

          $('.datetime').datetimepicker({
            pickDate: true,
            pickTime: true
          });

          option_row++;

          return false;
        },
        focus: function (item) {
          return false;
        }
      });
      //--></script>
    <script type="text/javascript"><!--
      var option_value_row = {{ option_value_row }};


      function addOptionValue(option_row) {
        html = '<tbody id="option-value-row' + option_value_row + '">';
        html += '<tr>';
        html += '  <td class="text-left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][option_value_id]" style="min-width: 60px;" class="form-control">';
        html += $('#option-values' + option_row).html();
        html += '  </select><input type="hidden" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][product_option_value_id]" value="" /></td>';
        html += '  <td class="text-right"><input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][quantity]" value="" placeholder="{{ entry_quantity }}" class="form-control" /></td>';
        html += '  <td class="text-left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][subtract]" class="form-control">';
        html += '    <option value="1">{{ text_yes }}</option>';
        html += '    <option value="0">{{ text_no }}</option>';
        html += '  </select></td>';
        html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][price_prefix]" class="form-control">';
        html += '    <option value="+">+</option>';
        html += '    <option value="-">-</option>';
        html += '  </select>';
        html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
        html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][points_prefix]" class="form-control">';
        html += '    <option value="+">+</option>';
        html += '    <option value="-">-</option>';
        html += '  </select>';
        html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][points]" value="" placeholder="{{ entry_points }}" class="form-control" /></td>';
        html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][weight_prefix]" class="form-control">';
        html += '    <option value="+">+</option>';
        html += '    <option value="-">-</option>';
        html += '  </select>';
        html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][weight]" value="" placeholder="{{ entry_weight }}" class="form-control" /></td>';
        html += '  <td class="text-left"><button type="button" onclick="$(\'#option-value-row' + option_value_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
        html += '</tr>';
        html += '</tbody>;';

        $('#option-value' + option_row + ' tfoot').before(html);

        option_value_row++;
      }

      //--></script>
  {% endif %}

  {% if mp_allowproducttabs['discount'] is defined and mp_allowproducttabs['discount'] %}
    <script type="text/javascript"><!--
      var discount_row = {{ discount_row }};

      function addDiscount() {
        html = '<tbody id="discount-row' + discount_row + '">';
        html += '<tr>';
        html += '  <td class="text-left"><select name="product_discount[' + discount_row + '][customer_group_id]" class="form-control">';
        {% for customer_group in customer_groups %}
        html += '    <option value="{{ customer_group['customer_group_id'] }}">{{ customer_group['name']|escape }}</option>';
        {% endfor %}
        html += '  </select></td>';
        html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][quantity]" value="" placeholder="{{ entry_quantity }}" class="form-control" /></td>';
        html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][priority]" value="" placeholder="{{ entry_priority }}" class="form-control" /></td>';
        html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
        html += '  <td class="text-left"><div class="input-group date"><input type="text" name="product_discount[' + discount_row + '][date_start]" value="" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
        html += '  <td class="text-left"><div class="input-group date"><input type="text" name="product_discount[' + discount_row + '][date_end]" value="" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
        html += '  <td class="text-left"><button type="button" onclick="$(\'#discount-row' + discount_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
        html += '</tr>';
        html += '</tbody>';

        $('#discount tfoot').before(html);

        $('.date').datetimepicker({
          pickTime: false
        });

        discount_row++;
      }

      //--></script>
  {% endif %}

  {% if mp_allowproducttabs['special'] is defined and mp_allowproducttabs['special'] %}
    <script type="text/javascript"><!--
      var special_row = {{ special_row }};

      function addSpecial() {
        html = '<tbody id="special-row' + special_row + '">'
        html += '<tr>';
        html += '  <td class="text-left"><select name="product_special[' + special_row + '][customer_group_id]" class="form-control">';
        {% for customer_group in customer_groups %}
        html += '      <option value="{{ customer_group['customer_group_id'] }}">{{ customer_group['name']|escape }}</option>';
        {% endfor %}
        html += '  </select></td>';
        html += '  <td class="text-right"><input type="text" name="product_special[' + special_row + '][priority]" value="" placeholder="{{ entry_priority }}" class="form-control" /></td>';
        html += '  <td class="text-right"><input type="text" name="product_special[' + special_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
        html += '  <td class="text-left"><div class="input-group date"><input type="text" name="product_special[' + special_row + '][date_start]" value="" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
        html += '  <td class="text-left"><div class="input-group date"><input type="text" name="product_special[' + special_row + '][date_end]" value="" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
        html += '  <td class="text-left"><button type="button" onclick="$(\'#special-row' + special_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
        html += '</tr>';
        html += '</tbody>';

        $('#special tfoot').before(html);

        $('.date').datetimepicker({
          pickTime: false
        });

        special_row++;
      }

      //--></script>
  {% endif %}

  <script type="text/javascript"><!--
    var image_row = {{ image_row }};

    function addImage() {
      html = '<tbody id="image-row' + image_row + '">';
      html += '  <tr>';
      html += '  <td class="text-left"><div style="width:110px;height:110px;overflow:hidden" class="img-thumbnail wk_upload_img"><img id="thumb' + image_row + '-thumb-image" src="{{ placeholder }}" alt="" title=""/></div><input type="hidden" name="product_image[' + image_row + '][image]" value="" id="thumb' + image_row + '-target-image"/><div class="btn-group imgoption" style="width: 41%;"><button class="btn btn-danger btn-sm delete_img" type="button">Remove</button></div></td>';
      html += '  <td class="text-right"><input type="text" name="product_image[' + image_row + '][sort_order]" value="" placeholder="{{ entry_sort_order }}" class="form-control" /></td>';
      html += '  <td class="text-left"><button type="button" onclick="$(\'#image-row' + image_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
      html += '</tr>';
      html += '</tbody>';

      $('#images tfoot').before(html);

      image_row++;

    }

    //--></script>
  <script type="text/javascript"><!--
    $('#language a:first').tab('show');
    $('#option a:first').tab('show');
    //--></script></div>

{% else %}
  {{ text_access }}

  </div>  <!--content-->
  {{ column_right }}</div>   <!--row-->
  </div>  <!--container-->

{% endif %}
<!-- membership codes starts here -->
{% if module_wk_seller_group_status and module_wk_seller_group_membership_type and module_wk_seller_group_membership_type != 'product' %}
  <div id="myModalanswer" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog"
       aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h3 id="myModalLabel"></h3>
        </div>
        <div class="modal-body">
          <span id="alert" class="text-danger"></span>
          <h3 id="wk-open-list">{{ entry_list_header }}</h3>
          <table class="table table-hover" id="details">
            <thead>
            <tr>
              <td>
                {{ entry_name }}
              </td>
              <td>
                {{ entry_quantity }}
              </td>
              <td>
                {{ entry_price }}
              </td>
            <tr>
            </thead>
            <tbody>
            {% for detail in sellerDetail %}
              <tr>
                <td>
                  {{ detail['name'] }}
                </td>
                <td>
                  {{ detail['quantity'] }}
                </td>
                <td>
                  {{ detail['price'] }}
                </td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button class="btn closebtn" data-dismiss="modal" aria-hidden="true" id="closeButton">Close</button>
        </div>
      </div>
    </div>
  </div>
{% endif %}

<div></div>

<!-- membership codes ends here -->
<script>
  let allowedBuy = {{ allowedBuy?1:0 }};
  let is_available = {{ status?1:0 }};
    $(function () {
        {#$("#input-product_group").selectpicker('val',[{{ selected_product_group_ids }}]);#}
      let ele_product_group = $("#input-product_group");
      ele_product_group.selectpicker({
        noneSelectedText: "None",
        noneResultsText: "No results",
      });

      if (allowedBuy && is_available) {
        ele_product_group.selectpicker('val',[{{ selected_product_group_ids }}]);
      }else{
        ele_product_group.prop('disabled', true);
        ele_product_group.selectpicker('refresh');
        ele_product_group.selectpicker('val', '');
      }
    });

    $("select[name='status1']").change(function () {
      let _value = $(this).val();
      let _buyer_flag = $("select[name='allowedBuy']").val();
      let _em = $("#input-product_group");
      if (parseInt(_value) && parseInt(_buyer_flag)) {
        _em.prop('disabled', false);
        _em.selectpicker('refresh');
      } else {
        _em.prop('disabled', true);
        _em.selectpicker('refresh');
        _em.selectpicker('val', '');
      }
    });

    $("select[name='allowedBuy']").change(function () {
      let _value = $(this).val();
      let _status1 = $("select[name='status1']").val();
      let _em = $("#input-product_group");
      if (parseInt(_value) && parseInt(_status1)) {
        _em.prop('disabled', false);
        _em.selectpicker('refresh');
      } else {
        _em.prop('disabled', true);
        _em.selectpicker('refresh');
        _em.selectpicker('val', '');
      }
    });

  var wk_addproduct = {
    'choose_categories': [],
    'getcategories': function (category_id) {
      $.ajax({
        url: 'index.php?route=account/customerpartner/addproduct/getcategories&category_id=' + category_id,
        type: 'get',
        dataType: 'json',
        success: function (json) {
          if (json['categories']) {
            let length = $('.category-box').length;
            if (length > 1) {
              let x = parseInt($('.category-box:nth-child(' + length + ') > .wk_pd_category').attr('data-categoty-id'));
              if (x == parseInt(json['categories'][0]['category_id'])) {
                return;
              }
            }
            var html = '';
            html += '<div class="category-box">';
            $(json['categories']).each(function (index, value) {
              html += '<p class="wk_pd_category" data-categoty-id = "' + value.category_id + '">' + value.name + '</p>';
            });
            html += '</div>';
            $(document).find("#category-modal-body").append(html);
          } else {
            if (wk_addproduct.choose_categories) {
              $(wk_addproduct.choose_categories).each(function (index, item) {

                {% if mp_allowproducttabs['attribute'] is defined and mp_allowproducttabs['attribute'] %}
                addCategoryAttribute(item);
                {% endif %}
                $(document).find('#product-category' + item['value']).remove();

                $(document).find('#product-category').append('<div id="product-category' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_category[]" value="' + item['value'] + '" /></div>');

                $(document).find('#product-category div:odd').attr('class', 'odd');
                $(document).find('#product-category div:even').attr('class', 'even');
              });

              $(document).find("#category-modal").modal("hide");
            }
          }
        },
        error: function (xhr, ajaxOptions, thrownError) {
          alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
        }
      });
    },
  };

  $(document).delegate('#input-category', 'click', function () {
    wk_addproduct.choose_categories = [];
    $(document).find("#category-modal-body").empty();
    wk_addproduct.getcategories(0);
  });

  $(document).delegate('.wk_pd_category', 'click', function () {
    wk_addproduct.choose_categories = [];
    $(this).parent(".category-box").nextAll().remove();
    $(this).parent(".category-box").find(".wk_pd_category").removeClass('wk_category_select');
    $(this).addClass('wk_category_select');

    $($(document).find(".category-box > .wk_category_select")).each(function (index, value) {
      var wk_category = {label: $(value).text(), value: $(value).data("categoty-id")};
      wk_addproduct.choose_categories.push(wk_category);
    });

    wk_addproduct.getcategories($(this).data("categoty-id"));
  });

  $(document).delegate('.fa-minus-circle', 'click', function () {
    $(this).parent().remove();
    $(document).find('#product-category div:odd').attr('class', 'odd');
    $(document).find('#product-category div:even').attr('class', 'even');
  });


  $('#button-upload1').on('click', function () {

    $('#form-upload').remove();

    $('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

    $('#form-upload input[name=\'file\']').trigger('click');

    if (typeof timer != 'undefined') {
      clearInterval(timer);
    }

    var timer = setInterval(function () {
      if ($('#form-upload input[name=\'file\']').val() != '') {
        clearInterval(timer);
        $.ajax({
          url: 'index.php?route=account/customerpartner/addproduct/addProductsByTemplate',
          type: 'post',
          dataType: 'json',
          data: new FormData($('#form-upload')[0]),
          cache: false,
          contentType: false,
          processData: false,
          beforeSend: function () {
            $('#button-upload').button('loading');
          },
          complete: function () {
            $('#button-upload').button('reset');
          },
          success: function (json) {
            if (json['error']) {
              alert(json['error']);
              $('#myModal-upload-product').modal('hide');
            }

            if (json['text']) {
              alert(json['text']);
              $('#myModal-upload-product').modal('hide');
            }
          },
          error: function (xhr, ajaxOptions, thrownError) {
            alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
          }
        });
      }
    }, 500);
  });
</script>
<style type="text/css">
  .imgoption {
    display: block;
    margin-top: 5px;
    width: 18%;
  }

  .imgoption button {
    width: 100%;
  }

  .category-box {
    min-width: 20%;
    padding: 20px;
    height: 200px;
    background-color: #f3f3f3;
    margin-right: 3px;
    border: 2px solid #ede9e4;
    border-radius: 7px;
    float: left;
    position: relative;
    overflow-y: auto;
    margin-top: 0;
    box-sizing: border-box;
  }

  .wk_category_select {
    color: blue;
  }

  .color-box {
    min-width: 20%;
    padding: 20px;
    height: 200px;
    background-color: #f3f3f3;
    margin-right: 3px;
    border: 2px solid #ede9e4;
    border-radius: 7px;
    float: left;
    position: relative;
    overflow-y: auto;
    margin-top: 0;
    box-sizing: border-box;
  }

  .wk_color_select {
    color: blue;
  }

</style>
<script>
  var app = new Vue({
    el: '#app',
    delimiters: ['${', '}$'],
    data() {
      return {
        imgList: [],
        size: 0
      }
    },
    methods: {
      fileClick() {
        document.getElementById('upload_file').click()
      },
      fileChange(el) {
        if (!el.target.files[0].size) return;
        this.fileList(el.target);
        el.target.value = ''
      },
      fileList(fileList) {
        let files = fileList.files;
        for (let i = 0; i < files.length; i++) {
          //判断是否为文件夹
          if (files[i].type != '') {
            this.fileAdd(files[i]);
          } else {
            //文件夹处理
            this.folders(fileList.items[i]);
          }
        }
      },
      //文件夹处理
      folders(files) {
        let _this = this;
        //判断是否为原生file
        if (files.kind) {
          files = files.webkitGetAsEntry();
        }
        files.createReader().readEntries(function (file) {
          for (let i = 0; i < file.length; i++) {
            if (file[i].isFile) {
              _this.foldersAdd(file[i]);
            } else {
              _this.folders(file[i]);
            }
          }
        })
      },
      foldersAdd(entry) {
        let _this = this;
        entry.file(function (file) {
          _this.fileAdd(file)
        })
      },
      fileAdd(file) {
        //总大小
        this.size = this.size + file.size;
        //判断是否为图片文件
        if (file.type.indexOf('image') == -1) {
          file.src = 'wenjian.png';
          this.imgList.push({
            file
          });
        } else {
          let reader = new FileReader();
          reader.vue = this;
          reader.readAsDataURL(file);
          reader.onload = function () {
            file.src = this.result;
            this.vue.imgList.push({
              file
            });
          }
        }
      },
      fileDel(index) {
        this.size = this.size - this.imgList[index].file.size;//总大小
        this.imgList.splice(index, 1);
      },
      bytesToSize(bytes) {
        if (bytes === 0) return '0 B';
        let k = 1000, // or 1024
          sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],
          i = Math.floor(Math.log(bytes) / Math.log(k));
        return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];
      },
      dragenter(el) {
        el.stopPropagation();
        el.preventDefault();
      },
      dragover(el) {
        el.stopPropagation();
        el.preventDefault();
      },
      drop(el) {
        el.stopPropagation();
        el.preventDefault();
        this.fileList(el.dataTransfer);
      }
    }
  })

  var appFile = new Vue({
    el: '#appFile',
    delimiters: ['${', '}$'],
    data() {
      return {
        imgList: [],
        size: 0
      }
    },
    methods: {
      fileClick() {
        document.getElementById('upload_file1').click()
      },
      fileChange(el) {
        if (!el.target.files[0].size) return;
        this.fileList(el.target);
        el.target.value = ''
      },
      fileList(fileList) {
        let files = fileList.files;
        for (let i = 0; i < files.length; i++) {
          //判断是否为文件夹
          if (files[i].type != '') {
            this.fileAdd(files[i]);
          } else {
            //文件夹处理
            this.folders(fileList.items[i]);
          }
        }
      },
      //文件夹处理
      folders(files) {
        let _this = this;
        //判断是否为原生file
        if (files.kind) {
          files = files.webkitGetAsEntry();
        }
        files.createReader().readEntries(function (file) {
          for (let i = 0; i < file.length; i++) {
            if (file[i].isFile) {
              _this.foldersAdd(file[i]);
            } else {
              _this.folders(file[i]);
            }
          }
        })
      },
      foldersAdd(entry) {
        let _this = this;
        entry.file(function (file) {
          _this.fileAdd(file)
        })
      },
      fileAdd(file) {
        //总大小
        this.size = this.size + file.size;
        //判断是否为图片文件
        if (file.type.indexOf('image') == -1) {
          file.src = 'catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/wenjian.png';
          this.imgList.push({
            file
          });
        } else {
          let reader = new FileReader();
          reader.vue = this;
          reader.readAsDataURL(file);
          reader.onload = function () {
            file.src = this.result;
            this.vue.imgList.push({
              file
            });
          }
        }
      },
      fileDel(index) {
        this.size = this.size - this.imgList[index].file.size;//总大小
        this.imgList.splice(index, 1);
      },
      bytesToSize(bytes) {
        if (bytes === 0) return '0 B';
        let k = 1000, // or 1024
          sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],
          i = Math.floor(Math.log(bytes) / Math.log(k));
        return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];
      },
      dragenter(el) {
        el.stopPropagation();
        el.preventDefault();
      },
      dragover(el) {
        el.stopPropagation();
        el.preventDefault();
      },
      drop(el) {
        el.stopPropagation();
        el.preventDefault();
        this.fileList(el.dataTransfer);
      }
    }
  })

  var appVideo = new Vue({
    el: '#appVideo',
    delimiters: ['${', '}$'],
    data() {
      return {
        imgList: [],
        size: 0
      }
    },
    methods: {
      fileClick() {
        document.getElementById('upload_video1').click()
      },
      fileChange(el) {
        if (el.target.files[0].type.indexOf('text') == -1) {
          alert("File format error!");
          return;
        }
        if (!el.target.files[0].size) return;
        this.fileList(el.target);
        el.target.value = ''
      },
      fileList(fileList) {
        let files = fileList.files;
        for (let i = 0; i < files.length; i++) {
          //判断是否为文件夹
          if (files[i].type != '') {
            this.fileAdd(files[i]);
          } else {
            //文件夹处理
            this.folders(fileList.items[i]);
          }
        }
      },
      //文件夹处理
      folders(files) {
        let _this = this;
        //判断是否为原生file
        if (files.kind) {
          files = files.webkitGetAsEntry();
        }
        files.createReader().readEntries(function (file) {
          for (let i = 0; i < file.length; i++) {
            if (file[i].isFile) {
              _this.foldersAdd(file[i]);
            } else {
              _this.folders(file[i]);
            }
          }
        })
      },
      foldersAdd(entry) {
        let _this = this;
        entry.file(function (file) {
          _this.fileAdd(file)
        })
      },
      fileAdd(file) {
        //总大小
        this.size = this.size + file.size;
        //判断是否为图片文件
        if (file.type.indexOf('image') == -1) {
          file.src = 'catalog/view/theme/yzcTheme/stylesheet/diyUpload/images/wenjian.png';
          this.imgList.push({
            file
          });
        } else {
          let reader = new FileReader();
          reader.vue = this;
          reader.readAsDataURL(file);
          reader.onload = function () {
            file.src = this.result;
            this.vue.imgList.push({
              file
            });
          }
        }
      },
      fileDel(index) {
        this.size = this.size - this.imgList[index].file.size;//总大小
        this.imgList.splice(index, 1);
      },
      bytesToSize(bytes) {
        if (bytes === 0) return '0 B';
        let k = 1000, // or 1024
          sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],
          i = Math.floor(Math.log(bytes) / Math.log(k));
        return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];
      },
      dragenter(el) {
        el.stopPropagation();
        el.preventDefault();
      },
      dragover(el) {
        el.stopPropagation();
        el.preventDefault();
      },
      drop(el) {
        el.stopPropagation();
        el.preventDefault();
        this.fileList(el.dataTransfer);
      }
    }
  })
</script>
<style>
  .upload_warp_img_div_del {
    position: absolute;
    top: 6px;
    width: 16px;
    right: 4px;
  }

  .upload_warp_img_div_top {
    position: absolute;
    top: 0;
    width: 100%;
    height: 30px;
    background-color: rgba(0, 0, 0, 0.4);
    line-height: 30px;
    text-align: left;
    color: #fff;
    font-size: 12px;
    text-indent: 4px;
  }

  .upload_warp_img_div_text {
    white-space: nowrap;
    width: 80%;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .upload_warp_img_div img {
    max-width: 100%;
    max-height: 100%;
    vertical-align: middle;
  }

  .upload_warp_img_div {
    position: relative;
    height: 100px;
    width: 120px;
    border: 1px solid #ccc;
    margin: 0px 30px 10px 0px;
    float: left;
    line-height: 100px;
    display: table-cell;
    text-align: center;
    background-color: #eee;
    cursor: pointer;
  }

  .upload_warp_img {
    border-top: 1px solid #D2D2D2;
    padding: 14px 0 0 14px;
    overflow: hidden
  }

  .upload_warp_text {
    text-align: left;
    margin-bottom: 10px;
    padding-top: 10px;
    text-indent: 14px;
    border-top: 1px solid #ccc;
    font-size: 14px;
  }

  .upload_warp_right {
    float: left;
    width: 57%;
    margin-left: 2%;
    height: 100%;
    border: 1px dashed #999;
    border-radius: 4px;
    line-height: 130px;
    color: #999;
  }

  .upload_warp_left img {
    margin-top: 35px;
  }

  .upload_warp_left {
    float: left;
    width: 15%;
    height: 100%;
    border: 1px dashed #999;
    border-radius: 4px;
    cursor: pointer;
  }

  .upload_warp {
    margin: 14px;
    height: 130px;
  }

  .upload {
    border: 1px solid #ccc;
    background-color: #fff;
    width: 100%;
    box-shadow: 0px 1px 0px #ccc;
    border-radius: 4px;
  }

  .hello {
    width: 100%;
    text-align: center;
  }

  .upload_warp_video_div_top {
    top: 0;
    width: 100%;
    height: 30px;
    background-color: rgba(0, 0, 0, 0.4);
    line-height: 30px;
    text-align: left;
    color: #fff;
    font-size: 12px;
    text-indent: 4px;
    display: flex;
  }
</style>

<script>
  flag0 = false;
  productIdReturn = '';

  function downloadTemplate() {
    window.location.href = "storage/download/Upload Product Template.csv"
  }

  function submitButtonLoad(){
      $("#submit").button('loading');
  }

  function submitButtonReset() {
      $("#submit").button('reset');
  }

  function saveProduct() {
    submitButtonLoad();
    {% for language in languages %}
    var markupStr = $('#input-description{{ language['language_id'] }}').code();
    $('#input-description{{ language['language_id'] }}').val(markupStr);
    {% endfor %}
    var url = $('#form-save').context.URL;
    var param = url.split('&')[1];
    var formData = new FormData($('#form-save')[0]);

    let product_group_ids = $("#input-product_group").val();
    if (product_group_ids) {
      formData.append('product_group_ids', product_group_ids);
    }else{
      formData.append('product_group_ids', []);
    }
    for (var i = 0; i < app.imgList.length; i++) {
      formData.append("image" + i, app.imgList[i].file);
    }

    for (var j = 0; j < appFile.imgList.length; j++) {
      formData.append("file" + j, appFile.imgList[j].file);
    }
    for (var j = 0; j < appVideo.imgList.length; j++) {
      formData.append("video" + j, appVideo.imgList[j].file);
    }
    var mpn = $('#input-mpn').val();
    var name1 = $('#input-name1').val();
    var length1 = $('#input-length').val();
    var width1 = $('#input-width').val();
    var height1 = $('#input-height').val();
    var weight1 = $('#input-weight').val();
    let checkFlag = false;
    //检验mpn是否重复
    var edit = {{ Edit }};
    if (edit == 0) {
      var mpn = $("#input-mpn").val();
      $.ajax({
        url: 'index.php?route=account/customerpartner/addproduct/checkMpnNoComboFlag&mpn=' + mpn,
        dataType: 'json',
        success: function (json) {
          if (json['success']) {
            alert('Failed！MPN cannot repeat.');
            checkFlag = true;
            submitButtonReset();
            return;
          }
          if (mpn == '' || mpn == undefined || mpn.length < 3 || mpn.length > 255) {
            $('#mpn-error').css('display', 'block');
            $('#mpn-error').addClass('text-danger');
            checkFlag = true;
          }
          if (name1 == '' || name1 == undefined || name1.length < 3 || name1.length > 255) {
            $('#name-error').css('display', 'block');
            $('#name-error').addClass('text-danger');
            checkFlag = true;
          }
          var comboFlag = $('#combo-flag').is(':checked');
          if (!comboFlag) {
            if (length1 == '' || length1 == undefined || width1 == '' || width1 == undefined || height1 == '' || height1 == undefined) {
              $('#dimensions-error').css('display', 'block');
              $('#dimensions-error').addClass('text-danger');
              checkFlag = true;
            }
            if (weight1 == '' || weight1 == undefined) {
              $('#weight-error').css('display', 'block');
              $('#weight-error').addClass('text-danger');
              checkFlag = true;
            }
          } else {
            var comboLength = $('div[name="comboDetails"]').length;
            var ary = new Array();
            for (var i = 0; i < comboLength; i++) {
              var id = $('div[name="comboDetails"]')[i].id.split('comboDetails')[1];
              if ($('#input-quantity-' + id).val() == "" || $('#input-quantity-' + id).val() == 0) {
                alert('Failed！Quantity cannot be empty or 0');
                checkFlag = true;
                submitButtonReset();
                return;
              }
              if ($('#input-mpn-' + id).val() == '' || $('#input-mpn-' + id).val() == undefined) {
                alert("Failed！MPN in Combo can't be empty");
                checkFlag = true;
                submitButtonReset();
                return;
              }
              ary.push($('#input-mpn-' + id).val());
            }
            var length = $('div[name="combo-error"]').length;
            if (length > 0) {
                          alert('This MPN is Combo product cannot be added to details.');
              checkFlag = true;
              submitButtonReset();
              return;
            }
            if (comboLength == 1) {
              var rowId = $('div[name="comboDetails"]')[0].id.split('comboDetails')[1];
              var qty = $('#input-quantity-' + rowId).val();
              if (qty == 1) {
                alert('Failed！Quantity must be greater than 1');
                checkFlag = true;
                submitButtonReset();
                return;
              }
            }
            let nary = ary.slice().sort();
            for (let i = 0; i < ary.length; i++) {
              if (nary[i] == nary[i + 1]) {
                alert("Failed！MPN in combo cannot repeat");
                checkFlag = true;
                submitButtonReset();
                return;
              }
            }
          }
          if ($('#mpn-exist').length > 0) {
            checkFlag = true;
          }
          if (checkFlag) {
            submitButtonReset();
					   $("#submit").button('reset');
            return
          }
          addAjax(param, formData);
        },
        error: function (xhr, ajaxOptions, thrownError) {
          alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
        }
      });
    } else {
      if (mpn == '' || mpn == undefined || mpn.length < 3 || mpn.length > 255) {
        $('#mpn-error').css('display', 'block');
        $('#mpn-error').addClass('text-danger');
        checkFlag = true;
      }
      if (name1 == '' || name1 == undefined || name1.length < 3 || name1.length > 255) {
        $('#name-error').css('display', 'block');
        $('#name-error').addClass('text-danger');
        checkFlag = true;
      }
      var comboFlag = $('#combo-flag').is(':checked');
      if (!comboFlag) {
        if (length1 == '' || length1 == undefined || width1 == '' || width1 == undefined || height1 == '' || height1 == undefined) {
          $('#dimensions-error').css('display', 'block');
          $('#dimensions-error').addClass('text-danger');
          checkFlag = true;
        }
        if (weight1 == '' || weight1 == undefined) {
          $('#weight-error').css('display', 'block');
          $('#weight-error').addClass('text-danger');
          checkFlag = true;
        }
      } else {
        var comboLength = $('div[name="comboDetails"]').length;
        var ary = new Array();
        for (var i = 0; i < comboLength; i++) {
          var id = $('div[name="comboDetails"]')[i].id.split('comboDetails')[1];
          if ($('#input-quantity-' + id).val() == "" || $('#input-quantity-' + id).val() == 0) {
            alert('Failed！Quantity cannot be empty or 0');
            checkFlag = true;
            submitButtonReset();
            return;
          }
          if ($('#input-mpn-' + id).val() == '' || $('#input-mpn-' + id).val() == undefined) {
            alert("Failed！MPN in Combo can't be empty");
            submitButtonReset();
            checkFlag = true;
            return;
          }
          ary.push($('#input-mpn-' + id).val());
        }
        var length = $('div[name="combo-error"]').length;
        if (length > 0) {
          alert('This MPN is Combo product cannot be added to details.');
          checkFlag = true;
          submitButtonReset();
          return;
        }
        if (comboLength == 1) {
          var rowId = $('div[name="comboDetails"]')[0].id.split('comboDetails')[1];
          var qty = $('#input-quantity-' + rowId).val();
          if (qty == 1) {
            alert('Failed！Quantity must be greater than 1');
            checkFlag = true;
            submitButtonReset();
            return;
          }
        }
        let nary = ary.slice().sort();
        for (let i = 0; i < ary.length; i++) {
          if (nary[i] == nary[i + 1]) {
            alert("Failed！MPN in combo cannot repeat");
            checkFlag = true;
            submitButtonReset();
            return;
          }
        }
      }
      if ($('#mpn-exist').length > 0) {
        checkFlag = true;
      }
      if (checkFlag) {
        submitButtonReset();
        return
      }
      addAjax(param, formData);
    }
  }


  function deleteImage(e, productId, fileName, id, path) {
    $(e).parent().parent().hide();
    $.ajax({
      url: 'index.php?route=account/customerpartner/addproduct/deletePackageImage',
      type: 'post',
      data: {'productId': productId, 'fileName': fileName, 'id': id, 'path': path}
    })
  }

  function deleteFile(e, productId, fileName, id, path) {
    $(e).parent().parent().hide();
    $.ajax({
      url: 'index.php?route=account/customerpartner/addproduct/deletePackageFile',
      type: 'post',
      data: {'productId': productId, 'fileName': fileName, 'id': id, 'path': path}
    })
  }

  function deleteVideo(e, productId, fileName, id, path) {
    $(e).parent().parent().hide();
    $.ajax({
      url: 'index.php?route=account/customerpartner/addproduct/deletePackageVideo',
      type: 'post',
      data: {'productId': productId, 'fileName': fileName, 'id': id, 'path': path}
    })
  }

  function addAjax(param, formData) {
    $('#myModal-save-wait').modal('show');

    var timer = setTimeout(function () {
      $.ajax({
        url: 'index.php?route=account/customerpartner/addproduct/uploadImages&' + param,
        type: 'post',
        data: formData,
        async: false,
        cache: false,
        contentType: false,
        processData: false,
        success: function (json) {
          if (json['text']) {
            $('#myModal-save-wait').modal('hide');

            alert('Saved successfully.');
            window.location.href = "index.php?route=account/customerpartner/productlist";
          }
        },
        error: function (xhr, ajaxOptions, thrownError) {
          alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
        }
      });
    }, 500);

  }

  function listenerPro() {
    console.log("flag0:" + flag0);
    console.log("flag1:" + flag1);
    console.log("flag2:" + flag2);
    console.log("flag3:" + flag3);
    console.log("flag4:" + flag4);
    window.setTimeout(function () {
      if (flag0 && flag1 && flag2 && flag3 && flag4) {
        $('#myModal-save-wait').modal('hide');

        alert('Saved successfully.');
        window.location.href = "index.php?route=account/customerpartner/productlist";
      } else if (flag5) {
        $('#myModal-save-wait').modal('hide');
        flag5 = false;
      } else {
        listenerPro()
      }
    }, 100);
  }

</script>
<script>
  var comboRow = {{ comboInfos|length }}+1;

  function num(obj) {
    obj.value = obj.value.replace(/[^\d.]/g, ""); //清除"数字"和"."以外的字符
    obj.value = obj.value.replace(/^\./g, ""); //验证第一个字符是数字
    obj.value = obj.value.replace(/\.{2,}/g, "."); //只保留第一个, 清除多余的
    obj.value = obj.value.replace(".", "$#$").replace(/\./g, "").replace("$#$", ".");
    obj.value = obj.value.replace(/^(\-)*(\d+)\.(\d\d).*$/, '$1$2.$3'); //只能输入两个小数
  }

  function qty(obj) {
    obj.value = obj.value.replace(/[^\d]/g, ""); //清除"数字"和"."以外的字符
    obj.value = obj.value.replace(/^[0]/g, ""); //验证第一个字符是0
  }

  function showComboDetail(checkbox) {
    var checked = $(checkbox).is(":checked");
    if (checked) {
      $('#part-flag').attr("checked", false);
      checkCombo();
      $('#div-dimensions').hide();
      $('#div-weight').hide();
    } else {
      $('div[name="comboDetails"]').remove();
      $('div[name="combo-error"]').remove();
      $('#div-dimensions').show();
      $('#div-weight').show();
      comboRow = 1;
    }
  }

  function checkCombo() {
    var html = '<div class="form-group" id="comboDetails' + comboRow + '" name="comboDetails">';
    html += '<label class="col-sm-3 control-label" for="input-weight">';
    html += '<span  title="①MPN in Combo must be entered.\r②Quantity: the number of sub-MPNs that are combined into a Combo.\r③The check box for MPN in Combo is checked. Sub-MPN can be sold separately.\r④The check box for MPN in Combo is not checked. Sub-MPN cannot be sold separately.">Combo MPN Details</span>';
    html += '</label>';
    html += '<div class="col-sm-7"style="width: 65%">';
    html += '<div class="row" style="display: flex;padding-left: 15px;padding-right: 15px">';
    html += '<input type="text" name="combo[' + comboRow + '][mpn]"  placeholder="MPN in Combo" id="input-mpn-' + comboRow + '" class="form-control"  style="width: 20%" onblur="checkMPN(this)"/>';
    html += '<input type="text" name="combo[' + comboRow + '][quantity]"  placeholder="Quantity" id="input-quantity-' + comboRow + '" class="form-control" onkeyup="qty(this)"  style="width: 15%;margin-left: 1%"/>';
    html += '<input type="text" name="combo[' + comboRow + '][length]"  placeholder="Length" id="input-length-' + comboRow + '" class="form-control" onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>';
    html += '<input type="text" name="combo[' + comboRow + '][width]"  placeholder="Width" id="input-width-' + comboRow + '" class="form-control" onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>';
    html += '<input type="text" name="combo[' + comboRow + '][height]"  placeholder="height" id="input-height-' + comboRow + '" class="form-control" onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>';
    html += '<input type="text" name="combo[' + comboRow + '][weight]"  placeholder="Weight" id="input-weight-' + comboRow + '" class="form-control" onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>';
    html += '</div>';
    html += '</div>';
    html += '<div><button type="button" onclick="addComboDetail(comboRow);" data-toggle="tooltip" title="" class="btn btn-primary" data-original-title="Add"><i class="fa fa-plus-circle"></i></button></div>';
    html += '</div>';

    $('#div-color').before(html);
    comboRow++;
  }

  function addComboDetail() {
    var html = '<div class="form-group" id="comboDetails' + comboRow + '" name="comboDetails">';
    html += '<label class="col-sm-3 control-label" for="input-weight">';
    html += '</label>';
    html += '<div class="col-sm-7"style="width: 65%">';
    html += '<div class="row" style="display: flex;padding-left: 15px;padding-right: 15px">';
    html += '<input type="text" name="combo[' + comboRow + '][mpn]"  placeholder="MPN in Combo" id="input-mpn-' + comboRow + '" class="form-control"  style="width: 20%" onblur="checkMPN(this)"/>';
    html += '<input type="text" name="combo[' + comboRow + '][quantity]"  placeholder="Quantity" id="input-quantity-' + comboRow + '" class="form-control" onkeyup="qty(this)"  style="width: 15%;margin-left: 1%"/>';
    html += '<input type="text" name="combo[' + comboRow + '][length]"  placeholder="Length" id="input-length-' + comboRow + '" class="form-control" onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>';
    html += '<input type="text" name="combo[' + comboRow + '][width]"  placeholder="Width" id="input-width-' + comboRow + '" class="form-control" onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>';
    html += '<input type="text" name="combo[' + comboRow + '][height]"  placeholder="height" id="input-height-' + comboRow + '" class="form-control" onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>';
    html += '<input type="text" name="combo[' + comboRow + '][weight]"  placeholder="Weight" id="input-weight-' + comboRow + '" class="form-control" onkeyup="num(this)" readonly="readonly" style="width: 15%;margin-left: 1%"/>';
    html += '</div>';
    html += '</div>';
    html += '<div><button type="button" onclick="removeComboDetail(' + comboRow + ');" data-toggle="tooltip" title="" class="btn btn-danger" data-original-title="Remove"><i class="fa fa-minus-circle"></i></button></div>';
    html += '</div>';

    $('#div-color').before(html);
    comboRow++;
  }

  function removeComboDetail(row) {
    $('#combo-error-' + row).remove();
    $('#comboDetails' + row).remove();
  }

  function backfillSku(obj) {
    //校验mpn
    $('#mpn-exist').remove();
    if (obj.value == "" || 1 =={{ Edit }}) {

      return
    }
    $.ajax({
      url: 'index.php?route=account/customerpartner/addproduct/checkMpnNoComboFlag&mpn=' + obj.value,
      dataType: 'json',
      success: function (json) {
        if (json['success']) {
          var html = "<div id='mpn-exist' class='text-danger'> {{ error_mpn_already_exist }}</div>";
          $('#input-mpn').after(html);
        }
      },
      error: function (xhr, ajaxOptions, thrownError) {
        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
      }
    });
    $('#input-sku').val(obj.value);
  }

  function checkMPN(obj) {
    var id = obj.id.split('-')[2];
    $('#combo-error-' + id).remove();
    if (obj.value == "") {
      var html = "<div class='text-danger form-group' style='margin-left: 30%' id='combo-error-" + id + "' name='combo-error'>MPN in Combo can't be empty</div>";
      $('#comboDetails' + id).after(html);
      return;
    }
    $.ajax({
      url: 'index.php?route=account/customerpartner/addproduct/checkMpn&mpn=' + obj.value + '&id=' + id,
      dataType: 'json',
      success: function (json) {
        if (json['success']) {
          $('#input-length-' + json['id']).val(json['length']);
          $('#input-width-' + json['id']).val(json['width']);
          $('#input-height-' + json['id']).val(json['height']);
          $('#input-weight-' + json['id']).val(json['weight']);
          $('#submit').attr("disabled", false);
        } else {
          $('#input-quantity-' + json['id']).val("");
          $('#input-length-' + json['id']).val("");
          $('#input-width-' + json['id']).val("");
          $('#input-height-' + json['id']).val("");
          $('#input-weight-' + json['id']).val("");
          var html = "<div class='text-danger form-group' style='margin-left: 30%' id='combo-error-" + json['id'] + "' name='combo-error'>" + json['msg'] + "</div>";
          $('#comboDetails' + json['id']).after(html);
          $('#submit').attr("disabled", true);
        }
      },
      error: function (xhr, ajaxOptions, thrownError) {
        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
      }
    });
  }

  function filter(productId) {
    $(document).find('.color-box').remove();
    var filter_search = $('#input-search').val();
    if (productId != '' && productId != undefined) {
      var product_id = productId;
      var url = 'index.php?route=account/customerpartner/addproduct/associate&filter_search=' + filter_search + '&product_id=' + product_id;
    } else {
      var url = 'index.php?route=account/customerpartner/addproduct/associate&filter_search=' + filter_search;
    }
    $.ajax({
      url: url,
      dataType: 'json',
      success: function (json) {
        if (json['colors']) {
          var html = '<div class="color-box" style="width: 100%;margin-top: 5%">';
          for (var i = 0; i < json['colors'].length; i++) {
            html += '<p class="wk_pd_color" data-product-id = "' + json['colors'][i]['product_id'] + '"> ' +
              '<span class="bg-primary" style="background-color: #64A8D1">' +
              'Item Code:' + json['colors'][i]['sku'] + ';&nbsp;&nbsp;&nbsp;MPN:' +
              json['colors'][i]['mpn'] +
              '</span>' +
              ';&nbsp;&nbsp;&nbsp;Product Name:' + json['colors'][i]['name'] + '</p>';
          }
          html += '</div>';
          $(document).find("#colors-modal-body").append(html);
        } else {
          var html = '<div class="color-box" style="width: 100%;margin-top: 5%">No Result!</div>';
          $(document).find("#colors-modal-body").append(html);
        }
      },
      error: function (xhr, ajaxOptions, thrownError) {
        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
      }
    })
  }

  $(document).delegate('.wk_pd_color', 'click', function () {
    // 校验颜色  如果自己本身没有颜色 或者 关联的商品没有颜色时候
    // 没有则alert信息
    function checkColor(productId) {
      var alertMsg = ' has no color attribute, please carry out correlation operation after maintenance.';
      var productColorId = $('#input_color_select').val();
      var productItemCode = $("input[name='sku']").val();
      var $flag = true;
      if (!productColorId) {
        alert(productItemCode + alertMsg);
        $flag = false;
      }
      $.ajax({
        url: '{{ product_color_check_url }}',
        data: {id: productId},
        async: false,
        method: 'post',
        success: function (data) {
          if (data['code'] == 1) {
            alert(data['sku'] + alertMsg);
            $flag = false;
          }
        }
      });
      return $flag;
    }

    if (!checkColor($(this).data('product-id'))) {
      return;
    }
    $(this).parent(".color-box").nextAll().remove();
    $(this).parent(".color-box").find(".wk_pd_color").removeClass('wk_color_select');
    $(this).addClass('wk_color_select');

    $($(document).find(".color-box > .wk_color_select")).each(function (index, value) {
      var wk_color = {
        label: $(value).text().split(";")[0] + $(value).text().split(";")[1],
        value: $(value).data("product-id")
      };
      $(document).find('#product-color' + wk_color['value']).remove();
      $(document).find('#product-colors').append('<div id="product-color' + wk_color['value'] + '"><i class="fa fa-minus-circle"></i> ' + wk_color['label'] + '<input type="hidden" name="product_color[]" value="' + wk_color['value'] + '" /></div>');
      $(document).find('#product-color div:odd').attr('class', 'odd');
      $(document).find('#product-color div:even').attr('class', 'even');
      $(document).find('.color-box').remove();
      $('#input-search').val("");
      $(document).find("#colors-modal").modal("hide");
    });
  });
  $('#input-search').bind('keyup', function (event) {
    if (event.keyCode == "13") {
      //回车执行查询
      filter({{ product_id }});
    }
  });
  $("#submit").click(function () {
    $(this).button('loading');
    setTimeout(function () {
      saveProduct(this)
    }, 500);
  });
  $('#input_color_select').on('input', function () {
    if (!$(this).val()) {
      $('#input_color_value').val('');
    }
  });
  $('#input_color_select').autocomplete({
    source: function (request, response) {
      $.ajax({
        url: 'index.php?route=account/customerpartner/productoptions/autocomplete',
        data: {filter_name: encodeURIComponent(request)},
        dataType: 'json',
        success: function (json) {
          var tmpArr = [{color: '- - NONE - -', id: 0}];
          tmpArr = tmpArr.concat(json);
          response($.map(tmpArr, function (item) {
            return {
              label: item['color'],
              value: item['id']
            }
          }));
        }
      });
    },
    select: function (item) {
      $('#input_color_select').val(item.label);
      $('#input_color_value').val(item.value);
    }
  });

  function showPartDetail(checkbox) {
    var checked = $(checkbox).is(":checked");
    if (checked) {
      $('#combo-flag').attr("checked", false);
      $('div[name="comboDetails"]').remove();
      $('div[name="combo-error"]').remove();
      $('#div-dimensions').show();
      $('#div-weight').show();
    } else {
      $('div[name="comboDetails"]').remove();
      $('div[name="combo-error"]').remove();
      $('#div-dimensions').show();
      $('#div-weight').show();
    }
  }
</script>

{{ footer }}
