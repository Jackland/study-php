{{ header }}
{{ separate_column_left }}
<script type="text/javascript" src="catalog/view/javascript/bootstrap/js/bootstrap-paginator.min.js"></script>
{% if separate_view is defined and separate_view %}
<div class="container-fluid" id="content" style="margin-left: 18%">
  {% else %}
  <div class="container">
    {% endif %}
    <ul class="breadcrumb">
      {% for breadcrumb in breadcrumbs %}
        <li>
          <a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a>
        </li>
      {% endfor %}
    </ul>
    <div class="row">{{ column_left }}
      {% if column_left and column_right %}
        {% set class = 'col-sm-6' %}
      {% elseif column_left or column_right %}
        {% set class = 'col-sm-9' %}
      {% else %}
        {% set class = 'col-sm-12' %}
      {% endif %}
      <div id="content" class="{{ class }}">{{ content_top }}
          <h1>{{ text_title }}</h1>
              <ul class="nav nav-tabs" style="margin-bottom: 0">
                {% for type_id,type_name in TYPE_DIC %}
                <li {% if filter_type_id ==type_id %}class="active"{% endif %}>
                  <a class="noticeTab" onclick="loadPage({{ type_id }},'{{ is_read }}')"   data-toggle="tab">{{ type_name }}
                    {% if unread_count_by_type[type_id]>0 %}
                      <span class="notice-dot1"></span>
                    {% endif %}
                  </a>
                </li>
                {% endfor %}
              </ul>
        <div class="content-wrap">
          <div class="tab-content">
            <div class="tab-pane active" id="tab-rma">
                <div class="all_notifications_div">
                  <div class="notification_filter col-sm-3">
                    <ul>
                      <li {% if is_read=='unread' %}class="color-red"{% endif %}>
                        <a onclick="loadPage({{filter_type_id}},'unread')" href="javascript:void(0);" style="color: inherit">Unread notice
                          {% if unread_count>0 %}
                            ({{ unread_count }})
                          {% endif %}
                        </a>
                      </li>
                      <hr>
                      <li {% if is_read=='total' %}class="color-red"{% endif %}>
                        <a onclick="loadPage({{filter_type_id}},'total')" href="javascript:void(0);" style="color: inherit">All notice
                          {% if total_count>0 %}
                            ({{ total_count }})
                          {% endif %}
                        </a>
                      </li>
                    </ul>
                  </div>
                  <div class="notification_body col-sm-9">
                    {% if notices %}
                    <div class="table-responsive" style="min-height: 300px;">
                      {% if filter_type_id!=3 and unread_count_by_type[filter_type_id]>0 %}
                        <a class="read_all" href="{{ read_all_action }}&filter_type_id={{ filter_type_id }}">
                            <button type="button" class="btn btn-primary">Read all</button>
                        </a>
                        <hr>
                      {% endif %}
                      <table style="width: 100%;">
                        <tbody>
                        {% for notice in notices %}
                          <tr>
                            <td style="padding-left:20px;">
                                <li>
                                  <div class="col-sm-9 pull-left" style="margin-bottom: 10px;
                                    color:{% if notice.is_read==1 %}#9e9c9c{% else %}black{% endif %}">
                                      <a onclick="noticeForm('{{ notice.notice_href }}')"  href="javascript:void(0);"
                                         class="notice_title" style="color: inherit">
                                        {{ notice.title }}
                                        {% if not notice.is_read %}
                                            <span class="notice-dot1"></span>
                                        {% endif %}
                                      </a>
                                  </div>
                                  <div class="col-sm-3 pull-right" style="color:#9e9c9c">
                                       {{ notice.publish_date }}
                                  </div>
                                </li>
                            </td>
                          </tr>
                        {% endfor %}
                        </tbody>
                      </table>
                    </div>
                    <div class="row" style="margin-right: 0">
                      <div class="col-sm-6 text-left">
                        <ul id="bos_pagination">
                          <!--里面什么都不用写-->
                        </ul></div>
                      <div class="col-sm-6 text-right">{{ pagination_results }}</div>
                    </div>
                    {% else %}
                      <div class="page-not-found">{{ text_no_notice }}</div>
                    {% endif %}
                  </div>
                </div>

            </div>
          </div>
        </div>
        {{ content_bottom }}</div>
      {{ column_right }}
    </div>
  </div>
</div>
<script type="text/javascript">

  function loadPage(filter_type_id=1,is_read='unread',page=1){
      location.href="{{current}}&filter_type_id="+filter_type_id+"&is_read="+is_read+"&page="+page
  }
    //分页
    $('#bos_pagination').bootstrapPaginator({
        /*当前使用的是3版本的bootstrap*/
        bootstrapMajorVersion: 3,
        /*配置的字体大小是小号*/
        size: 'normal',
        /*当前页*/
        currentPage: {{page_num}},
        /*一共多少页*/
        totalPages: {{total_pages}},
        /*页面上最多显示几个含数字的分页按钮*/
        numberOfPages: 5,
        onPageClicked: function (event, originalEvent, type, page) {
            loadPage('{{ filter_type_id }}','{{ is_read }}',page);
        }
    });

</script>
<style>
  .noticeTab{
    cursor: pointer;
  }
  .notice-dot1 {
    position: relative;
    display: inline-block;
    font-size: 12px;
    text-align: center;
    background-color: #FF5722;
    color: #fff;
    width: 6px;
    height: 6px;
    padding: 0;
    border-radius: 50%;
    top: -5px;
    margin: -7px 3px 0;
  }
  hr {
    margin-top: 10px;
    margin-bottom: 10px;
  }

  .content-wrap {
    background-color: white;
    padding: 25px 0 10px 0;
    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
  }

  .notification_body li {
    list-style-type: none
  }

  .notice_title:before {
    content: "\2022";
    font-size: 15px;
    color: inherit;
  }

  .all_notifications_div {
    display: flex;
    width: 100%;
  }

  {% if separate_view is defined and separate_view %}
  .notification_filter {
    font-size: 15px;
    padding-left: 3%;
  }

  {% else %}
  .notification_filter {
    font-size: 12px;
    padding-left: 1%;
  }

  {% endif %}

  .notification_body {
    border-left: 1px solid #eee;
  }

  .page-not-found {
    text-align: center;
    padding: 0 0 15px 0;
  }

  @media screen and (max-width: 700px) {
    .all_notifications_div {
      display: inline;
    }
  }

  .read_all {
    margin: 0 0 10px 30px;
    width: 20%;
    font-size: 18px;
    font-weight: bold;
    display: block;
  }

  .color-red {
    color: #FF0000;
  }
</style>
{{ footer }}
